{"version":3,"file":"bundle.js","sources":["../node_modules/riot/riot.esm.js","../node_modules/date-fns/esm/_lib/toInteger/index.js","../node_modules/date-fns/esm/_lib/requiredArgs/index.js","../node_modules/date-fns/esm/toDate/index.js","../node_modules/date-fns/esm/addDays/index.js","../node_modules/date-fns/esm/addMilliseconds/index.js","../node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js","../node_modules/date-fns/esm/isValid/index.js","../node_modules/date-fns/esm/locale/en-US/_lib/formatDistance/index.js","../node_modules/date-fns/esm/locale/_lib/buildFormatLongFn/index.js","../node_modules/date-fns/esm/locale/en-US/_lib/formatLong/index.js","../node_modules/date-fns/esm/locale/en-US/_lib/formatRelative/index.js","../node_modules/date-fns/esm/locale/_lib/buildLocalizeFn/index.js","../node_modules/date-fns/esm/locale/_lib/buildMatchFn/index.js","../node_modules/date-fns/esm/locale/en-US/_lib/match/index.js","../node_modules/date-fns/esm/locale/_lib/buildMatchPatternFn/index.js","../node_modules/date-fns/esm/locale/en-US/index.js","../node_modules/date-fns/esm/locale/en-US/_lib/localize/index.js","../node_modules/date-fns/esm/subMilliseconds/index.js","../node_modules/date-fns/esm/_lib/addLeadingZeros/index.js","../node_modules/date-fns/esm/_lib/format/lightFormatters/index.js","../node_modules/date-fns/esm/_lib/startOfUTCISOWeek/index.js","../node_modules/date-fns/esm/_lib/getUTCISOWeekYear/index.js","../node_modules/date-fns/esm/_lib/startOfUTCISOWeekYear/index.js","../node_modules/date-fns/esm/_lib/startOfUTCWeek/index.js","../node_modules/date-fns/esm/_lib/getUTCWeekYear/index.js","../node_modules/date-fns/esm/_lib/startOfUTCWeekYear/index.js","../node_modules/date-fns/esm/_lib/format/formatters/index.js","../node_modules/date-fns/esm/_lib/getUTCWeek/index.js","../node_modules/date-fns/esm/_lib/getUTCISOWeek/index.js","../node_modules/date-fns/esm/_lib/getUTCDayOfYear/index.js","../node_modules/date-fns/esm/_lib/format/longFormatters/index.js","../node_modules/date-fns/esm/_lib/protectedTokens/index.js","../node_modules/date-fns/esm/format/index.js","../node_modules/date-fns/esm/getISODay/index.js","../node_modules/date-fns/esm/setISODay/index.js","../node_modules/@riotjs/route/route.esm.js","../src/app.riot","../src/exercise.riot","../src/plans.js","../src/weekdays.js","../src/main.js"],"sourcesContent":["/* Riot v4.14.0, @license MIT */\n/**\n * Convert a string from camel case to dash-case\n * @param   {string} string - probably a component tag name\n * @returns {string} component name normalized\n */\nfunction camelToDashCase(string) {\n  return string.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n/**\n * Convert a string containing dashes to camel case\n * @param   {string} string - input string\n * @returns {string} my-string -> myString\n */\n\nfunction dashToCamelCase(string) {\n  return string.replace(/-(\\w)/g, (_, c) => c.toUpperCase());\n}\n\n/**\n * Get all the element attributes as object\n * @param   {HTMLElement} element - DOM node we want to parse\n * @returns {Object} all the attributes found as a key value pairs\n */\n\nfunction DOMattributesToObject(element) {\n  return Array.from(element.attributes).reduce((acc, attribute) => {\n    acc[dashToCamelCase(attribute.name)] = attribute.value;\n    return acc;\n  }, {});\n}\n/**\n * Move all the child nodes from a source tag to another\n * @param   {HTMLElement} source - source node\n * @param   {HTMLElement} target - target node\n * @returns {undefined} it's a void method ¯\\_(ツ)_/¯\n */\n// Ignore this helper because it's needed only for svg tags\n\nfunction moveChildren(source, target) {\n  if (source.firstChild) {\n    target.appendChild(source.firstChild);\n    moveChildren(source, target);\n  }\n}\n/**\n * Remove the child nodes from any DOM node\n * @param   {HTMLElement} node - target node\n * @returns {undefined}\n */\n\nfunction cleanNode(node) {\n  clearChildren(node.childNodes);\n}\n/**\n * Clear multiple children in a node\n * @param   {HTMLElement[]} children - direct children nodes\n * @returns {undefined}\n */\n\nfunction clearChildren(children) {\n  Array.from(children).forEach(removeNode);\n}\n/**\n * Remove a node from the DOM\n * @param   {HTMLElement} node - target node\n * @returns {undefined}\n */\n\nfunction removeNode(node) {\n  const {\n    parentNode\n  } = node;\n  if (node.remove) node.remove();\n  /* istanbul ignore else */\n  else if (parentNode) parentNode.removeChild(node);\n}\n\nconst EACH = 0;\nconst IF = 1;\nconst SIMPLE = 2;\nconst TAG = 3;\nconst SLOT = 4;\nvar bindingTypes = {\n  EACH,\n  IF,\n  SIMPLE,\n  TAG,\n  SLOT\n};\n\nconst ATTRIBUTE = 0;\nconst EVENT = 1;\nconst TEXT = 2;\nconst VALUE = 3;\nvar expressionTypes = {\n  ATTRIBUTE,\n  EVENT,\n  TEXT,\n  VALUE\n};\n\n/**\n * Create the template meta object in case of <template> fragments\n * @param   {TemplateChunk} componentTemplate - template chunk object\n * @returns {Object} the meta property that will be passed to the mount function of the TemplateChunk\n */\nfunction createTemplateMeta(componentTemplate) {\n  const fragment = componentTemplate.dom.cloneNode(true);\n  return {\n    avoidDOMInjection: true,\n    fragment,\n    children: Array.from(fragment.childNodes)\n  };\n}\n\nconst {\n  indexOf,\n  slice\n} = [];\n\nconst append = (get, parent, children, start, end, before) => {\n  const isSelect = ('selectedIndex' in parent);\n  let noSelection = isSelect;\n\n  while (start < end) {\n    const child = get(children[start], 1);\n    parent.insertBefore(child, before);\n\n    if (isSelect && noSelection && child.selected) {\n      noSelection = !noSelection;\n      let {\n        selectedIndex\n      } = parent;\n      parent.selectedIndex = selectedIndex < 0 ? start : indexOf.call(parent.querySelectorAll('option'), child);\n    }\n\n    start++;\n  }\n};\nconst eqeq = (a, b) => a == b;\nconst identity = O => O;\nconst indexOf$1 = (moreNodes, moreStart, moreEnd, lessNodes, lessStart, lessEnd, compare) => {\n  const length = lessEnd - lessStart;\n  /* istanbul ignore if */\n\n  if (length < 1) return -1;\n\n  while (moreEnd - moreStart >= length) {\n    let m = moreStart;\n    let l = lessStart;\n\n    while (m < moreEnd && l < lessEnd && compare(moreNodes[m], lessNodes[l])) {\n      m++;\n      l++;\n    }\n\n    if (l === lessEnd) return moreStart;\n    moreStart = m + 1;\n  }\n\n  return -1;\n};\nconst isReversed = (futureNodes, futureEnd, currentNodes, currentStart, currentEnd, compare) => {\n  while (currentStart < currentEnd && compare(currentNodes[currentStart], futureNodes[futureEnd - 1])) {\n    currentStart++;\n    futureEnd--;\n  }\n  return futureEnd === 0;\n};\nconst next = (get, list, i, length, before) => i < length ? get(list[i], 0) : 0 < i ? get(list[i - 1], -0).nextSibling : before;\nconst remove = (get, children, start, end) => {\n  while (start < end) drop(get(children[start++], -1));\n}; // - - - - - - - - - - - - - - - - - - -\n// diff related constants and utilities\n// - - - - - - - - - - - - - - - - - - -\n\nconst DELETION = -1;\nconst INSERTION = 1;\nconst SKIP = 0;\nconst SKIP_OND = 50;\n\nconst HS = (futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges) => {\n  let k = 0;\n  /* istanbul ignore next */\n\n  let minLen = futureChanges < currentChanges ? futureChanges : currentChanges;\n  const link = Array(minLen++);\n  const tresh = Array(minLen);\n  tresh[0] = -1;\n\n  for (let i = 1; i < minLen; i++) tresh[i] = currentEnd;\n\n  const nodes = currentNodes.slice(currentStart, currentEnd);\n\n  for (let i = futureStart; i < futureEnd; i++) {\n    const index = nodes.indexOf(futureNodes[i]);\n\n    if (-1 < index) {\n      const idxInOld = index + currentStart;\n      k = findK(tresh, minLen, idxInOld);\n      /* istanbul ignore else */\n\n      if (-1 < k) {\n        tresh[k] = idxInOld;\n        link[k] = {\n          newi: i,\n          oldi: idxInOld,\n          prev: link[k - 1]\n        };\n      }\n    }\n  }\n\n  k = --minLen;\n  --currentEnd;\n\n  while (tresh[k] > currentEnd) --k;\n\n  minLen = currentChanges + futureChanges - k;\n  const diff = Array(minLen);\n  let ptr = link[k];\n  --futureEnd;\n\n  while (ptr) {\n    const {\n      newi,\n      oldi\n    } = ptr;\n\n    while (futureEnd > newi) {\n      diff[--minLen] = INSERTION;\n      --futureEnd;\n    }\n\n    while (currentEnd > oldi) {\n      diff[--minLen] = DELETION;\n      --currentEnd;\n    }\n\n    diff[--minLen] = SKIP;\n    --futureEnd;\n    --currentEnd;\n    ptr = ptr.prev;\n  }\n\n  while (futureEnd >= futureStart) {\n    diff[--minLen] = INSERTION;\n    --futureEnd;\n  }\n\n  while (currentEnd >= currentStart) {\n    diff[--minLen] = DELETION;\n    --currentEnd;\n  }\n\n  return diff;\n}; // this is pretty much the same petit-dom code without the delete map part\n// https://github.com/yelouafi/petit-dom/blob/bd6f5c919b5ae5297be01612c524c40be45f14a7/src/vdom.js#L556-L561\n\n\nconst OND = (futureNodes, futureStart, rows, currentNodes, currentStart, cols, compare) => {\n  const length = rows + cols;\n  const v = [];\n  let d, k, r, c, pv, cv, pd;\n\n  outer: for (d = 0; d <= length; d++) {\n    /* istanbul ignore if */\n    if (d > SKIP_OND) return null;\n    pd = d - 1;\n    /* istanbul ignore next */\n\n    pv = d ? v[d - 1] : [0, 0];\n    cv = v[d] = [];\n\n    for (k = -d; k <= d; k += 2) {\n      if (k === -d || k !== d && pv[pd + k - 1] < pv[pd + k + 1]) {\n        c = pv[pd + k + 1];\n      } else {\n        c = pv[pd + k - 1] + 1;\n      }\n\n      r = c - k;\n\n      while (c < cols && r < rows && compare(currentNodes[currentStart + c], futureNodes[futureStart + r])) {\n        c++;\n        r++;\n      }\n\n      if (c === cols && r === rows) {\n        break outer;\n      }\n\n      cv[d + k] = c;\n    }\n  }\n\n  const diff = Array(d / 2 + length / 2);\n  let diffIdx = diff.length - 1;\n\n  for (d = v.length - 1; d >= 0; d--) {\n    while (c > 0 && r > 0 && compare(currentNodes[currentStart + c - 1], futureNodes[futureStart + r - 1])) {\n      // diagonal edge = equality\n      diff[diffIdx--] = SKIP;\n      c--;\n      r--;\n    }\n\n    if (!d) break;\n    pd = d - 1;\n    /* istanbul ignore next */\n\n    pv = d ? v[d - 1] : [0, 0];\n    k = c - r;\n\n    if (k === -d || k !== d && pv[pd + k - 1] < pv[pd + k + 1]) {\n      // vertical edge = insertion\n      r--;\n      diff[diffIdx--] = INSERTION;\n    } else {\n      // horizontal edge = deletion\n      c--;\n      diff[diffIdx--] = DELETION;\n    }\n  }\n\n  return diff;\n};\n\nconst applyDiff = (diff, get, parentNode, futureNodes, futureStart, currentNodes, currentStart, currentLength, before) => {\n  const live = [];\n  const length = diff.length;\n  let currentIndex = currentStart;\n  let i = 0;\n\n  while (i < length) {\n    switch (diff[i++]) {\n      case SKIP:\n        futureStart++;\n        currentIndex++;\n        break;\n\n      case INSERTION:\n        // TODO: bulk appends for sequential nodes\n        live.push(futureNodes[futureStart]);\n        append(get, parentNode, futureNodes, futureStart++, futureStart, currentIndex < currentLength ? get(currentNodes[currentIndex], 0) : before);\n        break;\n\n      case DELETION:\n        currentIndex++;\n        break;\n    }\n  }\n\n  i = 0;\n\n  while (i < length) {\n    switch (diff[i++]) {\n      case SKIP:\n        currentStart++;\n        break;\n\n      case DELETION:\n        // TODO: bulk removes for sequential nodes\n        if (-1 < live.indexOf(currentNodes[currentStart])) currentStart++;else remove(get, currentNodes, currentStart++, currentStart);\n        break;\n    }\n  }\n};\n\nconst findK = (ktr, length, j) => {\n  let lo = 1;\n  let hi = length;\n\n  while (lo < hi) {\n    const mid = (lo + hi) / 2 >>> 0;\n    if (j < ktr[mid]) hi = mid;else lo = mid + 1;\n  }\n\n  return lo;\n};\n\nconst smartDiff = (get, parentNode, futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges, currentLength, compare, before) => {\n  applyDiff(OND(futureNodes, futureStart, futureChanges, currentNodes, currentStart, currentChanges, compare) || HS(futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges), get, parentNode, futureNodes, futureStart, currentNodes, currentStart, currentLength, before);\n};\n\nconst drop = node => (node.remove || dropChild).call(node);\n\nfunction dropChild() {\n  const {\n    parentNode\n  } = this;\n  /* istanbul ignore else */\n\n  if (parentNode) parentNode.removeChild(this);\n}\n\n/*! (c) 2018 Andrea Giammarchi (ISC) */\n\nconst domdiff = (parentNode, // where changes happen\ncurrentNodes, // Array of current items/nodes\nfutureNodes, // Array of future items/nodes\noptions // optional object with one of the following properties\n//  before: domNode\n//  compare(generic, generic) => true if same generic\n//  node(generic) => Node\n) => {\n  if (!options) options = {};\n  const compare = options.compare || eqeq;\n  const get = options.node || identity;\n  const before = options.before == null ? null : get(options.before, 0);\n  const currentLength = currentNodes.length;\n  let currentEnd = currentLength;\n  let currentStart = 0;\n  let futureEnd = futureNodes.length;\n  let futureStart = 0; // common prefix\n\n  while (currentStart < currentEnd && futureStart < futureEnd && compare(currentNodes[currentStart], futureNodes[futureStart])) {\n    currentStart++;\n    futureStart++;\n  } // common suffix\n\n\n  while (currentStart < currentEnd && futureStart < futureEnd && compare(currentNodes[currentEnd - 1], futureNodes[futureEnd - 1])) {\n    currentEnd--;\n    futureEnd--;\n  }\n\n  const currentSame = currentStart === currentEnd;\n  const futureSame = futureStart === futureEnd; // same list\n\n  if (currentSame && futureSame) return futureNodes; // only stuff to add\n\n  if (currentSame && futureStart < futureEnd) {\n    append(get, parentNode, futureNodes, futureStart, futureEnd, next(get, currentNodes, currentStart, currentLength, before));\n    return futureNodes;\n  } // only stuff to remove\n\n\n  if (futureSame && currentStart < currentEnd) {\n    remove(get, currentNodes, currentStart, currentEnd);\n    return futureNodes;\n  }\n\n  const currentChanges = currentEnd - currentStart;\n  const futureChanges = futureEnd - futureStart;\n  let i = -1; // 2 simple indels: the shortest sequence is a subsequence of the longest\n\n  if (currentChanges < futureChanges) {\n    i = indexOf$1(futureNodes, futureStart, futureEnd, currentNodes, currentStart, currentEnd, compare); // inner diff\n\n    if (-1 < i) {\n      append(get, parentNode, futureNodes, futureStart, i, get(currentNodes[currentStart], 0));\n      append(get, parentNode, futureNodes, i + currentChanges, futureEnd, next(get, currentNodes, currentEnd, currentLength, before));\n      return futureNodes;\n    }\n  }\n  /* istanbul ignore else */\n  else if (futureChanges < currentChanges) {\n      i = indexOf$1(currentNodes, currentStart, currentEnd, futureNodes, futureStart, futureEnd, compare); // outer diff\n\n      if (-1 < i) {\n        remove(get, currentNodes, currentStart, i);\n        remove(get, currentNodes, i + futureChanges, currentEnd);\n        return futureNodes;\n      }\n    } // common case with one replacement for many nodes\n  // or many nodes replaced for a single one\n\n  /* istanbul ignore else */\n\n\n  if (currentChanges < 2 || futureChanges < 2) {\n    append(get, parentNode, futureNodes, futureStart, futureEnd, get(currentNodes[currentStart], 0));\n    remove(get, currentNodes, currentStart, currentEnd);\n    return futureNodes;\n  } // the half match diff part has been skipped in petit-dom\n  // https://github.com/yelouafi/petit-dom/blob/bd6f5c919b5ae5297be01612c524c40be45f14a7/src/vdom.js#L391-L397\n  // accordingly, I think it's safe to skip in here too\n  // if one day it'll come out like the speediest thing ever to do\n  // then I might add it in here too\n  // Extra: before going too fancy, what about reversed lists ?\n  //        This should bail out pretty quickly if that's not the case.\n\n\n  if (currentChanges === futureChanges && isReversed(futureNodes, futureEnd, currentNodes, currentStart, currentEnd, compare)) {\n    append(get, parentNode, futureNodes, futureStart, futureEnd, next(get, currentNodes, currentEnd, currentLength, before));\n    return futureNodes;\n  } // last resort through a smart diff\n\n\n  smartDiff(get, parentNode, futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges, currentLength, compare, before);\n  return futureNodes;\n};\n\n/**\n * Quick type checking\n * @param   {*} element - anything\n * @param   {string} type - type definition\n * @returns {boolean} true if the type corresponds\n */\nfunction checkType(element, type) {\n  return typeof element === type;\n}\n/**\n * Check if an element is part of an svg\n * @param   {HTMLElement}  el - element to check\n * @returns {boolean} true if we are in an svg context\n */\n\nfunction isSvg(el) {\n  const owner = el.ownerSVGElement;\n  return !!owner || owner === null;\n}\n/**\n * Check if an element is a template tag\n * @param   {HTMLElement}  el - element to check\n * @returns {boolean} true if it's a <template>\n */\n\nfunction isTemplate(el) {\n  return !isNil(el.content);\n}\n/**\n * Check that will be passed if its argument is a function\n * @param   {*} value - value to check\n * @returns {boolean} - true if the value is a function\n */\n\nfunction isFunction(value) {\n  return checkType(value, 'function');\n}\n/**\n * Check if a value is a Boolean\n * @param   {*}  value - anything\n * @returns {boolean} true only for the value is a boolean\n */\n\nfunction isBoolean(value) {\n  return checkType(value, 'boolean');\n}\n/**\n * Check if a value is an Object\n * @param   {*}  value - anything\n * @returns {boolean} true only for the value is an object\n */\n\nfunction isObject(value) {\n  return !isNil(value) && checkType(value, 'object');\n}\n/**\n * Check if a value is null or undefined\n * @param   {*}  value - anything\n * @returns {boolean} true only for the 'undefined' and 'null' types\n */\n\nfunction isNil(value) {\n  return value === null || value === undefined;\n}\n\nconst UNMOUNT_SCOPE = Symbol('unmount');\nconst EachBinding = Object.seal({\n  // dynamic binding properties\n  // childrenMap: null,\n  // node: null,\n  // root: null,\n  // condition: null,\n  // evaluate: null,\n  // template: null,\n  // isTemplateTag: false,\n  nodes: [],\n\n  // getKey: null,\n  // indexName: null,\n  // itemName: null,\n  // afterPlaceholder: null,\n  // placeholder: null,\n  // API methods\n  mount(scope, parentScope) {\n    return this.update(scope, parentScope);\n  },\n\n  update(scope, parentScope) {\n    const {\n      placeholder,\n      nodes,\n      childrenMap\n    } = this;\n    const collection = scope === UNMOUNT_SCOPE ? null : this.evaluate(scope);\n    const items = collection ? Array.from(collection) : [];\n    const parent = placeholder.parentNode; // prepare the diffing\n\n    const {\n      newChildrenMap,\n      batches,\n      futureNodes\n    } = createPatch(items, scope, parentScope, this); // patch the DOM only if there are new nodes\n\n    domdiff(parent, nodes, futureNodes, {\n      before: placeholder,\n      node: patch(Array.from(childrenMap.values()), parentScope)\n    }); // trigger the mounts and the updates\n\n    batches.forEach(fn => fn()); // update the children map\n\n    this.childrenMap = newChildrenMap;\n    this.nodes = futureNodes;\n    return this;\n  },\n\n  unmount(scope, parentScope) {\n    this.update(UNMOUNT_SCOPE, parentScope);\n    return this;\n  }\n\n});\n/**\n * Patch the DOM while diffing\n * @param   {TemplateChunk[]} redundant - redundant tepmplate chunks\n * @param   {*} parentScope - scope of the parent template\n * @returns {Function} patch function used by domdiff\n */\n\nfunction patch(redundant, parentScope) {\n  return (item, info) => {\n    if (info < 0) {\n      const element = redundant.pop();\n\n      if (element) {\n        const {\n          template,\n          context\n        } = element; // notice that we pass null as last argument because\n        // the root node and its children will be removed by domdiff\n\n        template.unmount(context, parentScope, null);\n      }\n    }\n\n    return item;\n  };\n}\n/**\n * Check whether a template must be filtered from a loop\n * @param   {Function} condition - filter function\n * @param   {Object} context - argument passed to the filter function\n * @returns {boolean} true if this item should be skipped\n */\n\n\nfunction mustFilterItem(condition, context) {\n  return condition ? Boolean(condition(context)) === false : false;\n}\n/**\n * Extend the scope of the looped template\n * @param   {Object} scope - current template scope\n * @param   {string} options.itemName - key to identify the looped item in the new context\n * @param   {string} options.indexName - key to identify the index of the looped item\n * @param   {number} options.index - current index\n * @param   {*} options.item - collection item looped\n * @returns {Object} enhanced scope object\n */\n\n\nfunction extendScope(scope, _ref) {\n  let {\n    itemName,\n    indexName,\n    index,\n    item\n  } = _ref;\n  scope[itemName] = item;\n  if (indexName) scope[indexName] = index;\n  return scope;\n}\n/**\n * Loop the current template items\n * @param   {Array} items - expression collection value\n * @param   {*} scope - template scope\n * @param   {*} parentScope - scope of the parent template\n * @param   {EeachBinding} binding - each binding object instance\n * @returns {Object} data\n * @returns {Map} data.newChildrenMap - a Map containing the new children template structure\n * @returns {Array} data.batches - array containing the template lifecycle functions to trigger\n * @returns {Array} data.futureNodes - array containing the nodes we need to diff\n */\n\n\nfunction createPatch(items, scope, parentScope, binding) {\n  const {\n    condition,\n    template,\n    childrenMap,\n    itemName,\n    getKey,\n    indexName,\n    root,\n    isTemplateTag\n  } = binding;\n  const newChildrenMap = new Map();\n  const batches = [];\n  const futureNodes = [];\n  items.forEach((item, index) => {\n    const context = extendScope(Object.create(scope), {\n      itemName,\n      indexName,\n      index,\n      item\n    });\n    const key = getKey ? getKey(context) : index;\n    const oldItem = childrenMap.get(key);\n\n    if (mustFilterItem(condition, context)) {\n      return;\n    }\n\n    const componentTemplate = oldItem ? oldItem.template : template.clone();\n    const el = oldItem ? componentTemplate.el : root.cloneNode();\n    const mustMount = !oldItem;\n    const meta = isTemplateTag && mustMount ? createTemplateMeta(componentTemplate) : {};\n\n    if (mustMount) {\n      batches.push(() => componentTemplate.mount(el, context, parentScope, meta));\n    } else {\n      batches.push(() => componentTemplate.update(context, parentScope));\n    } // create the collection of nodes to update or to add\n    // in case of template tags we need to add all its children nodes\n\n\n    if (isTemplateTag) {\n      const children = meta.children || componentTemplate.children;\n      futureNodes.push(...children);\n    } else {\n      futureNodes.push(el);\n    } // delete the old item from the children map\n\n\n    childrenMap.delete(key); // update the children map\n\n    newChildrenMap.set(key, {\n      template: componentTemplate,\n      context,\n      index\n    });\n  });\n  return {\n    newChildrenMap,\n    batches,\n    futureNodes\n  };\n}\n\nfunction create(node, _ref2) {\n  let {\n    evaluate,\n    condition,\n    itemName,\n    indexName,\n    getKey,\n    template\n  } = _ref2;\n  const placeholder = document.createTextNode('');\n  const parent = node.parentNode;\n  const root = node.cloneNode();\n  parent.insertBefore(placeholder, node);\n  removeNode(node);\n  return Object.assign({}, EachBinding, {\n    childrenMap: new Map(),\n    node,\n    root,\n    condition,\n    evaluate,\n    isTemplateTag: isTemplate(root),\n    template: template.createDOM(node),\n    getKey,\n    indexName,\n    itemName,\n    placeholder\n  });\n}\n\n/**\n * Binding responsible for the `if` directive\n */\n\nconst IfBinding = Object.seal({\n  // dynamic binding properties\n  // node: null,\n  // evaluate: null,\n  // isTemplateTag: false,\n  // placeholder: null,\n  // template: null,\n  // API methods\n  mount(scope, parentScope) {\n    return this.update(scope, parentScope);\n  },\n\n  update(scope, parentScope) {\n    const value = !!this.evaluate(scope);\n    const mustMount = !this.value && value;\n    const mustUnmount = this.value && !value;\n\n    const mount = () => {\n      const pristine = this.node.cloneNode();\n      this.placeholder.parentNode.insertBefore(pristine, this.placeholder);\n      this.template = this.template.clone();\n      this.template.mount(pristine, scope, parentScope);\n    };\n\n    switch (true) {\n      case mustMount:\n        mount();\n        break;\n\n      case mustUnmount:\n        this.unmount(scope);\n        break;\n\n      default:\n        if (value) this.template.update(scope, parentScope);\n    }\n\n    this.value = value;\n    return this;\n  },\n\n  unmount(scope, parentScope) {\n    this.template.unmount(scope, parentScope, true);\n    return this;\n  }\n\n});\nfunction create$1(node, _ref) {\n  let {\n    evaluate,\n    template\n  } = _ref;\n  const parent = node.parentNode;\n  const placeholder = document.createTextNode('');\n  parent.insertBefore(placeholder, node);\n  removeNode(node);\n  return Object.assign({}, IfBinding, {\n    node,\n    evaluate,\n    placeholder,\n    template: template.createDOM(node)\n  });\n}\n\n/**\n * Throw an error with a descriptive message\n * @param   { string } message - error message\n * @returns { undefined } hoppla.. at this point the program should stop working\n */\n\nfunction panic(message) {\n  throw new Error(message);\n}\n/**\n * Returns the memoized (cached) function.\n * // borrowed from https://www.30secondsofcode.org/js/s/memoize\n * @param {Function} fn - function to memoize\n * @returns {Function} memoize function\n */\n\nfunction memoize(fn) {\n  const cache = new Map();\n\n  const cached = val => {\n    return cache.has(val) ? cache.get(val) : cache.set(val, fn.call(this, val)) && cache.get(val);\n  };\n\n  cached.cache = cache;\n  return cached;\n}\n/**\n * Evaluate a list of attribute expressions\n * @param   {Array} attributes - attribute expressions generated by the riot compiler\n * @returns {Object} key value pairs with the result of the computation\n */\n\nfunction evaluateAttributeExpressions(attributes) {\n  return attributes.reduce((acc, attribute) => {\n    const {\n      value,\n      type\n    } = attribute;\n\n    switch (true) {\n      // spread attribute\n      case !attribute.name && type === ATTRIBUTE:\n        return Object.assign({}, acc, value);\n      // value attribute\n\n      case type === VALUE:\n        acc.value = attribute.value;\n        break;\n      // normal attributes\n\n      default:\n        acc[dashToCamelCase(attribute.name)] = attribute.value;\n    }\n\n    return acc;\n  }, {});\n}\n\nconst REMOVE_ATTRIBUTE = 'removeAttribute';\nconst SET_ATTIBUTE = 'setAttribute';\nconst ElementProto = typeof Element === 'undefined' ? {} : Element.prototype;\nconst isNativeHtmlProperty = memoize(name => ElementProto.hasOwnProperty(name)); // eslint-disable-line\n\n/**\n * Add all the attributes provided\n * @param   {HTMLElement} node - target node\n * @param   {Object} attributes - object containing the attributes names and values\n * @returns {undefined} sorry it's a void function :(\n */\n\nfunction setAllAttributes(node, attributes) {\n  Object.entries(attributes).forEach((_ref) => {\n    let [name, value] = _ref;\n    return attributeExpression(node, {\n      name\n    }, value);\n  });\n}\n/**\n * Remove all the attributes provided\n * @param   {HTMLElement} node - target node\n * @param   {Object} newAttributes - object containing all the new attribute names\n * @param   {Object} oldAttributes - object containing all the old attribute names\n * @returns {undefined} sorry it's a void function :(\n */\n\n\nfunction removeAllAttributes(node, newAttributes, oldAttributes) {\n  const newKeys = newAttributes ? Object.keys(newAttributes) : [];\n  Object.keys(oldAttributes).filter(name => !newKeys.includes(name)).forEach(attribute => node.removeAttribute(attribute));\n}\n/**\n * This methods handles the DOM attributes updates\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {string} expression.name - attribute name\n * @param   {*} value - new expression value\n * @param   {*} oldValue - the old expression cached value\n * @returns {undefined}\n */\n\n\nfunction attributeExpression(node, _ref2, value, oldValue) {\n  let {\n    name\n  } = _ref2;\n\n  // is it a spread operator? {...attributes}\n  if (!name) {\n    if (oldValue) {\n      // remove all the old attributes\n      removeAllAttributes(node, value, oldValue);\n    } // is the value still truthy?\n\n\n    if (value) {\n      setAllAttributes(node, value);\n    }\n\n    return;\n  } // handle boolean attributes\n\n\n  if (!isNativeHtmlProperty(name) && (isBoolean(value) || isObject(value) || isFunction(value))) {\n    node[name] = value;\n  }\n\n  node[getMethod(value)](name, normalizeValue(name, value));\n}\n/**\n * Get the attribute modifier method\n * @param   {*} value - if truthy we return `setAttribute` othewise `removeAttribute`\n * @returns {string} the node attribute modifier method name\n */\n\nfunction getMethod(value) {\n  return isNil(value) || value === false || value === '' || isObject(value) || isFunction(value) ? REMOVE_ATTRIBUTE : SET_ATTIBUTE;\n}\n/**\n * Get the value as string\n * @param   {string} name - attribute name\n * @param   {*} value - user input value\n * @returns {string} input value as string\n */\n\n\nfunction normalizeValue(name, value) {\n  // be sure that expressions like selected={ true } will be always rendered as selected='selected'\n  if (value === true) return name;\n  return value;\n}\n\nconst RE_EVENTS_PREFIX = /^on/;\n\nconst getCallbackAndOptions = value => Array.isArray(value) ? value : [value, false]; // see also https://medium.com/@WebReflection/dom-handleevent-a-cross-platform-standard-since-year-2000-5bf17287fd38\n\n\nconst EventListener = {\n  handleEvent(event) {\n    this[event.type](event);\n  }\n\n};\nconst ListenersWeakMap = new WeakMap();\n\nconst createListener = node => {\n  const listener = Object.create(EventListener);\n  ListenersWeakMap.set(node, listener);\n  return listener;\n};\n/**\n * Set a new event listener\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {string} expression.name - event name\n * @param   {*} value - new expression value\n * @returns {value} the callback just received\n */\n\n\nfunction eventExpression(node, _ref, value) {\n  let {\n    name\n  } = _ref;\n  const normalizedEventName = name.replace(RE_EVENTS_PREFIX, '');\n  const eventListener = ListenersWeakMap.get(node) || createListener(node);\n  const [callback, options] = getCallbackAndOptions(value);\n  const handler = eventListener[normalizedEventName];\n  const mustRemoveEvent = handler && !callback;\n  const mustAddEvent = callback && !handler;\n\n  if (mustRemoveEvent) {\n    node.removeEventListener(normalizedEventName, eventListener);\n  }\n\n  if (mustAddEvent) {\n    node.addEventListener(normalizedEventName, eventListener, options);\n  }\n\n  eventListener[normalizedEventName] = callback;\n}\n\n/**\n * Normalize the user value in order to render a empty string in case of falsy values\n * @param   {*} value - user input value\n * @returns {string} hopefully a string\n */\n\nfunction normalizeStringValue(value) {\n  return isNil(value) ? '' : value;\n}\n\n/**\n * Get the the target text node to update or create one from of a comment node\n * @param   {HTMLElement} node - any html element containing childNodes\n * @param   {number} childNodeIndex - index of the text node in the childNodes list\n * @returns {HTMLTextNode} the text node to update\n */\n\nconst getTextNode = (node, childNodeIndex) => {\n  const target = node.childNodes[childNodeIndex];\n\n  if (target.nodeType === Node.COMMENT_NODE) {\n    const textNode = document.createTextNode('');\n    node.replaceChild(textNode, target);\n    return textNode;\n  }\n\n  return target;\n};\n/**\n * This methods handles a simple text expression update\n * @param   {HTMLElement} node - target node\n * @param   {Object} data - expression object\n * @param   {*} value - new expression value\n * @returns {undefined}\n */\n\nfunction textExpression(node, data, value) {\n  node.data = normalizeStringValue(value);\n}\n\n/**\n * This methods handles the input fileds value updates\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {*} value - new expression value\n * @returns {undefined}\n */\n\nfunction valueExpression(node, expression, value) {\n  node.value = normalizeStringValue(value);\n}\n\nvar expressions = {\n  [ATTRIBUTE]: attributeExpression,\n  [EVENT]: eventExpression,\n  [TEXT]: textExpression,\n  [VALUE]: valueExpression\n};\n\nconst Expression = Object.seal({\n  // Static props\n  // node: null,\n  // value: null,\n  // API methods\n\n  /**\n   * Mount the expression evaluating its initial value\n   * @param   {*} scope - argument passed to the expression to evaluate its current values\n   * @returns {Expression} self\n   */\n  mount(scope) {\n    // hopefully a pure function\n    this.value = this.evaluate(scope); // IO() DOM updates\n\n    apply(this, this.value);\n    return this;\n  },\n\n  /**\n   * Update the expression if its value changed\n   * @param   {*} scope - argument passed to the expression to evaluate its current values\n   * @returns {Expression} self\n   */\n  update(scope) {\n    // pure function\n    const value = this.evaluate(scope);\n\n    if (this.value !== value) {\n      // IO() DOM updates\n      apply(this, value);\n      this.value = value;\n    }\n\n    return this;\n  },\n\n  /**\n   * Expression teardown method\n   * @returns {Expression} self\n   */\n  unmount() {\n    // unmount only the event handling expressions\n    if (this.type === EVENT) apply(this, null);\n    return this;\n  }\n\n});\n/**\n * IO() function to handle the DOM updates\n * @param {Expression} expression - expression object\n * @param {*} value - current expression value\n * @returns {undefined}\n */\n\nfunction apply(expression, value) {\n  return expressions[expression.type](expression.node, expression, value, expression.value);\n}\n\nfunction create$2(node, data) {\n  return Object.assign({}, Expression, data, {\n    node: data.type === TEXT ? getTextNode(node, data.childNodeIndex) : node\n  });\n}\n\n/**\n * Create a flat object having as keys a list of methods that if dispatched will propagate\n * on the whole collection\n * @param   {Array} collection - collection to iterate\n * @param   {Array<string>} methods - methods to execute on each item of the collection\n * @param   {*} context - context returned by the new methods created\n * @returns {Object} a new object to simplify the the nested methods dispatching\n */\nfunction flattenCollectionMethods(collection, methods, context) {\n  return methods.reduce((acc, method) => {\n    return Object.assign({}, acc, {\n      [method]: scope => {\n        return collection.map(item => item[method](scope)) && context;\n      }\n    });\n  }, {});\n}\n\nfunction create$3(node, _ref) {\n  let {\n    expressions\n  } = _ref;\n  return Object.assign({}, flattenCollectionMethods(expressions.map(expression => create$2(node, expression)), ['mount', 'update', 'unmount']));\n}\n\n// Riot.js constants that can be used accross more modules\nconst COMPONENTS_IMPLEMENTATION_MAP = new Map(),\n      DOM_COMPONENT_INSTANCE_PROPERTY = Symbol('riot-component'),\n      PLUGINS_SET = new Set(),\n      IS_DIRECTIVE = 'is',\n      VALUE_ATTRIBUTE = 'value',\n      MOUNT_METHOD_KEY = 'mount',\n      UPDATE_METHOD_KEY = 'update',\n      UNMOUNT_METHOD_KEY = 'unmount',\n      SHOULD_UPDATE_KEY = 'shouldUpdate',\n      ON_BEFORE_MOUNT_KEY = 'onBeforeMount',\n      ON_MOUNTED_KEY = 'onMounted',\n      ON_BEFORE_UPDATE_KEY = 'onBeforeUpdate',\n      ON_UPDATED_KEY = 'onUpdated',\n      ON_BEFORE_UNMOUNT_KEY = 'onBeforeUnmount',\n      ON_UNMOUNTED_KEY = 'onUnmounted',\n      PROPS_KEY = 'props',\n      STATE_KEY = 'state',\n      SLOTS_KEY = 'slots',\n      ROOT_KEY = 'root',\n      IS_PURE_SYMBOL = Symbol.for('pure'),\n      PARENT_KEY_SYMBOL = Symbol('parent'),\n      ATTRIBUTES_KEY_SYMBOL = Symbol('attributes'),\n      TEMPLATE_KEY_SYMBOL = Symbol('template');\n\nvar globals = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  COMPONENTS_IMPLEMENTATION_MAP: COMPONENTS_IMPLEMENTATION_MAP,\n  DOM_COMPONENT_INSTANCE_PROPERTY: DOM_COMPONENT_INSTANCE_PROPERTY,\n  PLUGINS_SET: PLUGINS_SET,\n  IS_DIRECTIVE: IS_DIRECTIVE,\n  VALUE_ATTRIBUTE: VALUE_ATTRIBUTE,\n  MOUNT_METHOD_KEY: MOUNT_METHOD_KEY,\n  UPDATE_METHOD_KEY: UPDATE_METHOD_KEY,\n  UNMOUNT_METHOD_KEY: UNMOUNT_METHOD_KEY,\n  SHOULD_UPDATE_KEY: SHOULD_UPDATE_KEY,\n  ON_BEFORE_MOUNT_KEY: ON_BEFORE_MOUNT_KEY,\n  ON_MOUNTED_KEY: ON_MOUNTED_KEY,\n  ON_BEFORE_UPDATE_KEY: ON_BEFORE_UPDATE_KEY,\n  ON_UPDATED_KEY: ON_UPDATED_KEY,\n  ON_BEFORE_UNMOUNT_KEY: ON_BEFORE_UNMOUNT_KEY,\n  ON_UNMOUNTED_KEY: ON_UNMOUNTED_KEY,\n  PROPS_KEY: PROPS_KEY,\n  STATE_KEY: STATE_KEY,\n  SLOTS_KEY: SLOTS_KEY,\n  ROOT_KEY: ROOT_KEY,\n  IS_PURE_SYMBOL: IS_PURE_SYMBOL,\n  PARENT_KEY_SYMBOL: PARENT_KEY_SYMBOL,\n  ATTRIBUTES_KEY_SYMBOL: ATTRIBUTES_KEY_SYMBOL,\n  TEMPLATE_KEY_SYMBOL: TEMPLATE_KEY_SYMBOL\n});\n\nfunction extendParentScope(attributes, scope, parentScope) {\n  if (!attributes || !attributes.length) return parentScope;\n  const expressions = attributes.map(attr => Object.assign({}, attr, {\n    value: attr.evaluate(scope)\n  }));\n  return Object.assign(Object.create(parentScope || null), evaluateAttributeExpressions(expressions));\n} // this function is only meant to fix an edge case\n// https://github.com/riot/riot/issues/2842\n\n\nconst getRealParent = (scope, parentScope) => scope[PARENT_KEY_SYMBOL] || parentScope;\n\nconst SlotBinding = Object.seal({\n  // dynamic binding properties\n  // node: null,\n  // name: null,\n  attributes: [],\n\n  // template: null,\n  getTemplateScope(scope, parentScope) {\n    return extendParentScope(this.attributes, scope, parentScope);\n  },\n\n  // API methods\n  mount(scope, parentScope) {\n    const templateData = scope.slots ? scope.slots.find((_ref) => {\n      let {\n        id\n      } = _ref;\n      return id === this.name;\n    }) : false;\n    const {\n      parentNode\n    } = this.node;\n    const realParent = getRealParent(scope, parentScope);\n    this.template = templateData && create$6(templateData.html, templateData.bindings).createDOM(parentNode);\n\n    if (this.template) {\n      this.template.mount(this.node, this.getTemplateScope(scope, realParent), realParent);\n      this.template.children = moveSlotInnerContent(this.node);\n    }\n\n    removeNode(this.node);\n    return this;\n  },\n\n  update(scope, parentScope) {\n    if (this.template) {\n      const realParent = getRealParent(scope, parentScope);\n      this.template.update(this.getTemplateScope(scope, realParent), realParent);\n    }\n\n    return this;\n  },\n\n  unmount(scope, parentScope, mustRemoveRoot) {\n    if (this.template) {\n      this.template.unmount(this.getTemplateScope(scope, parentScope), null, mustRemoveRoot);\n    }\n\n    return this;\n  }\n\n});\n/**\n * Move the inner content of the slots outside of them\n * @param   {HTMLNode} slot - slot node\n * @param   {HTMLElement} children - array to fill with the child nodes detected\n * @returns {HTMLElement[]} list of the node moved\n */\n\nfunction moveSlotInnerContent(slot, children) {\n  if (children === void 0) {\n    children = [];\n  }\n\n  const child = slot.firstChild;\n\n  if (child) {\n    slot.parentNode.insertBefore(child, slot);\n    return [child, ...moveSlotInnerContent(slot)];\n  }\n\n  return children;\n}\n/**\n * Create a single slot binding\n * @param   {HTMLElement} node - slot node\n * @param   {string} options.name - slot id\n * @returns {Object} Slot binding object\n */\n\n\nfunction createSlot(node, _ref2) {\n  let {\n    name,\n    attributes\n  } = _ref2;\n  return Object.assign({}, SlotBinding, {\n    attributes,\n    node,\n    name\n  });\n}\n\n/**\n * Create a new tag object if it was registered before, otherwise fallback to the simple\n * template chunk\n * @param   {Function} component - component factory function\n * @param   {Array<Object>} slots - array containing the slots markup\n * @param   {Array} attributes - dynamic attributes that will be received by the tag element\n * @returns {TagImplementation|TemplateChunk} a tag implementation or a template chunk as fallback\n */\n\nfunction getTag(component, slots, attributes) {\n  if (slots === void 0) {\n    slots = [];\n  }\n\n  if (attributes === void 0) {\n    attributes = [];\n  }\n\n  // if this tag was registered before we will return its implementation\n  if (component) {\n    return component({\n      slots,\n      attributes\n    });\n  } // otherwise we return a template chunk\n\n\n  return create$6(slotsToMarkup(slots), [...slotBindings(slots), {\n    // the attributes should be registered as binding\n    // if we fallback to a normal template chunk\n    expressions: attributes.map(attr => {\n      return Object.assign({\n        type: ATTRIBUTE\n      }, attr);\n    })\n  }]);\n}\n/**\n * Merge all the slots bindings into a single array\n * @param   {Array<Object>} slots - slots collection\n * @returns {Array<Bindings>} flatten bindings array\n */\n\n\nfunction slotBindings(slots) {\n  return slots.reduce((acc, _ref) => {\n    let {\n      bindings\n    } = _ref;\n    return acc.concat(bindings);\n  }, []);\n}\n/**\n * Merge all the slots together in a single markup string\n * @param   {Array<Object>} slots - slots collection\n * @returns {string} markup of all the slots in a single string\n */\n\n\nfunction slotsToMarkup(slots) {\n  return slots.reduce((acc, slot) => {\n    return acc + slot.html;\n  }, '');\n}\n\nconst TagBinding = Object.seal({\n  // dynamic binding properties\n  // node: null,\n  // evaluate: null,\n  // name: null,\n  // slots: null,\n  // tag: null,\n  // attributes: null,\n  // getComponent: null,\n  mount(scope) {\n    return this.update(scope);\n  },\n\n  update(scope, parentScope) {\n    const name = this.evaluate(scope); // simple update\n\n    if (name === this.name) {\n      this.tag.update(scope);\n    } else {\n      // unmount the old tag if it exists\n      this.unmount(scope, parentScope, true); // mount the new tag\n\n      this.name = name;\n      this.tag = getTag(this.getComponent(name), this.slots, this.attributes);\n      this.tag.mount(this.node, scope);\n    }\n\n    return this;\n  },\n\n  unmount(scope, parentScope, keepRootTag) {\n    if (this.tag) {\n      // keep the root tag\n      this.tag.unmount(keepRootTag);\n    }\n\n    return this;\n  }\n\n});\nfunction create$4(node, _ref2) {\n  let {\n    evaluate,\n    getComponent,\n    slots,\n    attributes\n  } = _ref2;\n  return Object.assign({}, TagBinding, {\n    node,\n    evaluate,\n    slots,\n    attributes,\n    getComponent\n  });\n}\n\nvar bindings = {\n  [IF]: create$1,\n  [SIMPLE]: create$3,\n  [EACH]: create,\n  [TAG]: create$4,\n  [SLOT]: createSlot\n};\n\n/**\n * Text expressions in a template tag will get childNodeIndex value normalized\n * depending on the position of the <template> tag offset\n * @param   {Expression[]} expressions - riot expressions array\n * @param   {number} textExpressionsOffset - offset of the <template> tag\n * @returns {Expression[]} expressions containing the text expressions normalized\n */\n\nfunction fixTextExpressionsOffset(expressions, textExpressionsOffset) {\n  return expressions.map(e => e.type === TEXT ? Object.assign({}, e, {\n    childNodeIndex: e.childNodeIndex + textExpressionsOffset\n  }) : e);\n}\n/**\n * Bind a new expression object to a DOM node\n * @param   {HTMLElement} root - DOM node where to bind the expression\n * @param   {Object} binding - binding data\n * @param   {number|null} templateTagOffset - if it's defined we need to fix the text expressions childNodeIndex offset\n * @returns {Binding} Binding object\n */\n\n\nfunction create$5(root, binding, templateTagOffset) {\n  const {\n    selector,\n    type,\n    redundantAttribute,\n    expressions\n  } = binding; // find the node to apply the bindings\n\n  const node = selector ? root.querySelector(selector) : root; // remove eventually additional attributes created only to select this node\n\n  if (redundantAttribute) node.removeAttribute(redundantAttribute);\n  const bindingExpressions = expressions || []; // init the binding\n\n  return (bindings[type] || bindings[SIMPLE])(node, Object.assign({}, binding, {\n    expressions: templateTagOffset && !selector ? fixTextExpressionsOffset(bindingExpressions, templateTagOffset) : bindingExpressions\n  }));\n}\n\nfunction createHTMLTree(html, root) {\n  const template = isTemplate(root) ? root : document.createElement('template');\n  template.innerHTML = html;\n  return template.content;\n} // for svg nodes we need a bit more work\n\n\nfunction createSVGTree(html, container) {\n  // create the SVGNode\n  const svgNode = container.ownerDocument.importNode(new window.DOMParser().parseFromString(`<svg xmlns=\"http://www.w3.org/2000/svg\">${html}</svg>`, 'application/xml').documentElement, true);\n  return svgNode;\n}\n/**\n * Create the DOM that will be injected\n * @param {Object} root - DOM node to find out the context where the fragment will be created\n * @param   {string} html - DOM to create as string\n * @returns {HTMLDocumentFragment|HTMLElement} a new html fragment\n */\n\n\nfunction createDOMTree(root, html) {\n  if (isSvg(root)) return createSVGTree(html, root);\n  return createHTMLTree(html, root);\n}\n\n/**\n * Inject the DOM tree into a target node\n * @param   {HTMLElement} el - target element\n * @param   {HTMLFragment|SVGElement} dom - dom tree to inject\n * @returns {undefined}\n */\n\nfunction injectDOM(el, dom) {\n  switch (true) {\n    case isSvg(el):\n      moveChildren(dom, el);\n      break;\n\n    case isTemplate(el):\n      el.parentNode.replaceChild(dom, el);\n      break;\n\n    default:\n      el.appendChild(dom);\n  }\n}\n\n/**\n * Create the Template DOM skeleton\n * @param   {HTMLElement} el - root node where the DOM will be injected\n * @param   {string} html - markup that will be injected into the root node\n * @returns {HTMLFragment} fragment that will be injected into the root node\n */\n\nfunction createTemplateDOM(el, html) {\n  return html && (typeof html === 'string' ? createDOMTree(el, html) : html);\n}\n/**\n * Template Chunk model\n * @type {Object}\n */\n\n\nconst TemplateChunk = Object.freeze({\n  // Static props\n  // bindings: null,\n  // bindingsData: null,\n  // html: null,\n  // isTemplateTag: false,\n  // fragment: null,\n  // children: null,\n  // dom: null,\n  // el: null,\n\n  /**\n   * Create the template DOM structure that will be cloned on each mount\n   * @param   {HTMLElement} el - the root node\n   * @returns {TemplateChunk} self\n   */\n  createDOM(el) {\n    // make sure that the DOM gets created before cloning the template\n    this.dom = this.dom || createTemplateDOM(el, this.html);\n    return this;\n  },\n\n  // API methods\n\n  /**\n   * Attach the template to a DOM node\n   * @param   {HTMLElement} el - target DOM node\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @param   {Object} meta - meta properties needed to handle the <template> tags in loops\n   * @returns {TemplateChunk} self\n   */\n  mount(el, scope, parentScope, meta) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    if (!el) throw new Error('Please provide DOM node to mount properly your template');\n    if (this.el) this.unmount(scope); // <template> tags require a bit more work\n    // the template fragment might be already created via meta outside of this call\n\n    const {\n      fragment,\n      children,\n      avoidDOMInjection\n    } = meta; // <template> bindings of course can not have a root element\n    // so we check the parent node to set the query selector bindings\n\n    const {\n      parentNode\n    } = children ? children[0] : el;\n    const isTemplateTag = isTemplate(el);\n    const templateTagOffset = isTemplateTag ? Math.max(Array.from(parentNode.childNodes).indexOf(el), 0) : null;\n    this.isTemplateTag = isTemplateTag; // create the DOM if it wasn't created before\n\n    this.createDOM(el);\n\n    if (this.dom) {\n      // create the new template dom fragment if it want already passed in via meta\n      this.fragment = fragment || this.dom.cloneNode(true);\n    } // store root node\n    // notice that for template tags the root note will be the parent tag\n\n\n    this.el = this.isTemplateTag ? parentNode : el; // create the children array only for the <template> fragments\n\n    this.children = this.isTemplateTag ? children || Array.from(this.fragment.childNodes) : null; // inject the DOM into the el only if a fragment is available\n\n    if (!avoidDOMInjection && this.fragment) injectDOM(el, this.fragment); // create the bindings\n\n    this.bindings = this.bindingsData.map(binding => create$5(this.el, binding, templateTagOffset));\n    this.bindings.forEach(b => b.mount(scope, parentScope));\n    return this;\n  },\n\n  /**\n   * Update the template with fresh data\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @returns {TemplateChunk} self\n   */\n  update(scope, parentScope) {\n    this.bindings.forEach(b => b.update(scope, parentScope));\n    return this;\n  },\n\n  /**\n   * Remove the template from the node where it was initially mounted\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @param   {boolean|null} mustRemoveRoot - if true remove the root element,\n   * if false or undefined clean the root tag content, if null don't touch the DOM\n   * @returns {TemplateChunk} self\n   */\n  unmount(scope, parentScope, mustRemoveRoot) {\n    if (this.el) {\n      this.bindings.forEach(b => b.unmount(scope, parentScope, mustRemoveRoot));\n\n      switch (true) {\n        // <template> tags should be treated a bit differently\n        // we need to clear their children only if it's explicitly required by the caller\n        // via mustRemoveRoot !== null\n        case this.children && mustRemoveRoot !== null:\n          clearChildren(this.children);\n          break;\n        // remove the root node only if the mustRemoveRoot === true\n\n        case mustRemoveRoot === true:\n          removeNode(this.el);\n          break;\n        // otherwise we clean the node children\n\n        case mustRemoveRoot !== null:\n          cleanNode(this.el);\n          break;\n      }\n\n      this.el = null;\n    }\n\n    return this;\n  },\n\n  /**\n   * Clone the template chunk\n   * @returns {TemplateChunk} a clone of this object resetting the this.el property\n   */\n  clone() {\n    return Object.assign({}, this, {\n      el: null\n    });\n  }\n\n});\n/**\n * Create a template chunk wiring also the bindings\n * @param   {string|HTMLElement} html - template string\n * @param   {Array} bindings - bindings collection\n * @returns {TemplateChunk} a new TemplateChunk copy\n */\n\nfunction create$6(html, bindings) {\n  if (bindings === void 0) {\n    bindings = [];\n  }\n\n  return Object.assign({}, TemplateChunk, {\n    html,\n    bindingsData: bindings\n  });\n}\n\n/**\n * Method used to bind expressions to a DOM node\n * @param   {string|HTMLElement} html - your static template html structure\n * @param   {Array} bindings - list of the expressions to bind to update the markup\n * @returns {TemplateChunk} a new TemplateChunk object having the `update`,`mount`, `unmount` and `clone` methods\n *\n * @example\n *\n * riotDOMBindings\n *  .template(\n *   `<div expr0><!----></div><div><p expr1><!----><section expr2></section></p>`,\n *   [\n *     {\n *       selector: '[expr0]',\n *       redundantAttribute: 'expr0',\n *       expressions: [\n *         {\n *           type: expressionTypes.TEXT,\n *           childNodeIndex: 0,\n *           evaluate(scope) {\n *             return scope.time;\n *           },\n *         },\n *       ],\n *     },\n *     {\n *       selector: '[expr1]',\n *       redundantAttribute: 'expr1',\n *       expressions: [\n *         {\n *           type: expressionTypes.TEXT,\n *           childNodeIndex: 0,\n *           evaluate(scope) {\n *             return scope.name;\n *           },\n *         },\n *         {\n *           type: 'attribute',\n *           name: 'style',\n *           evaluate(scope) {\n *             return scope.style;\n *           },\n *         },\n *       ],\n *     },\n *     {\n *       selector: '[expr2]',\n *       redundantAttribute: 'expr2',\n *       type: bindingTypes.IF,\n *       evaluate(scope) {\n *         return scope.isVisible;\n *       },\n *       template: riotDOMBindings.template('hello there'),\n *     },\n *   ]\n * )\n */\n\nvar DOMBindings = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  template: create$6,\n  createBinding: create$5,\n  createExpression: create$2,\n  bindingTypes: bindingTypes,\n  expressionTypes: expressionTypes\n});\n\nfunction noop() {\n  return this;\n}\n/**\n * Autobind the methods of a source object to itself\n * @param   {Object} source - probably a riot tag instance\n * @param   {Array<string>} methods - list of the methods to autobind\n * @returns {Object} the original object received\n */\n\nfunction autobindMethods(source, methods) {\n  methods.forEach(method => {\n    source[method] = source[method].bind(source);\n  });\n  return source;\n}\n/**\n * Call the first argument received only if it's a function otherwise return it as it is\n * @param   {*} source - anything\n * @returns {*} anything\n */\n\nfunction callOrAssign(source) {\n  return isFunction(source) ? source.prototype && source.prototype.constructor ? new source() : source() : source;\n}\n\n/**\n * Helper function to set an immutable property\n * @param   {Object} source - object where the new property will be set\n * @param   {string} key - object key where the new property will be stored\n * @param   {*} value - value of the new property\n * @param   {Object} options - set the propery overriding the default options\n * @returns {Object} - the original object modified\n */\nfunction defineProperty(source, key, value, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  /* eslint-disable fp/no-mutating-methods */\n  Object.defineProperty(source, key, Object.assign({\n    value,\n    enumerable: false,\n    writable: false,\n    configurable: true\n  }, options));\n  /* eslint-enable fp/no-mutating-methods */\n\n  return source;\n}\n/**\n * Define multiple properties on a target object\n * @param   {Object} source - object where the new properties will be set\n * @param   {Object} properties - object containing as key pair the key + value properties\n * @param   {Object} options - set the propery overriding the default options\n * @returns {Object} the original object modified\n */\n\nfunction defineProperties(source, properties, options) {\n  Object.entries(properties).forEach((_ref) => {\n    let [key, value] = _ref;\n    defineProperty(source, key, value, options);\n  });\n  return source;\n}\n/**\n * Define default properties if they don't exist on the source object\n * @param   {Object} source - object that will receive the default properties\n * @param   {Object} defaults - object containing additional optional keys\n * @returns {Object} the original object received enhanced\n */\n\nfunction defineDefaults(source, defaults) {\n  Object.entries(defaults).forEach((_ref2) => {\n    let [key, value] = _ref2;\n    if (!source[key]) source[key] = value;\n  });\n  return source;\n}\n\n/**\n * Converts any DOM node/s to a loopable array\n * @param   { HTMLElement|NodeList } els - single html element or a node list\n * @returns { Array } always a loopable object\n */\nfunction domToArray(els) {\n  // can this object be already looped?\n  if (!Array.isArray(els)) {\n    // is it a node list?\n    if (/^\\[object (HTMLCollection|NodeList|Object)\\]$/.test(Object.prototype.toString.call(els)) && typeof els.length === 'number') return Array.from(els);else // if it's a single node\n      // it will be returned as \"array\" with one single entry\n      return [els];\n  } // this object could be looped out of the box\n\n\n  return els;\n}\n\n/**\n * Simple helper to find DOM nodes returning them as array like loopable object\n * @param   { string|DOMNodeList } selector - either the query or the DOM nodes to arraify\n * @param   { HTMLElement }        ctx      - context defining where the query will search for the DOM nodes\n * @returns { Array } DOM nodes found as array\n */\n\nfunction $(selector, ctx) {\n  return domToArray(typeof selector === 'string' ? (ctx || document).querySelectorAll(selector) : selector);\n}\n\n/**\n * Normalize the return values, in case of a single value we avoid to return an array\n * @param   { Array } values - list of values we want to return\n * @returns { Array|string|boolean } either the whole list of values or the single one found\n * @private\n */\n\nconst normalize = values => values.length === 1 ? values[0] : values;\n/**\n * Parse all the nodes received to get/remove/check their attributes\n * @param   { HTMLElement|NodeList|Array } els    - DOM node/s to parse\n * @param   { string|Array }               name   - name or list of attributes\n * @param   { string }                     method - method that will be used to parse the attributes\n * @returns { Array|string } result of the parsing in a list or a single value\n * @private\n */\n\n\nfunction parseNodes(els, name, method) {\n  const names = typeof name === 'string' ? [name] : name;\n  return normalize(domToArray(els).map(el => {\n    return normalize(names.map(n => el[method](n)));\n  }));\n}\n/**\n * Set any attribute on a single or a list of DOM nodes\n * @param   { HTMLElement|NodeList|Array } els   - DOM node/s to parse\n * @param   { string|Object }              name  - either the name of the attribute to set\n *                                                 or a list of properties as object key - value\n * @param   { string }                     value - the new value of the attribute (optional)\n * @returns { HTMLElement|NodeList|Array } the original array of elements passed to this function\n *\n * @example\n *\n * import { set } from 'bianco.attr'\n *\n * const img = document.createElement('img')\n *\n * set(img, 'width', 100)\n *\n * // or also\n * set(img, {\n *   width: 300,\n *   height: 300\n * })\n *\n */\n\n\nfunction set(els, name, value) {\n  const attrs = typeof name === 'object' ? name : {\n    [name]: value\n  };\n  const props = Object.keys(attrs);\n  domToArray(els).forEach(el => {\n    props.forEach(prop => el.setAttribute(prop, attrs[prop]));\n  });\n  return els;\n}\n/**\n * Get any attribute from a single or a list of DOM nodes\n * @param   { HTMLElement|NodeList|Array } els   - DOM node/s to parse\n * @param   { string|Array }               name  - name or list of attributes to get\n * @returns { Array|string } list of the attributes found\n *\n * @example\n *\n * import { get } from 'bianco.attr'\n *\n * const img = document.createElement('img')\n *\n * get(img, 'width') // => '200'\n *\n * // or also\n * get(img, ['width', 'height']) // => ['200', '300']\n *\n * // or also\n * get([img1, img2], ['width', 'height']) // => [['200', '300'], ['500', '200']]\n */\n\nfunction get(els, name) {\n  return parseNodes(els, name, 'getAttribute');\n}\n\nconst CSS_BY_NAME = new Map();\nconst STYLE_NODE_SELECTOR = 'style[riot]'; // memoized curried function\n\nconst getStyleNode = (style => {\n  return () => {\n    // lazy evaluation:\n    // if this function was already called before\n    // we return its cached result\n    if (style) return style; // create a new style element or use an existing one\n    // and cache it internally\n\n    style = $(STYLE_NODE_SELECTOR)[0] || document.createElement('style');\n    set(style, 'type', 'text/css');\n    /* istanbul ignore next */\n\n    if (!style.parentNode) document.head.appendChild(style);\n    return style;\n  };\n})();\n/**\n * Object that will be used to inject and manage the css of every tag instance\n */\n\n\nvar cssManager = {\n  CSS_BY_NAME,\n\n  /**\n   * Save a tag style to be later injected into DOM\n   * @param { string } name - if it's passed we will map the css to a tagname\n   * @param { string } css - css string\n   * @returns {Object} self\n   */\n  add(name, css) {\n    if (!CSS_BY_NAME.has(name)) {\n      CSS_BY_NAME.set(name, css);\n      this.inject();\n    }\n\n    return this;\n  },\n\n  /**\n   * Inject all previously saved tag styles into DOM\n   * innerHTML seems slow: http://jsperf.com/riot-insert-style\n   * @returns {Object} self\n   */\n  inject() {\n    getStyleNode().innerHTML = [...CSS_BY_NAME.values()].join('\\n');\n    return this;\n  },\n\n  /**\n   * Remove a tag style from the DOM\n   * @param {string} name a registered tagname\n   * @returns {Object} self\n   */\n  remove(name) {\n    if (CSS_BY_NAME.has(name)) {\n      CSS_BY_NAME.delete(name);\n      this.inject();\n    }\n\n    return this;\n  }\n\n};\n\n/**\n * Function to curry any javascript method\n * @param   {Function}  fn - the target function we want to curry\n * @param   {...[args]} acc - initial arguments\n * @returns {Function|*} it will return a function until the target function\n *                       will receive all of its arguments\n */\nfunction curry(fn) {\n  for (var _len = arguments.length, acc = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    acc[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    args = [...acc, ...args];\n    return args.length < fn.length ? curry(fn, ...args) : fn(...args);\n  };\n}\n\n/**\n * Get the tag name of any DOM node\n * @param   {HTMLElement} element - DOM node we want to inspect\n * @returns {string} name to identify this dom node in riot\n */\n\nfunction getName(element) {\n  return get(element, IS_DIRECTIVE) || element.tagName.toLowerCase();\n}\n\nconst COMPONENT_CORE_HELPERS = Object.freeze({\n  // component helpers\n  $(selector) {\n    return $(selector, this.root)[0];\n  },\n\n  $$(selector) {\n    return $(selector, this.root);\n  }\n\n});\nconst PURE_COMPONENT_API = Object.freeze({\n  [MOUNT_METHOD_KEY]: noop,\n  [UPDATE_METHOD_KEY]: noop,\n  [UNMOUNT_METHOD_KEY]: noop\n});\nconst COMPONENT_LIFECYCLE_METHODS = Object.freeze({\n  [SHOULD_UPDATE_KEY]: noop,\n  [ON_BEFORE_MOUNT_KEY]: noop,\n  [ON_MOUNTED_KEY]: noop,\n  [ON_BEFORE_UPDATE_KEY]: noop,\n  [ON_UPDATED_KEY]: noop,\n  [ON_BEFORE_UNMOUNT_KEY]: noop,\n  [ON_UNMOUNTED_KEY]: noop\n});\nconst MOCKED_TEMPLATE_INTERFACE = Object.assign({}, PURE_COMPONENT_API, {\n  clone: noop,\n  createDOM: noop\n});\n/**\n * Evaluate the component properties either from its real attributes or from its initial user properties\n * @param   {HTMLElement} element - component root\n * @param   {Object}  initialProps - initial props\n * @returns {Object} component props key value pairs\n */\n\nfunction evaluateInitialProps(element, initialProps) {\n  if (initialProps === void 0) {\n    initialProps = {};\n  }\n\n  return Object.assign({}, DOMattributesToObject(element), callOrAssign(initialProps));\n}\n/**\n * Bind a DOM node to its component object\n * @param   {HTMLElement} node - html node mounted\n * @param   {Object} component - Riot.js component object\n * @returns {Object} the component object received as second argument\n */\n\n\nconst bindDOMNodeToComponentObject = (node, component) => node[DOM_COMPONENT_INSTANCE_PROPERTY] = component;\n/**\n * Wrap the Riot.js core API methods using a mapping function\n * @param   {Function} mapFunction - lifting function\n * @returns {Object} an object having the { mount, update, unmount } functions\n */\n\n\nfunction createCoreAPIMethods(mapFunction) {\n  return [MOUNT_METHOD_KEY, UPDATE_METHOD_KEY, UNMOUNT_METHOD_KEY].reduce((acc, method) => {\n    acc[method] = mapFunction(method);\n    return acc;\n  }, {});\n}\n/**\n * Factory function to create the component templates only once\n * @param   {Function} template - component template creation function\n * @param   {Object} components - object containing the nested components\n * @returns {TemplateChunk} template chunk object\n */\n\n\nfunction componentTemplateFactory(template, components) {\n  return template(create$6, expressionTypes, bindingTypes, name => {\n    return components[name] || COMPONENTS_IMPLEMENTATION_MAP.get(name);\n  });\n}\n/**\n * Create a pure component\n * @param   {Function} pureFactoryFunction - pure component factory function\n * @param   {Array} options.slots - component slots\n * @param   {Array} options.attributes - component attributes\n * @param   {Array} options.template - template factory function\n * @param   {Array} options.template - template factory function\n * @param   {any} options.props - initial component properties\n * @returns {Object} pure component object\n */\n\n\nfunction createPureComponent(pureFactoryFunction, _ref) {\n  let {\n    slots,\n    attributes,\n    props,\n    css,\n    template\n  } = _ref;\n  if (template) panic('Pure components can not have html');\n  if (css) panic('Pure components do not have css');\n  const component = defineDefaults(pureFactoryFunction({\n    slots,\n    attributes,\n    props\n  }), PURE_COMPONENT_API);\n  return createCoreAPIMethods(method => function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    // intercept the mount calls to bind the DOM node to the pure object created\n    // see also https://github.com/riot/riot/issues/2806\n    if (method === MOUNT_METHOD_KEY) {\n      const [el] = args;\n      bindDOMNodeToComponentObject(el, component);\n    }\n\n    component[method](...args);\n    return component;\n  });\n}\n/**\n * Create the component interface needed for the @riotjs/dom-bindings tag bindings\n * @param   {string} options.css - component css\n * @param   {Function} options.template - functon that will return the dom-bindings template function\n * @param   {Object} options.exports - component interface\n * @param   {string} options.name - component name\n * @returns {Object} component like interface\n */\n\n\nfunction createComponent(_ref2) {\n  let {\n    css,\n    template,\n    exports,\n    name\n  } = _ref2;\n  const templateFn = template ? componentTemplateFactory(template, exports ? createSubcomponents(exports.components) : {}) : MOCKED_TEMPLATE_INTERFACE;\n  return (_ref3) => {\n    let {\n      slots,\n      attributes,\n      props\n    } = _ref3;\n    // pure components rendering will be managed by the end user\n    if (exports && exports[IS_PURE_SYMBOL]) return createPureComponent(exports, {\n      slots,\n      attributes,\n      props,\n      css,\n      template\n    });\n    const componentAPI = callOrAssign(exports) || {};\n    const component = defineComponent({\n      css,\n      template: templateFn,\n      componentAPI,\n      name\n    })({\n      slots,\n      attributes,\n      props\n    }); // notice that for the components create via tag binding\n    // we need to invert the mount (state/parentScope) arguments\n    // the template bindings will only forward the parentScope updates\n    // and never deal with the component state\n\n    return {\n      mount(element, parentScope, state) {\n        return component.mount(element, state, parentScope);\n      },\n\n      update(parentScope, state) {\n        return component.update(state, parentScope);\n      },\n\n      unmount(preserveRoot) {\n        return component.unmount(preserveRoot);\n      }\n\n    };\n  };\n}\n/**\n * Component definition function\n * @param   {Object} implementation - the componen implementation will be generated via compiler\n * @param   {Object} component - the component initial properties\n * @returns {Object} a new component implementation object\n */\n\nfunction defineComponent(_ref4) {\n  let {\n    css,\n    template,\n    componentAPI,\n    name\n  } = _ref4;\n  // add the component css into the DOM\n  if (css && name) cssManager.add(name, css);\n  return curry(enhanceComponentAPI)(defineProperties( // set the component defaults without overriding the original component API\n  defineDefaults(componentAPI, Object.assign({}, COMPONENT_LIFECYCLE_METHODS, {\n    [STATE_KEY]: {}\n  })), Object.assign({\n    // defined during the component creation\n    [SLOTS_KEY]: null,\n    [ROOT_KEY]: null\n  }, COMPONENT_CORE_HELPERS, {\n    name,\n    css,\n    template\n  })));\n}\n/**\n * Create the bindings to update the component attributes\n * @param   {HTMLElement} node - node where we will bind the expressions\n * @param   {Array} attributes - list of attribute bindings\n * @returns {TemplateChunk} - template bindings object\n */\n\nfunction createAttributeBindings(node, attributes) {\n  if (attributes === void 0) {\n    attributes = [];\n  }\n\n  const expressions = attributes.map(a => create$2(node, a));\n  const binding = {};\n  return Object.assign(binding, Object.assign({\n    expressions\n  }, createCoreAPIMethods(method => scope => {\n    expressions.forEach(e => e[method](scope));\n    return binding;\n  })));\n}\n/**\n * Create the subcomponents that can be included inside a tag in runtime\n * @param   {Object} components - components imported in runtime\n * @returns {Object} all the components transformed into Riot.Component factory functions\n */\n\n\nfunction createSubcomponents(components) {\n  if (components === void 0) {\n    components = {};\n  }\n\n  return Object.entries(callOrAssign(components)).reduce((acc, _ref5) => {\n    let [key, value] = _ref5;\n    acc[camelToDashCase(key)] = createComponent(value);\n    return acc;\n  }, {});\n}\n/**\n * Run the component instance through all the plugins set by the user\n * @param   {Object} component - component instance\n * @returns {Object} the component enhanced by the plugins\n */\n\n\nfunction runPlugins(component) {\n  return [...PLUGINS_SET].reduce((c, fn) => fn(c) || c, component);\n}\n/**\n * Compute the component current state merging it with its previous state\n * @param   {Object} oldState - previous state object\n * @param   {Object} newState - new state givent to the `update` call\n * @returns {Object} new object state\n */\n\n\nfunction computeState(oldState, newState) {\n  return Object.assign({}, oldState, callOrAssign(newState));\n}\n/**\n * Add eventually the \"is\" attribute to link this DOM node to its css\n * @param {HTMLElement} element - target root node\n * @param {string} name - name of the component mounted\n * @returns {undefined} it's a void function\n */\n\n\nfunction addCssHook(element, name) {\n  if (getName(element) !== name) {\n    set(element, IS_DIRECTIVE, name);\n  }\n}\n/**\n * Component creation factory function that will enhance the user provided API\n * @param   {Object} component - a component implementation previously defined\n * @param   {Array} options.slots - component slots generated via riot compiler\n * @param   {Array} options.attributes - attribute expressions generated via riot compiler\n * @returns {Riot.Component} a riot component instance\n */\n\n\nfunction enhanceComponentAPI(component, _ref6) {\n  let {\n    slots,\n    attributes,\n    props\n  } = _ref6;\n  return autobindMethods(runPlugins(defineProperties(Object.create(component), {\n    mount(element, state, parentScope) {\n      if (state === void 0) {\n        state = {};\n      }\n\n      this[ATTRIBUTES_KEY_SYMBOL] = createAttributeBindings(element, attributes).mount(parentScope);\n      defineProperty(this, PROPS_KEY, Object.freeze(Object.assign({}, evaluateInitialProps(element, props), evaluateAttributeExpressions(this[ATTRIBUTES_KEY_SYMBOL].expressions))));\n      this[STATE_KEY] = computeState(this[STATE_KEY], state);\n      this[TEMPLATE_KEY_SYMBOL] = this.template.createDOM(element).clone(); // link this object to the DOM node\n\n      bindDOMNodeToComponentObject(element, this); // add eventually the 'is' attribute\n\n      component.name && addCssHook(element, component.name); // define the root element\n\n      defineProperty(this, ROOT_KEY, element); // define the slots array\n\n      defineProperty(this, SLOTS_KEY, slots); // before mount lifecycle event\n\n      this[ON_BEFORE_MOUNT_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      this[PARENT_KEY_SYMBOL] = parentScope; // mount the template\n\n      this[TEMPLATE_KEY_SYMBOL].mount(element, this, parentScope);\n      this[ON_MOUNTED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      return this;\n    },\n\n    update(state, parentScope) {\n      if (state === void 0) {\n        state = {};\n      }\n\n      if (parentScope) {\n        this[PARENT_KEY_SYMBOL] = parentScope;\n        this[ATTRIBUTES_KEY_SYMBOL].update(parentScope);\n      }\n\n      const newProps = evaluateAttributeExpressions(this[ATTRIBUTES_KEY_SYMBOL].expressions);\n      if (this[SHOULD_UPDATE_KEY](newProps, this[PROPS_KEY]) === false) return;\n      defineProperty(this, PROPS_KEY, Object.freeze(Object.assign({}, this[PROPS_KEY], newProps)));\n      this[STATE_KEY] = computeState(this[STATE_KEY], state);\n      this[ON_BEFORE_UPDATE_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      this[TEMPLATE_KEY_SYMBOL].update(this, this[PARENT_KEY_SYMBOL]);\n      this[ON_UPDATED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      return this;\n    },\n\n    unmount(preserveRoot) {\n      this[ON_BEFORE_UNMOUNT_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      this[ATTRIBUTES_KEY_SYMBOL].unmount(); // if the preserveRoot is null the template html will be left untouched\n      // in that case the DOM cleanup will happen differently from a parent node\n\n      this[TEMPLATE_KEY_SYMBOL].unmount(this, this[PARENT_KEY_SYMBOL], preserveRoot === null ? null : !preserveRoot);\n      this[ON_UNMOUNTED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      return this;\n    }\n\n  })), Object.keys(component).filter(prop => isFunction(component[prop])));\n}\n/**\n * Component initialization function starting from a DOM node\n * @param   {HTMLElement} element - element to upgrade\n * @param   {Object} initialProps - initial component properties\n * @param   {string} componentName - component id\n * @returns {Object} a new component instance bound to a DOM node\n */\n\nfunction mountComponent(element, initialProps, componentName) {\n  const name = componentName || getName(element);\n  if (!COMPONENTS_IMPLEMENTATION_MAP.has(name)) panic(`The component named \"${name}\" was never registered`);\n  const component = COMPONENTS_IMPLEMENTATION_MAP.get(name)({\n    props: initialProps\n  });\n  return component.mount(element);\n}\n\n/**\n * Similar to compose but performs from left-to-right function composition.<br/>\n * {@link https://30secondsofcode.org/function#composeright see also}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n/**\n * Performs right-to-left function composition.<br/>\n * Use Array.prototype.reduce() to perform right-to-left function composition.<br/>\n * The last (rightmost) function can accept one or more arguments; the remaining functions must be unary.<br/>\n * {@link https://30secondsofcode.org/function#compose original source code}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n\nfunction compose() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return fns.reduce((f, g) => function () {\n    return f(g(...arguments));\n  });\n}\n\nconst {\n  DOM_COMPONENT_INSTANCE_PROPERTY: DOM_COMPONENT_INSTANCE_PROPERTY$1,\n  COMPONENTS_IMPLEMENTATION_MAP: COMPONENTS_IMPLEMENTATION_MAP$1,\n  PLUGINS_SET: PLUGINS_SET$1\n} = globals;\n/**\n * Riot public api\n */\n\n/**\n * Register a custom tag by name\n * @param   {string} name - component name\n * @param   {Object} implementation - tag implementation\n * @returns {Map} map containing all the components implementations\n */\n\nfunction register(name, _ref) {\n  let {\n    css,\n    template,\n    exports\n  } = _ref;\n  if (COMPONENTS_IMPLEMENTATION_MAP$1.has(name)) panic(`The component \"${name}\" was already registered`);\n  COMPONENTS_IMPLEMENTATION_MAP$1.set(name, createComponent({\n    name,\n    css,\n    template,\n    exports\n  }));\n  return COMPONENTS_IMPLEMENTATION_MAP$1;\n}\n/**\n * Unregister a riot web component\n * @param   {string} name - component name\n * @returns {Map} map containing all the components implementations\n */\n\nfunction unregister(name) {\n  if (!COMPONENTS_IMPLEMENTATION_MAP$1.has(name)) panic(`The component \"${name}\" was never registered`);\n  COMPONENTS_IMPLEMENTATION_MAP$1.delete(name);\n  cssManager.remove(name);\n  return COMPONENTS_IMPLEMENTATION_MAP$1;\n}\n/**\n * Mounting function that will work only for the components that were globally registered\n * @param   {string|HTMLElement} selector - query for the selection or a DOM element\n * @param   {Object} initialProps - the initial component properties\n * @param   {string} name - optional component name\n * @returns {Array} list of nodes upgraded\n */\n\nfunction mount(selector, initialProps, name) {\n  return $(selector).map(element => mountComponent(element, initialProps, name));\n}\n/**\n * Sweet unmounting helper function for the DOM node mounted manually by the user\n * @param   {string|HTMLElement} selector - query for the selection or a DOM element\n * @param   {boolean|null} keepRootElement - if true keep the root element\n * @returns {Array} list of nodes unmounted\n */\n\nfunction unmount(selector, keepRootElement) {\n  return $(selector).map(element => {\n    if (element[DOM_COMPONENT_INSTANCE_PROPERTY$1]) {\n      element[DOM_COMPONENT_INSTANCE_PROPERTY$1].unmount(keepRootElement);\n    }\n\n    return element;\n  });\n}\n/**\n * Define a riot plugin\n * @param   {Function} plugin - function that will receive all the components created\n * @returns {Set} the set containing all the plugins installed\n */\n\nfunction install(plugin) {\n  if (!isFunction(plugin)) panic('Plugins must be of type function');\n  if (PLUGINS_SET$1.has(plugin)) panic('This plugin was already installed');\n  PLUGINS_SET$1.add(plugin);\n  return PLUGINS_SET$1;\n}\n/**\n * Uninstall a riot plugin\n * @param   {Function} plugin - plugin previously installed\n * @returns {Set} the set containing all the plugins installed\n */\n\nfunction uninstall(plugin) {\n  if (!PLUGINS_SET$1.has(plugin)) panic('This plugin was never installed');\n  PLUGINS_SET$1.delete(plugin);\n  return PLUGINS_SET$1;\n}\n/**\n * Helper method to create component without relying on the registered ones\n * @param   {Object} implementation - component implementation\n * @returns {Function} function that will allow you to mount a riot component on a DOM node\n */\n\nfunction component(implementation) {\n  return function (el, props, _temp) {\n    let {\n      slots,\n      attributes,\n      parentScope\n    } = _temp === void 0 ? {} : _temp;\n    return compose(c => c.mount(el, parentScope), c => c({\n      props,\n      slots,\n      attributes\n    }), createComponent)(implementation);\n  };\n}\n/**\n * Lift a riot component Interface into a pure riot object\n * @param   {Function} func - RiotPureComponent factory function\n * @returns {Function} the lifted original function received as argument\n */\n\nfunction pure(func) {\n  if (!isFunction(func)) panic('riot.pure accepts only arguments of type \"function\"');\n  func[IS_PURE_SYMBOL] = true;\n  return func;\n}\n/** @type {string} current riot version */\n\nconst version = 'v4.14.0'; // expose some internal stuff that might be used from external tools\n\nconst __ = {\n  cssManager,\n  DOMBindings,\n  createComponent,\n  defineComponent,\n  globals\n};\n\nexport { __, component, install, mount, pure, register, uninstall, unmount, unregister, version };\n","export default function toInteger(dirtyNumber) {\n  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {\n    return NaN;\n  }\n\n  var number = Number(dirtyNumber);\n\n  if (isNaN(number)) {\n    return number;\n  }\n\n  return number < 0 ? Math.ceil(number) : Math.floor(number);\n}","export default function requiredArgs(required, args) {\n  if (args.length < required) {\n    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');\n  }\n}","import requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @param {Date|Number} argument - the value to convert\n * @returns {Date} the parsed date in the local time zone\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\n\nexport default function toDate(argument) {\n  requiredArgs(1, arguments);\n  var argStr = Object.prototype.toString.call(argument); // Clone the date\n\n  if (argument instanceof Date || typeof argument === 'object' && argStr === '[object Date]') {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime());\n  } else if (typeof argument === 'number' || argStr === '[object Number]') {\n    return new Date(argument);\n  } else {\n    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn(\"Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule\"); // eslint-disable-next-line no-console\n\n      console.warn(new Error().stack);\n    }\n\n    return new Date(NaN);\n  }\n}","import toInteger from '../_lib/toInteger/index.js';\nimport toDate from '../toDate/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name addDays\n * @category Day Helpers\n * @summary Add the specified number of days to the given date.\n *\n * @description\n * Add the specified number of days to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of days to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the days added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 10 days to 1 September 2014:\n * var result = addDays(new Date(2014, 8, 1), 10)\n * //=> Thu Sep 11 2014 00:00:00\n */\n\nexport default function addDays(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var amount = toInteger(dirtyAmount);\n\n  if (isNaN(amount)) {\n    return new Date(NaN);\n  }\n\n  if (!amount) {\n    // If 0 days, no-op to avoid changing times in the hour before end of DST\n    return date;\n  }\n\n  date.setDate(date.getDate() + amount);\n  return date;\n}","import toInteger from '../_lib/toInteger/index.js';\nimport toDate from '../toDate/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name addMilliseconds\n * @category Millisecond Helpers\n * @summary Add the specified number of milliseconds to the given date.\n *\n * @description\n * Add the specified number of milliseconds to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of milliseconds to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the milliseconds added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 750 milliseconds to 10 July 2014 12:45:30.000:\n * var result = addMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)\n * //=> Thu Jul 10 2014 12:45:30.750\n */\n\nexport default function addMilliseconds(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var timestamp = toDate(dirtyDate).getTime();\n  var amount = toInteger(dirtyAmount);\n  return new Date(timestamp + amount);\n}","var MILLISECONDS_IN_MINUTE = 60000;\n\nfunction getDateMillisecondsPart(date) {\n  return date.getTime() % MILLISECONDS_IN_MINUTE;\n}\n/**\n * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.\n * They usually appear for dates that denote time before the timezones were introduced\n * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891\n * and GMT+01:00:00 after that date)\n *\n * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,\n * which would lead to incorrect calculations.\n *\n * This function returns the timezone offset in milliseconds that takes seconds in account.\n */\n\n\nexport default function getTimezoneOffsetInMilliseconds(dirtyDate) {\n  var date = new Date(dirtyDate.getTime());\n  var baseTimezoneOffset = Math.ceil(date.getTimezoneOffset());\n  date.setSeconds(0, 0);\n  var hasNegativeUTCOffset = baseTimezoneOffset > 0;\n  var millisecondsPartOfTimezoneOffset = hasNegativeUTCOffset ? (MILLISECONDS_IN_MINUTE + getDateMillisecondsPart(date)) % MILLISECONDS_IN_MINUTE : getDateMillisecondsPart(date);\n  return baseTimezoneOffset * MILLISECONDS_IN_MINUTE + millisecondsPartOfTimezoneOffset;\n}","import toDate from '../toDate/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name isValid\n * @category Common Helpers\n * @summary Is the given date valid?\n *\n * @description\n * Returns false if argument is Invalid Date and true otherwise.\n * Argument is converted to Date using `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}\n * Invalid Date is a Date, whose time value is NaN.\n *\n * Time value of Date: http://es5.github.io/#x15.9.1.1\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * - Now `isValid` doesn't throw an exception\n *   if the first argument is not an instance of Date.\n *   Instead, argument is converted beforehand using `toDate`.\n *\n *   Examples:\n *\n *   | `isValid` argument        | Before v2.0.0 | v2.0.0 onward |\n *   |---------------------------|---------------|---------------|\n *   | `new Date()`              | `true`        | `true`        |\n *   | `new Date('2016-01-01')`  | `true`        | `true`        |\n *   | `new Date('')`            | `false`       | `false`       |\n *   | `new Date(1488370835081)` | `true`        | `true`        |\n *   | `new Date(NaN)`           | `false`       | `false`       |\n *   | `'2016-01-01'`            | `TypeError`   | `false`       |\n *   | `''`                      | `TypeError`   | `false`       |\n *   | `1488370835081`           | `TypeError`   | `true`        |\n *   | `NaN`                     | `TypeError`   | `false`       |\n *\n *   We introduce this change to make *date-fns* consistent with ECMAScript behavior\n *   that try to coerce arguments to the expected type\n *   (which is also the case with other *date-fns* functions).\n *\n * @param {*} date - the date to check\n * @returns {Boolean} the date is valid\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // For the valid date:\n * var result = isValid(new Date(2014, 1, 31))\n * //=> true\n *\n * @example\n * // For the value, convertable into a date:\n * var result = isValid(1393804800000)\n * //=> true\n *\n * @example\n * // For the invalid date:\n * var result = isValid(new Date(''))\n * //=> false\n */\n\nexport default function isValid(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  return !isNaN(date);\n}","var formatDistanceLocale = {\n  lessThanXSeconds: {\n    one: 'less than a second',\n    other: 'less than {{count}} seconds'\n  },\n  xSeconds: {\n    one: '1 second',\n    other: '{{count}} seconds'\n  },\n  halfAMinute: 'half a minute',\n  lessThanXMinutes: {\n    one: 'less than a minute',\n    other: 'less than {{count}} minutes'\n  },\n  xMinutes: {\n    one: '1 minute',\n    other: '{{count}} minutes'\n  },\n  aboutXHours: {\n    one: 'about 1 hour',\n    other: 'about {{count}} hours'\n  },\n  xHours: {\n    one: '1 hour',\n    other: '{{count}} hours'\n  },\n  xDays: {\n    one: '1 day',\n    other: '{{count}} days'\n  },\n  aboutXWeeks: {\n    one: 'about 1 week',\n    other: 'about {{count}} weeks'\n  },\n  xWeeks: {\n    one: '1 week',\n    other: '{{count}} weeks'\n  },\n  aboutXMonths: {\n    one: 'about 1 month',\n    other: 'about {{count}} months'\n  },\n  xMonths: {\n    one: '1 month',\n    other: '{{count}} months'\n  },\n  aboutXYears: {\n    one: 'about 1 year',\n    other: 'about {{count}} years'\n  },\n  xYears: {\n    one: '1 year',\n    other: '{{count}} years'\n  },\n  overXYears: {\n    one: 'over 1 year',\n    other: 'over {{count}} years'\n  },\n  almostXYears: {\n    one: 'almost 1 year',\n    other: 'almost {{count}} years'\n  }\n};\nexport default function formatDistance(token, count, options) {\n  options = options || {};\n  var result;\n\n  if (typeof formatDistanceLocale[token] === 'string') {\n    result = formatDistanceLocale[token];\n  } else if (count === 1) {\n    result = formatDistanceLocale[token].one;\n  } else {\n    result = formatDistanceLocale[token].other.replace('{{count}}', count);\n  }\n\n  if (options.addSuffix) {\n    if (options.comparison > 0) {\n      return 'in ' + result;\n    } else {\n      return result + ' ago';\n    }\n  }\n\n  return result;\n}","export default function buildFormatLongFn(args) {\n  return function (dirtyOptions) {\n    var options = dirtyOptions || {};\n    var width = options.width ? String(options.width) : args.defaultWidth;\n    var format = args.formats[width] || args.formats[args.defaultWidth];\n    return format;\n  };\n}","import buildFormatLongFn from '../../../_lib/buildFormatLongFn/index.js';\nvar dateFormats = {\n  full: 'EEEE, MMMM do, y',\n  long: 'MMMM do, y',\n  medium: 'MMM d, y',\n  short: 'MM/dd/yyyy'\n};\nvar timeFormats = {\n  full: 'h:mm:ss a zzzz',\n  long: 'h:mm:ss a z',\n  medium: 'h:mm:ss a',\n  short: 'h:mm a'\n};\nvar dateTimeFormats = {\n  full: \"{{date}} 'at' {{time}}\",\n  long: \"{{date}} 'at' {{time}}\",\n  medium: '{{date}}, {{time}}',\n  short: '{{date}}, {{time}}'\n};\nvar formatLong = {\n  date: buildFormatLongFn({\n    formats: dateFormats,\n    defaultWidth: 'full'\n  }),\n  time: buildFormatLongFn({\n    formats: timeFormats,\n    defaultWidth: 'full'\n  }),\n  dateTime: buildFormatLongFn({\n    formats: dateTimeFormats,\n    defaultWidth: 'full'\n  })\n};\nexport default formatLong;","var formatRelativeLocale = {\n  lastWeek: \"'last' eeee 'at' p\",\n  yesterday: \"'yesterday at' p\",\n  today: \"'today at' p\",\n  tomorrow: \"'tomorrow at' p\",\n  nextWeek: \"eeee 'at' p\",\n  other: 'P'\n};\nexport default function formatRelative(token, _date, _baseDate, _options) {\n  return formatRelativeLocale[token];\n}","export default function buildLocalizeFn(args) {\n  return function (dirtyIndex, dirtyOptions) {\n    var options = dirtyOptions || {};\n    var context = options.context ? String(options.context) : 'standalone';\n    var valuesArray;\n\n    if (context === 'formatting' && args.formattingValues) {\n      var defaultWidth = args.defaultFormattingWidth || args.defaultWidth;\n      var width = options.width ? String(options.width) : defaultWidth;\n      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];\n    } else {\n      var _defaultWidth = args.defaultWidth;\n\n      var _width = options.width ? String(options.width) : args.defaultWidth;\n\n      valuesArray = args.values[_width] || args.values[_defaultWidth];\n    }\n\n    var index = args.argumentCallback ? args.argumentCallback(dirtyIndex) : dirtyIndex;\n    return valuesArray[index];\n  };\n}","export default function buildMatchFn(args) {\n  return function (dirtyString, dirtyOptions) {\n    var string = String(dirtyString);\n    var options = dirtyOptions || {};\n    var width = options.width;\n    var matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];\n    var matchResult = string.match(matchPattern);\n\n    if (!matchResult) {\n      return null;\n    }\n\n    var matchedString = matchResult[0];\n    var parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];\n    var value;\n\n    if (Object.prototype.toString.call(parsePatterns) === '[object Array]') {\n      value = findIndex(parsePatterns, function (pattern) {\n        return pattern.test(matchedString);\n      });\n    } else {\n      value = findKey(parsePatterns, function (pattern) {\n        return pattern.test(matchedString);\n      });\n    }\n\n    value = args.valueCallback ? args.valueCallback(value) : value;\n    value = options.valueCallback ? options.valueCallback(value) : value;\n    return {\n      value: value,\n      rest: string.slice(matchedString.length)\n    };\n  };\n}\n\nfunction findKey(object, predicate) {\n  for (var key in object) {\n    if (object.hasOwnProperty(key) && predicate(object[key])) {\n      return key;\n    }\n  }\n}\n\nfunction findIndex(array, predicate) {\n  for (var key = 0; key < array.length; key++) {\n    if (predicate(array[key])) {\n      return key;\n    }\n  }\n}","import buildMatchPatternFn from '../../../_lib/buildMatchPatternFn/index.js';\nimport buildMatchFn from '../../../_lib/buildMatchFn/index.js';\nvar matchOrdinalNumberPattern = /^(\\d+)(th|st|nd|rd)?/i;\nvar parseOrdinalNumberPattern = /\\d+/i;\nvar matchEraPatterns = {\n  narrow: /^(b|a)/i,\n  abbreviated: /^(b\\.?\\s?c\\.?|b\\.?\\s?c\\.?\\s?e\\.?|a\\.?\\s?d\\.?|c\\.?\\s?e\\.?)/i,\n  wide: /^(before christ|before common era|anno domini|common era)/i\n};\nvar parseEraPatterns = {\n  any: [/^b/i, /^(a|c)/i]\n};\nvar matchQuarterPatterns = {\n  narrow: /^[1234]/i,\n  abbreviated: /^q[1234]/i,\n  wide: /^[1234](th|st|nd|rd)? quarter/i\n};\nvar parseQuarterPatterns = {\n  any: [/1/i, /2/i, /3/i, /4/i]\n};\nvar matchMonthPatterns = {\n  narrow: /^[jfmasond]/i,\n  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,\n  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i\n};\nvar parseMonthPatterns = {\n  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],\n  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]\n};\nvar matchDayPatterns = {\n  narrow: /^[smtwf]/i,\n  short: /^(su|mo|tu|we|th|fr|sa)/i,\n  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,\n  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i\n};\nvar parseDayPatterns = {\n  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],\n  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]\n};\nvar matchDayPeriodPatterns = {\n  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,\n  any: /^([ap]\\.?\\s?m\\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i\n};\nvar parseDayPeriodPatterns = {\n  any: {\n    am: /^a/i,\n    pm: /^p/i,\n    midnight: /^mi/i,\n    noon: /^no/i,\n    morning: /morning/i,\n    afternoon: /afternoon/i,\n    evening: /evening/i,\n    night: /night/i\n  }\n};\nvar match = {\n  ordinalNumber: buildMatchPatternFn({\n    matchPattern: matchOrdinalNumberPattern,\n    parsePattern: parseOrdinalNumberPattern,\n    valueCallback: function (value) {\n      return parseInt(value, 10);\n    }\n  }),\n  era: buildMatchFn({\n    matchPatterns: matchEraPatterns,\n    defaultMatchWidth: 'wide',\n    parsePatterns: parseEraPatterns,\n    defaultParseWidth: 'any'\n  }),\n  quarter: buildMatchFn({\n    matchPatterns: matchQuarterPatterns,\n    defaultMatchWidth: 'wide',\n    parsePatterns: parseQuarterPatterns,\n    defaultParseWidth: 'any',\n    valueCallback: function (index) {\n      return index + 1;\n    }\n  }),\n  month: buildMatchFn({\n    matchPatterns: matchMonthPatterns,\n    defaultMatchWidth: 'wide',\n    parsePatterns: parseMonthPatterns,\n    defaultParseWidth: 'any'\n  }),\n  day: buildMatchFn({\n    matchPatterns: matchDayPatterns,\n    defaultMatchWidth: 'wide',\n    parsePatterns: parseDayPatterns,\n    defaultParseWidth: 'any'\n  }),\n  dayPeriod: buildMatchFn({\n    matchPatterns: matchDayPeriodPatterns,\n    defaultMatchWidth: 'any',\n    parsePatterns: parseDayPeriodPatterns,\n    defaultParseWidth: 'any'\n  })\n};\nexport default match;","export default function buildMatchPatternFn(args) {\n  return function (dirtyString, dirtyOptions) {\n    var string = String(dirtyString);\n    var options = dirtyOptions || {};\n    var matchResult = string.match(args.matchPattern);\n\n    if (!matchResult) {\n      return null;\n    }\n\n    var matchedString = matchResult[0];\n    var parseResult = string.match(args.parsePattern);\n\n    if (!parseResult) {\n      return null;\n    }\n\n    var value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];\n    value = options.valueCallback ? options.valueCallback(value) : value;\n    return {\n      value: value,\n      rest: string.slice(matchedString.length)\n    };\n  };\n}","import formatDistance from './_lib/formatDistance/index.js';\nimport formatLong from './_lib/formatLong/index.js';\nimport formatRelative from './_lib/formatRelative/index.js';\nimport localize from './_lib/localize/index.js';\nimport match from './_lib/match/index.js';\n/**\n * @type {Locale}\n * @category Locales\n * @summary English locale (United States).\n * @language English\n * @iso-639-2 eng\n * @author Sasha Koss [@kossnocorp]{@link https://github.com/kossnocorp}\n * @author Lesha Koss [@leshakoss]{@link https://github.com/leshakoss}\n */\n\nvar locale = {\n  code: 'en-US',\n  formatDistance: formatDistance,\n  formatLong: formatLong,\n  formatRelative: formatRelative,\n  localize: localize,\n  match: match,\n  options: {\n    weekStartsOn: 0\n    /* Sunday */\n    ,\n    firstWeekContainsDate: 1\n  }\n};\nexport default locale;","import buildLocalizeFn from '../../../_lib/buildLocalizeFn/index.js';\nvar eraValues = {\n  narrow: ['B', 'A'],\n  abbreviated: ['BC', 'AD'],\n  wide: ['Before Christ', 'Anno Domini']\n};\nvar quarterValues = {\n  narrow: ['1', '2', '3', '4'],\n  abbreviated: ['Q1', 'Q2', 'Q3', 'Q4'],\n  wide: ['1st quarter', '2nd quarter', '3rd quarter', '4th quarter'] // Note: in English, the names of days of the week and months are capitalized.\n  // If you are making a new locale based on this one, check if the same is true for the language you're working on.\n  // Generally, formatted dates should look like they are in the middle of a sentence,\n  // e.g. in Spanish language the weekdays and months should be in the lowercase.\n\n};\nvar monthValues = {\n  narrow: ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'],\n  abbreviated: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n  wide: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n};\nvar dayValues = {\n  narrow: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],\n  short: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],\n  abbreviated: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n  wide: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\n};\nvar dayPeriodValues = {\n  narrow: {\n    am: 'a',\n    pm: 'p',\n    midnight: 'mi',\n    noon: 'n',\n    morning: 'morning',\n    afternoon: 'afternoon',\n    evening: 'evening',\n    night: 'night'\n  },\n  abbreviated: {\n    am: 'AM',\n    pm: 'PM',\n    midnight: 'midnight',\n    noon: 'noon',\n    morning: 'morning',\n    afternoon: 'afternoon',\n    evening: 'evening',\n    night: 'night'\n  },\n  wide: {\n    am: 'a.m.',\n    pm: 'p.m.',\n    midnight: 'midnight',\n    noon: 'noon',\n    morning: 'morning',\n    afternoon: 'afternoon',\n    evening: 'evening',\n    night: 'night'\n  }\n};\nvar formattingDayPeriodValues = {\n  narrow: {\n    am: 'a',\n    pm: 'p',\n    midnight: 'mi',\n    noon: 'n',\n    morning: 'in the morning',\n    afternoon: 'in the afternoon',\n    evening: 'in the evening',\n    night: 'at night'\n  },\n  abbreviated: {\n    am: 'AM',\n    pm: 'PM',\n    midnight: 'midnight',\n    noon: 'noon',\n    morning: 'in the morning',\n    afternoon: 'in the afternoon',\n    evening: 'in the evening',\n    night: 'at night'\n  },\n  wide: {\n    am: 'a.m.',\n    pm: 'p.m.',\n    midnight: 'midnight',\n    noon: 'noon',\n    morning: 'in the morning',\n    afternoon: 'in the afternoon',\n    evening: 'in the evening',\n    night: 'at night'\n  }\n};\n\nfunction ordinalNumber(dirtyNumber, _dirtyOptions) {\n  var number = Number(dirtyNumber); // If ordinal numbers depend on context, for example,\n  // if they are different for different grammatical genders,\n  // use `options.unit`:\n  //\n  //   var options = dirtyOptions || {}\n  //   var unit = String(options.unit)\n  //\n  // where `unit` can be 'year', 'quarter', 'month', 'week', 'date', 'dayOfYear',\n  // 'day', 'hour', 'minute', 'second'\n\n  var rem100 = number % 100;\n\n  if (rem100 > 20 || rem100 < 10) {\n    switch (rem100 % 10) {\n      case 1:\n        return number + 'st';\n\n      case 2:\n        return number + 'nd';\n\n      case 3:\n        return number + 'rd';\n    }\n  }\n\n  return number + 'th';\n}\n\nvar localize = {\n  ordinalNumber: ordinalNumber,\n  era: buildLocalizeFn({\n    values: eraValues,\n    defaultWidth: 'wide'\n  }),\n  quarter: buildLocalizeFn({\n    values: quarterValues,\n    defaultWidth: 'wide',\n    argumentCallback: function (quarter) {\n      return Number(quarter) - 1;\n    }\n  }),\n  month: buildLocalizeFn({\n    values: monthValues,\n    defaultWidth: 'wide'\n  }),\n  day: buildLocalizeFn({\n    values: dayValues,\n    defaultWidth: 'wide'\n  }),\n  dayPeriod: buildLocalizeFn({\n    values: dayPeriodValues,\n    defaultWidth: 'wide',\n    formattingValues: formattingDayPeriodValues,\n    defaultFormattingWidth: 'wide'\n  })\n};\nexport default localize;","import toInteger from '../_lib/toInteger/index.js';\nimport addMilliseconds from '../addMilliseconds/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name subMilliseconds\n * @category Millisecond Helpers\n * @summary Subtract the specified number of milliseconds from the given date.\n *\n * @description\n * Subtract the specified number of milliseconds from the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of milliseconds to be subtracted. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the milliseconds subtracted\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Subtract 750 milliseconds from 10 July 2014 12:45:30.000:\n * var result = subMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)\n * //=> Thu Jul 10 2014 12:45:29.250\n */\n\nexport default function subMilliseconds(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  return addMilliseconds(dirtyDate, -amount);\n}","export default function addLeadingZeros(number, targetLength) {\n  var sign = number < 0 ? '-' : '';\n  var output = Math.abs(number).toString();\n\n  while (output.length < targetLength) {\n    output = '0' + output;\n  }\n\n  return sign + output;\n}","import addLeadingZeros from '../../addLeadingZeros/index.js';\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* |                                |\n * |  d  | Day of month                   |  D  |                                |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  m  | Minute                         |  M  | Month                          |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  y  | Year (abs)                     |  Y  |                                |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n */\n\nvar formatters = {\n  // Year\n  y: function (date, token) {\n    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens\n    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |\n    // |----------|-------|----|-------|-------|-------|\n    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |\n    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |\n    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |\n    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |\n    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |\n    var signedYear = date.getUTCFullYear(); // Returns 1 for 1 BC (which is year 0 in JavaScript)\n\n    var year = signedYear > 0 ? signedYear : 1 - signedYear;\n    return addLeadingZeros(token === 'yy' ? year % 100 : year, token.length);\n  },\n  // Month\n  M: function (date, token) {\n    var month = date.getUTCMonth();\n    return token === 'M' ? String(month + 1) : addLeadingZeros(month + 1, 2);\n  },\n  // Day of the month\n  d: function (date, token) {\n    return addLeadingZeros(date.getUTCDate(), token.length);\n  },\n  // AM or PM\n  a: function (date, token) {\n    var dayPeriodEnumValue = date.getUTCHours() / 12 >= 1 ? 'pm' : 'am';\n\n    switch (token) {\n      case 'a':\n      case 'aa':\n      case 'aaa':\n        return dayPeriodEnumValue.toUpperCase();\n\n      case 'aaaaa':\n        return dayPeriodEnumValue[0];\n\n      case 'aaaa':\n      default:\n        return dayPeriodEnumValue === 'am' ? 'a.m.' : 'p.m.';\n    }\n  },\n  // Hour [1-12]\n  h: function (date, token) {\n    return addLeadingZeros(date.getUTCHours() % 12 || 12, token.length);\n  },\n  // Hour [0-23]\n  H: function (date, token) {\n    return addLeadingZeros(date.getUTCHours(), token.length);\n  },\n  // Minute\n  m: function (date, token) {\n    return addLeadingZeros(date.getUTCMinutes(), token.length);\n  },\n  // Second\n  s: function (date, token) {\n    return addLeadingZeros(date.getUTCSeconds(), token.length);\n  },\n  // Fraction of second\n  S: function (date, token) {\n    var numberOfDigits = token.length;\n    var milliseconds = date.getUTCMilliseconds();\n    var fractionalSeconds = Math.floor(milliseconds * Math.pow(10, numberOfDigits - 3));\n    return addLeadingZeros(fractionalSeconds, token.length);\n  }\n};\nexport default formatters;","import toDate from '../../toDate/index.js';\nimport requiredArgs from '../requiredArgs/index.js'; // This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\n\nexport default function startOfUTCISOWeek(dirtyDate) {\n  requiredArgs(1, arguments);\n  var weekStartsOn = 1;\n  var date = toDate(dirtyDate);\n  var day = date.getUTCDay();\n  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n  date.setUTCDate(date.getUTCDate() - diff);\n  date.setUTCHours(0, 0, 0, 0);\n  return date;\n}","import toDate from '../../toDate/index.js';\nimport startOfUTCISOWeek from '../startOfUTCISOWeek/index.js';\nimport requiredArgs from '../requiredArgs/index.js'; // This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\n\nexport default function getUTCISOWeekYear(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var year = date.getUTCFullYear();\n  var fourthOfJanuaryOfNextYear = new Date(0);\n  fourthOfJanuaryOfNextYear.setUTCFullYear(year + 1, 0, 4);\n  fourthOfJanuaryOfNextYear.setUTCHours(0, 0, 0, 0);\n  var startOfNextYear = startOfUTCISOWeek(fourthOfJanuaryOfNextYear);\n  var fourthOfJanuaryOfThisYear = new Date(0);\n  fourthOfJanuaryOfThisYear.setUTCFullYear(year, 0, 4);\n  fourthOfJanuaryOfThisYear.setUTCHours(0, 0, 0, 0);\n  var startOfThisYear = startOfUTCISOWeek(fourthOfJanuaryOfThisYear);\n\n  if (date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}","import getUTCISOWeekYear from '../getUTCISOWeekYear/index.js';\nimport startOfUTCISOWeek from '../startOfUTCISOWeek/index.js';\nimport requiredArgs from '../requiredArgs/index.js'; // This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\n\nexport default function startOfUTCISOWeekYear(dirtyDate) {\n  requiredArgs(1, arguments);\n  var year = getUTCISOWeekYear(dirtyDate);\n  var fourthOfJanuary = new Date(0);\n  fourthOfJanuary.setUTCFullYear(year, 0, 4);\n  fourthOfJanuary.setUTCHours(0, 0, 0, 0);\n  var date = startOfUTCISOWeek(fourthOfJanuary);\n  return date;\n}","import toInteger from '../toInteger/index.js';\nimport toDate from '../../toDate/index.js';\nimport requiredArgs from '../requiredArgs/index.js'; // This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\n\nexport default function startOfUTCWeek(dirtyDate, dirtyOptions) {\n  requiredArgs(1, arguments);\n  var options = dirtyOptions || {};\n  var locale = options.locale;\n  var localeWeekStartsOn = locale && locale.options && locale.options.weekStartsOn;\n  var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : toInteger(localeWeekStartsOn);\n  var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : toInteger(options.weekStartsOn); // Test if weekStartsOn is between 0 and 6 _and_ is not NaN\n\n  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');\n  }\n\n  var date = toDate(dirtyDate);\n  var day = date.getUTCDay();\n  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n  date.setUTCDate(date.getUTCDate() - diff);\n  date.setUTCHours(0, 0, 0, 0);\n  return date;\n}","import toInteger from '../toInteger/index.js';\nimport toDate from '../../toDate/index.js';\nimport startOfUTCWeek from '../startOfUTCWeek/index.js';\nimport requiredArgs from '../requiredArgs/index.js'; // This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\n\nexport default function getUTCWeekYear(dirtyDate, dirtyOptions) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate, dirtyOptions);\n  var year = date.getUTCFullYear();\n  var options = dirtyOptions || {};\n  var locale = options.locale;\n  var localeFirstWeekContainsDate = locale && locale.options && locale.options.firstWeekContainsDate;\n  var defaultFirstWeekContainsDate = localeFirstWeekContainsDate == null ? 1 : toInteger(localeFirstWeekContainsDate);\n  var firstWeekContainsDate = options.firstWeekContainsDate == null ? defaultFirstWeekContainsDate : toInteger(options.firstWeekContainsDate); // Test if weekStartsOn is between 1 and 7 _and_ is not NaN\n\n  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {\n    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');\n  }\n\n  var firstWeekOfNextYear = new Date(0);\n  firstWeekOfNextYear.setUTCFullYear(year + 1, 0, firstWeekContainsDate);\n  firstWeekOfNextYear.setUTCHours(0, 0, 0, 0);\n  var startOfNextYear = startOfUTCWeek(firstWeekOfNextYear, dirtyOptions);\n  var firstWeekOfThisYear = new Date(0);\n  firstWeekOfThisYear.setUTCFullYear(year, 0, firstWeekContainsDate);\n  firstWeekOfThisYear.setUTCHours(0, 0, 0, 0);\n  var startOfThisYear = startOfUTCWeek(firstWeekOfThisYear, dirtyOptions);\n\n  if (date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}","import toInteger from '../toInteger/index.js';\nimport getUTCWeekYear from '../getUTCWeekYear/index.js';\nimport startOfUTCWeek from '../startOfUTCWeek/index.js';\nimport requiredArgs from '../requiredArgs/index.js'; // This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\n\nexport default function startOfUTCWeekYear(dirtyDate, dirtyOptions) {\n  requiredArgs(1, arguments);\n  var options = dirtyOptions || {};\n  var locale = options.locale;\n  var localeFirstWeekContainsDate = locale && locale.options && locale.options.firstWeekContainsDate;\n  var defaultFirstWeekContainsDate = localeFirstWeekContainsDate == null ? 1 : toInteger(localeFirstWeekContainsDate);\n  var firstWeekContainsDate = options.firstWeekContainsDate == null ? defaultFirstWeekContainsDate : toInteger(options.firstWeekContainsDate);\n  var year = getUTCWeekYear(dirtyDate, dirtyOptions);\n  var firstWeek = new Date(0);\n  firstWeek.setUTCFullYear(year, 0, firstWeekContainsDate);\n  firstWeek.setUTCHours(0, 0, 0, 0);\n  var date = startOfUTCWeek(firstWeek, dirtyOptions);\n  return date;\n}","import lightFormatters from '../lightFormatters/index.js';\nimport getUTCDayOfYear from '../../../_lib/getUTCDayOfYear/index.js';\nimport getUTCISOWeek from '../../../_lib/getUTCISOWeek/index.js';\nimport getUTCISOWeekYear from '../../../_lib/getUTCISOWeekYear/index.js';\nimport getUTCWeek from '../../../_lib/getUTCWeek/index.js';\nimport getUTCWeekYear from '../../../_lib/getUTCWeekYear/index.js';\nimport addLeadingZeros from '../../addLeadingZeros/index.js';\nvar dayPeriodEnum = {\n  am: 'am',\n  pm: 'pm',\n  midnight: 'midnight',\n  noon: 'noon',\n  morning: 'morning',\n  afternoon: 'afternoon',\n  evening: 'evening',\n  night: 'night'\n  /*\n   * |     | Unit                           |     | Unit                           |\n   * |-----|--------------------------------|-----|--------------------------------|\n   * |  a  | AM, PM                         |  A* | Milliseconds in day            |\n   * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |\n   * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |\n   * |  d  | Day of month                   |  D  | Day of year                    |\n   * |  e  | Local day of week              |  E  | Day of week                    |\n   * |  f  |                                |  F* | Day of week in month           |\n   * |  g* | Modified Julian day            |  G  | Era                            |\n   * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n   * |  i! | ISO day of week                |  I! | ISO week of year               |\n   * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |\n   * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |\n   * |  l* | (deprecated)                   |  L  | Stand-alone month              |\n   * |  m  | Minute                         |  M  | Month                          |\n   * |  n  |                                |  N  |                                |\n   * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |\n   * |  p! | Long localized time            |  P! | Long localized date            |\n   * |  q  | Stand-alone quarter            |  Q  | Quarter                        |\n   * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |\n   * |  s  | Second                         |  S  | Fraction of second             |\n   * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |\n   * |  u  | Extended year                  |  U* | Cyclic year                    |\n   * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |\n   * |  w  | Local week of year             |  W* | Week of month                  |\n   * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |\n   * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |\n   * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |\n   *\n   * Letters marked by * are not implemented but reserved by Unicode standard.\n   *\n   * Letters marked by ! are non-standard, but implemented by date-fns:\n   * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)\n   * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,\n   *   i.e. 7 for Sunday, 1 for Monday, etc.\n   * - `I` is ISO week of year, as opposed to `w` which is local week of year.\n   * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.\n   *   `R` is supposed to be used in conjunction with `I` and `i`\n   *   for universal ISO week-numbering date, whereas\n   *   `Y` is supposed to be used in conjunction with `w` and `e`\n   *   for week-numbering date specific to the locale.\n   * - `P` is long localized date format\n   * - `p` is long localized time format\n   */\n\n};\nvar formatters = {\n  // Era\n  G: function (date, token, localize) {\n    var era = date.getUTCFullYear() > 0 ? 1 : 0;\n\n    switch (token) {\n      // AD, BC\n      case 'G':\n      case 'GG':\n      case 'GGG':\n        return localize.era(era, {\n          width: 'abbreviated'\n        });\n      // A, B\n\n      case 'GGGGG':\n        return localize.era(era, {\n          width: 'narrow'\n        });\n      // Anno Domini, Before Christ\n\n      case 'GGGG':\n      default:\n        return localize.era(era, {\n          width: 'wide'\n        });\n    }\n  },\n  // Year\n  y: function (date, token, localize) {\n    // Ordinal number\n    if (token === 'yo') {\n      var signedYear = date.getUTCFullYear(); // Returns 1 for 1 BC (which is year 0 in JavaScript)\n\n      var year = signedYear > 0 ? signedYear : 1 - signedYear;\n      return localize.ordinalNumber(year, {\n        unit: 'year'\n      });\n    }\n\n    return lightFormatters.y(date, token);\n  },\n  // Local week-numbering year\n  Y: function (date, token, localize, options) {\n    var signedWeekYear = getUTCWeekYear(date, options); // Returns 1 for 1 BC (which is year 0 in JavaScript)\n\n    var weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear; // Two digit year\n\n    if (token === 'YY') {\n      var twoDigitYear = weekYear % 100;\n      return addLeadingZeros(twoDigitYear, 2);\n    } // Ordinal number\n\n\n    if (token === 'Yo') {\n      return localize.ordinalNumber(weekYear, {\n        unit: 'year'\n      });\n    } // Padding\n\n\n    return addLeadingZeros(weekYear, token.length);\n  },\n  // ISO week-numbering year\n  R: function (date, token) {\n    var isoWeekYear = getUTCISOWeekYear(date); // Padding\n\n    return addLeadingZeros(isoWeekYear, token.length);\n  },\n  // Extended year. This is a single number designating the year of this calendar system.\n  // The main difference between `y` and `u` localizers are B.C. years:\n  // | Year | `y` | `u` |\n  // |------|-----|-----|\n  // | AC 1 |   1 |   1 |\n  // | BC 1 |   1 |   0 |\n  // | BC 2 |   2 |  -1 |\n  // Also `yy` always returns the last two digits of a year,\n  // while `uu` pads single digit years to 2 characters and returns other years unchanged.\n  u: function (date, token) {\n    var year = date.getUTCFullYear();\n    return addLeadingZeros(year, token.length);\n  },\n  // Quarter\n  Q: function (date, token, localize) {\n    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);\n\n    switch (token) {\n      // 1, 2, 3, 4\n      case 'Q':\n        return String(quarter);\n      // 01, 02, 03, 04\n\n      case 'QQ':\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n\n      case 'Qo':\n        return localize.ordinalNumber(quarter, {\n          unit: 'quarter'\n        });\n      // Q1, Q2, Q3, Q4\n\n      case 'QQQ':\n        return localize.quarter(quarter, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n\n      case 'QQQQQ':\n        return localize.quarter(quarter, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n      // 1st quarter, 2nd quarter, ...\n\n      case 'QQQQ':\n      default:\n        return localize.quarter(quarter, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // Stand-alone quarter\n  q: function (date, token, localize) {\n    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);\n\n    switch (token) {\n      // 1, 2, 3, 4\n      case 'q':\n        return String(quarter);\n      // 01, 02, 03, 04\n\n      case 'qq':\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n\n      case 'qo':\n        return localize.ordinalNumber(quarter, {\n          unit: 'quarter'\n        });\n      // Q1, Q2, Q3, Q4\n\n      case 'qqq':\n        return localize.quarter(quarter, {\n          width: 'abbreviated',\n          context: 'standalone'\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n\n      case 'qqqqq':\n        return localize.quarter(quarter, {\n          width: 'narrow',\n          context: 'standalone'\n        });\n      // 1st quarter, 2nd quarter, ...\n\n      case 'qqqq':\n      default:\n        return localize.quarter(quarter, {\n          width: 'wide',\n          context: 'standalone'\n        });\n    }\n  },\n  // Month\n  M: function (date, token, localize) {\n    var month = date.getUTCMonth();\n\n    switch (token) {\n      case 'M':\n      case 'MM':\n        return lightFormatters.M(date, token);\n      // 1st, 2nd, ..., 12th\n\n      case 'Mo':\n        return localize.ordinalNumber(month + 1, {\n          unit: 'month'\n        });\n      // Jan, Feb, ..., Dec\n\n      case 'MMM':\n        return localize.month(month, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n      // J, F, ..., D\n\n      case 'MMMMM':\n        return localize.month(month, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n      // January, February, ..., December\n\n      case 'MMMM':\n      default:\n        return localize.month(month, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // Stand-alone month\n  L: function (date, token, localize) {\n    var month = date.getUTCMonth();\n\n    switch (token) {\n      // 1, 2, ..., 12\n      case 'L':\n        return String(month + 1);\n      // 01, 02, ..., 12\n\n      case 'LL':\n        return addLeadingZeros(month + 1, 2);\n      // 1st, 2nd, ..., 12th\n\n      case 'Lo':\n        return localize.ordinalNumber(month + 1, {\n          unit: 'month'\n        });\n      // Jan, Feb, ..., Dec\n\n      case 'LLL':\n        return localize.month(month, {\n          width: 'abbreviated',\n          context: 'standalone'\n        });\n      // J, F, ..., D\n\n      case 'LLLLL':\n        return localize.month(month, {\n          width: 'narrow',\n          context: 'standalone'\n        });\n      // January, February, ..., December\n\n      case 'LLLL':\n      default:\n        return localize.month(month, {\n          width: 'wide',\n          context: 'standalone'\n        });\n    }\n  },\n  // Local week of year\n  w: function (date, token, localize, options) {\n    var week = getUTCWeek(date, options);\n\n    if (token === 'wo') {\n      return localize.ordinalNumber(week, {\n        unit: 'week'\n      });\n    }\n\n    return addLeadingZeros(week, token.length);\n  },\n  // ISO week of year\n  I: function (date, token, localize) {\n    var isoWeek = getUTCISOWeek(date);\n\n    if (token === 'Io') {\n      return localize.ordinalNumber(isoWeek, {\n        unit: 'week'\n      });\n    }\n\n    return addLeadingZeros(isoWeek, token.length);\n  },\n  // Day of the month\n  d: function (date, token, localize) {\n    if (token === 'do') {\n      return localize.ordinalNumber(date.getUTCDate(), {\n        unit: 'date'\n      });\n    }\n\n    return lightFormatters.d(date, token);\n  },\n  // Day of year\n  D: function (date, token, localize) {\n    var dayOfYear = getUTCDayOfYear(date);\n\n    if (token === 'Do') {\n      return localize.ordinalNumber(dayOfYear, {\n        unit: 'dayOfYear'\n      });\n    }\n\n    return addLeadingZeros(dayOfYear, token.length);\n  },\n  // Day of week\n  E: function (date, token, localize) {\n    var dayOfWeek = date.getUTCDay();\n\n    switch (token) {\n      // Tue\n      case 'E':\n      case 'EE':\n      case 'EEE':\n        return localize.day(dayOfWeek, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n      // T\n\n      case 'EEEEE':\n        return localize.day(dayOfWeek, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n      // Tu\n\n      case 'EEEEEE':\n        return localize.day(dayOfWeek, {\n          width: 'short',\n          context: 'formatting'\n        });\n      // Tuesday\n\n      case 'EEEE':\n      default:\n        return localize.day(dayOfWeek, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // Local day of week\n  e: function (date, token, localize, options) {\n    var dayOfWeek = date.getUTCDay();\n    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n\n    switch (token) {\n      // Numerical value (Nth day of week with current locale or weekStartsOn)\n      case 'e':\n        return String(localDayOfWeek);\n      // Padded numerical value\n\n      case 'ee':\n        return addLeadingZeros(localDayOfWeek, 2);\n      // 1st, 2nd, ..., 7th\n\n      case 'eo':\n        return localize.ordinalNumber(localDayOfWeek, {\n          unit: 'day'\n        });\n\n      case 'eee':\n        return localize.day(dayOfWeek, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n      // T\n\n      case 'eeeee':\n        return localize.day(dayOfWeek, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n      // Tu\n\n      case 'eeeeee':\n        return localize.day(dayOfWeek, {\n          width: 'short',\n          context: 'formatting'\n        });\n      // Tuesday\n\n      case 'eeee':\n      default:\n        return localize.day(dayOfWeek, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // Stand-alone local day of week\n  c: function (date, token, localize, options) {\n    var dayOfWeek = date.getUTCDay();\n    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n\n    switch (token) {\n      // Numerical value (same as in `e`)\n      case 'c':\n        return String(localDayOfWeek);\n      // Padded numerical value\n\n      case 'cc':\n        return addLeadingZeros(localDayOfWeek, token.length);\n      // 1st, 2nd, ..., 7th\n\n      case 'co':\n        return localize.ordinalNumber(localDayOfWeek, {\n          unit: 'day'\n        });\n\n      case 'ccc':\n        return localize.day(dayOfWeek, {\n          width: 'abbreviated',\n          context: 'standalone'\n        });\n      // T\n\n      case 'ccccc':\n        return localize.day(dayOfWeek, {\n          width: 'narrow',\n          context: 'standalone'\n        });\n      // Tu\n\n      case 'cccccc':\n        return localize.day(dayOfWeek, {\n          width: 'short',\n          context: 'standalone'\n        });\n      // Tuesday\n\n      case 'cccc':\n      default:\n        return localize.day(dayOfWeek, {\n          width: 'wide',\n          context: 'standalone'\n        });\n    }\n  },\n  // ISO day of week\n  i: function (date, token, localize) {\n    var dayOfWeek = date.getUTCDay();\n    var isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;\n\n    switch (token) {\n      // 2\n      case 'i':\n        return String(isoDayOfWeek);\n      // 02\n\n      case 'ii':\n        return addLeadingZeros(isoDayOfWeek, token.length);\n      // 2nd\n\n      case 'io':\n        return localize.ordinalNumber(isoDayOfWeek, {\n          unit: 'day'\n        });\n      // Tue\n\n      case 'iii':\n        return localize.day(dayOfWeek, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n      // T\n\n      case 'iiiii':\n        return localize.day(dayOfWeek, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n      // Tu\n\n      case 'iiiiii':\n        return localize.day(dayOfWeek, {\n          width: 'short',\n          context: 'formatting'\n        });\n      // Tuesday\n\n      case 'iiii':\n      default:\n        return localize.day(dayOfWeek, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // AM or PM\n  a: function (date, token, localize) {\n    var hours = date.getUTCHours();\n    var dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';\n\n    switch (token) {\n      case 'a':\n      case 'aa':\n      case 'aaa':\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n\n      case 'aaaaa':\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n\n      case 'aaaa':\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // AM, PM, midnight, noon\n  b: function (date, token, localize) {\n    var hours = date.getUTCHours();\n    var dayPeriodEnumValue;\n\n    if (hours === 12) {\n      dayPeriodEnumValue = dayPeriodEnum.noon;\n    } else if (hours === 0) {\n      dayPeriodEnumValue = dayPeriodEnum.midnight;\n    } else {\n      dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';\n    }\n\n    switch (token) {\n      case 'b':\n      case 'bb':\n      case 'bbb':\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n\n      case 'bbbbb':\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n\n      case 'bbbb':\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // in the morning, in the afternoon, in the evening, at night\n  B: function (date, token, localize) {\n    var hours = date.getUTCHours();\n    var dayPeriodEnumValue;\n\n    if (hours >= 17) {\n      dayPeriodEnumValue = dayPeriodEnum.evening;\n    } else if (hours >= 12) {\n      dayPeriodEnumValue = dayPeriodEnum.afternoon;\n    } else if (hours >= 4) {\n      dayPeriodEnumValue = dayPeriodEnum.morning;\n    } else {\n      dayPeriodEnumValue = dayPeriodEnum.night;\n    }\n\n    switch (token) {\n      case 'B':\n      case 'BB':\n      case 'BBB':\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n\n      case 'BBBBB':\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n\n      case 'BBBB':\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // Hour [1-12]\n  h: function (date, token, localize) {\n    if (token === 'ho') {\n      var hours = date.getUTCHours() % 12;\n      if (hours === 0) hours = 12;\n      return localize.ordinalNumber(hours, {\n        unit: 'hour'\n      });\n    }\n\n    return lightFormatters.h(date, token);\n  },\n  // Hour [0-23]\n  H: function (date, token, localize) {\n    if (token === 'Ho') {\n      return localize.ordinalNumber(date.getUTCHours(), {\n        unit: 'hour'\n      });\n    }\n\n    return lightFormatters.H(date, token);\n  },\n  // Hour [0-11]\n  K: function (date, token, localize) {\n    var hours = date.getUTCHours() % 12;\n\n    if (token === 'Ko') {\n      return localize.ordinalNumber(hours, {\n        unit: 'hour'\n      });\n    }\n\n    return addLeadingZeros(hours, token.length);\n  },\n  // Hour [1-24]\n  k: function (date, token, localize) {\n    var hours = date.getUTCHours();\n    if (hours === 0) hours = 24;\n\n    if (token === 'ko') {\n      return localize.ordinalNumber(hours, {\n        unit: 'hour'\n      });\n    }\n\n    return addLeadingZeros(hours, token.length);\n  },\n  // Minute\n  m: function (date, token, localize) {\n    if (token === 'mo') {\n      return localize.ordinalNumber(date.getUTCMinutes(), {\n        unit: 'minute'\n      });\n    }\n\n    return lightFormatters.m(date, token);\n  },\n  // Second\n  s: function (date, token, localize) {\n    if (token === 'so') {\n      return localize.ordinalNumber(date.getUTCSeconds(), {\n        unit: 'second'\n      });\n    }\n\n    return lightFormatters.s(date, token);\n  },\n  // Fraction of second\n  S: function (date, token) {\n    return lightFormatters.S(date, token);\n  },\n  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)\n  X: function (date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n\n    if (timezoneOffset === 0) {\n      return 'Z';\n    }\n\n    switch (token) {\n      // Hours and optional minutes\n      case 'X':\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XX`\n\n      case 'XXXX':\n      case 'XX':\n        // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XXX`\n\n      case 'XXXXX':\n      case 'XXX': // Hours and minutes with `:` delimiter\n\n      default:\n        return formatTimezone(timezoneOffset, ':');\n    }\n  },\n  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)\n  x: function (date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n\n    switch (token) {\n      // Hours and optional minutes\n      case 'x':\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xx`\n\n      case 'xxxx':\n      case 'xx':\n        // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xxx`\n\n      case 'xxxxx':\n      case 'xxx': // Hours and minutes with `:` delimiter\n\n      default:\n        return formatTimezone(timezoneOffset, ':');\n    }\n  },\n  // Timezone (GMT)\n  O: function (date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case 'O':\n      case 'OO':\n      case 'OOO':\n        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');\n      // Long\n\n      case 'OOOO':\n      default:\n        return 'GMT' + formatTimezone(timezoneOffset, ':');\n    }\n  },\n  // Timezone (specific non-location)\n  z: function (date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case 'z':\n      case 'zz':\n      case 'zzz':\n        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');\n      // Long\n\n      case 'zzzz':\n      default:\n        return 'GMT' + formatTimezone(timezoneOffset, ':');\n    }\n  },\n  // Seconds timestamp\n  t: function (date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timestamp = Math.floor(originalDate.getTime() / 1000);\n    return addLeadingZeros(timestamp, token.length);\n  },\n  // Milliseconds timestamp\n  T: function (date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timestamp = originalDate.getTime();\n    return addLeadingZeros(timestamp, token.length);\n  }\n};\n\nfunction formatTimezoneShort(offset, dirtyDelimiter) {\n  var sign = offset > 0 ? '-' : '+';\n  var absOffset = Math.abs(offset);\n  var hours = Math.floor(absOffset / 60);\n  var minutes = absOffset % 60;\n\n  if (minutes === 0) {\n    return sign + String(hours);\n  }\n\n  var delimiter = dirtyDelimiter || '';\n  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);\n}\n\nfunction formatTimezoneWithOptionalMinutes(offset, dirtyDelimiter) {\n  if (offset % 60 === 0) {\n    var sign = offset > 0 ? '-' : '+';\n    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);\n  }\n\n  return formatTimezone(offset, dirtyDelimiter);\n}\n\nfunction formatTimezone(offset, dirtyDelimiter) {\n  var delimiter = dirtyDelimiter || '';\n  var sign = offset > 0 ? '-' : '+';\n  var absOffset = Math.abs(offset);\n  var hours = addLeadingZeros(Math.floor(absOffset / 60), 2);\n  var minutes = addLeadingZeros(absOffset % 60, 2);\n  return sign + hours + delimiter + minutes;\n}\n\nexport default formatters;","import toDate from '../../toDate/index.js';\nimport startOfUTCWeek from '../startOfUTCWeek/index.js';\nimport startOfUTCWeekYear from '../startOfUTCWeekYear/index.js';\nimport requiredArgs from '../requiredArgs/index.js';\nvar MILLISECONDS_IN_WEEK = 604800000; // This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\n\nexport default function getUTCWeek(dirtyDate, options) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var diff = startOfUTCWeek(date, options).getTime() - startOfUTCWeekYear(date, options).getTime(); // Round the number of days to the nearest integer\n  // because the number of milliseconds in a week is not constant\n  // (e.g. it's different in the week of the daylight saving time clock shift)\n\n  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;\n}","import toDate from '../../toDate/index.js';\nimport startOfUTCISOWeek from '../startOfUTCISOWeek/index.js';\nimport startOfUTCISOWeekYear from '../startOfUTCISOWeekYear/index.js';\nimport requiredArgs from '../requiredArgs/index.js';\nvar MILLISECONDS_IN_WEEK = 604800000; // This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\n\nexport default function getUTCISOWeek(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var diff = startOfUTCISOWeek(date).getTime() - startOfUTCISOWeekYear(date).getTime(); // Round the number of days to the nearest integer\n  // because the number of milliseconds in a week is not constant\n  // (e.g. it's different in the week of the daylight saving time clock shift)\n\n  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;\n}","import toDate from '../../toDate/index.js';\nimport requiredArgs from '../requiredArgs/index.js';\nvar MILLISECONDS_IN_DAY = 86400000; // This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\n\nexport default function getUTCDayOfYear(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var timestamp = date.getTime();\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n  var startOfYearTimestamp = date.getTime();\n  var difference = timestamp - startOfYearTimestamp;\n  return Math.floor(difference / MILLISECONDS_IN_DAY) + 1;\n}","function dateLongFormatter(pattern, formatLong) {\n  switch (pattern) {\n    case 'P':\n      return formatLong.date({\n        width: 'short'\n      });\n\n    case 'PP':\n      return formatLong.date({\n        width: 'medium'\n      });\n\n    case 'PPP':\n      return formatLong.date({\n        width: 'long'\n      });\n\n    case 'PPPP':\n    default:\n      return formatLong.date({\n        width: 'full'\n      });\n  }\n}\n\nfunction timeLongFormatter(pattern, formatLong) {\n  switch (pattern) {\n    case 'p':\n      return formatLong.time({\n        width: 'short'\n      });\n\n    case 'pp':\n      return formatLong.time({\n        width: 'medium'\n      });\n\n    case 'ppp':\n      return formatLong.time({\n        width: 'long'\n      });\n\n    case 'pppp':\n    default:\n      return formatLong.time({\n        width: 'full'\n      });\n  }\n}\n\nfunction dateTimeLongFormatter(pattern, formatLong) {\n  var matchResult = pattern.match(/(P+)(p+)?/);\n  var datePattern = matchResult[1];\n  var timePattern = matchResult[2];\n\n  if (!timePattern) {\n    return dateLongFormatter(pattern, formatLong);\n  }\n\n  var dateTimeFormat;\n\n  switch (datePattern) {\n    case 'P':\n      dateTimeFormat = formatLong.dateTime({\n        width: 'short'\n      });\n      break;\n\n    case 'PP':\n      dateTimeFormat = formatLong.dateTime({\n        width: 'medium'\n      });\n      break;\n\n    case 'PPP':\n      dateTimeFormat = formatLong.dateTime({\n        width: 'long'\n      });\n      break;\n\n    case 'PPPP':\n    default:\n      dateTimeFormat = formatLong.dateTime({\n        width: 'full'\n      });\n      break;\n  }\n\n  return dateTimeFormat.replace('{{date}}', dateLongFormatter(datePattern, formatLong)).replace('{{time}}', timeLongFormatter(timePattern, formatLong));\n}\n\nvar longFormatters = {\n  p: timeLongFormatter,\n  P: dateTimeLongFormatter\n};\nexport default longFormatters;","var protectedDayOfYearTokens = ['D', 'DD'];\nvar protectedWeekYearTokens = ['YY', 'YYYY'];\nexport function isProtectedDayOfYearToken(token) {\n  return protectedDayOfYearTokens.indexOf(token) !== -1;\n}\nexport function isProtectedWeekYearToken(token) {\n  return protectedWeekYearTokens.indexOf(token) !== -1;\n}\nexport function throwProtectedError(token, format, input) {\n  if (token === 'YYYY') {\n    throw new RangeError(\"Use `yyyy` instead of `YYYY` (in `\".concat(format, \"`) for formatting years to the input `\").concat(input, \"`; see: https://git.io/fxCyr\"));\n  } else if (token === 'YY') {\n    throw new RangeError(\"Use `yy` instead of `YY` (in `\".concat(format, \"`) for formatting years to the input `\").concat(input, \"`; see: https://git.io/fxCyr\"));\n  } else if (token === 'D') {\n    throw new RangeError(\"Use `d` instead of `D` (in `\".concat(format, \"`) for formatting days of the month to the input `\").concat(input, \"`; see: https://git.io/fxCyr\"));\n  } else if (token === 'DD') {\n    throw new RangeError(\"Use `dd` instead of `DD` (in `\".concat(format, \"`) for formatting days of the month to the input `\").concat(input, \"`; see: https://git.io/fxCyr\"));\n  }\n}","import isValid from '../isValid/index.js';\nimport defaultLocale from '../locale/en-US/index.js';\nimport subMilliseconds from '../subMilliseconds/index.js';\nimport toDate from '../toDate/index.js';\nimport formatters from '../_lib/format/formatters/index.js';\nimport longFormatters from '../_lib/format/longFormatters/index.js';\nimport getTimezoneOffsetInMilliseconds from '../_lib/getTimezoneOffsetInMilliseconds/index.js';\nimport { isProtectedDayOfYearToken, isProtectedWeekYearToken, throwProtectedError } from '../_lib/protectedTokens/index.js';\nimport toInteger from '../_lib/toInteger/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js'; // This RegExp consists of three parts separated by `|`:\n// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token\n//   (one of the certain letters followed by `o`)\n// - (\\w)\\1* matches any sequences of the same letter\n// - '' matches two quote characters in a row\n// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),\n//   except a single quote symbol, which ends the sequence.\n//   Two quote characters do not end the sequence.\n//   If there is no matching single quote\n//   then the sequence will continue until the end of the string.\n// - . matches any single character unmatched by previous parts of the RegExps\n\nvar formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\\w)\\1*|''|'(''|[^'])+('|$)|./g; // This RegExp catches symbols escaped by quotes, and also\n// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`\n\nvar longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;\nvar escapedStringRegExp = /^'([^]*?)'?$/;\nvar doubleQuoteRegExp = /''/g;\nvar unescapedLatinCharacterRegExp = /[a-zA-Z]/;\n/**\n * @name format\n * @category Common Helpers\n * @summary Format the date.\n *\n * @description\n * Return the formatted date string in the given format. The result may vary by locale.\n *\n * > ⚠️ Please note that the `format` tokens differ from Moment.js and other libraries.\n * > See: https://git.io/fxCyr\n *\n * The characters wrapped between two single quotes characters (') are escaped.\n * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.\n * (see the last example)\n *\n * Format of the string is based on Unicode Technical Standard #35:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * with a few additions (see note 7 below the table).\n *\n * Accepted patterns:\n * | Unit                            | Pattern | Result examples                   | Notes |\n * |---------------------------------|---------|-----------------------------------|-------|\n * | Era                             | G..GGG  | AD, BC                            |       |\n * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |\n * |                                 | GGGGG   | A, B                              |       |\n * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |\n * |                                 | yy      | 44, 01, 00, 17                    | 5     |\n * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |\n * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |\n * |                                 | yyyyy   | ...                               | 3,5   |\n * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |\n * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |\n * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |\n * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |\n * |                                 | YYYYY   | ...                               | 3,5   |\n * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |\n * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |\n * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |\n * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |\n * |                                 | RRRRR   | ...                               | 3,5,7 |\n * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |\n * |                                 | uu      | -43, 01, 1900, 2017               | 5     |\n * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |\n * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |\n * |                                 | uuuuu   | ...                               | 3,5   |\n * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |\n * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | QQ      | 01, 02, 03, 04                    |       |\n * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |\n * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |\n * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | qq      | 01, 02, 03, 04                    |       |\n * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |\n * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |\n * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | MM      | 01, 02, ..., 12                   |       |\n * |                                 | MMM     | Jan, Feb, ..., Dec                |       |\n * |                                 | MMMM    | January, February, ..., December  | 2     |\n * |                                 | MMMMM   | J, F, ..., D                      |       |\n * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |\n * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | LL      | 01, 02, ..., 12                   |       |\n * |                                 | LLL     | Jan, Feb, ..., Dec                |       |\n * |                                 | LLLL    | January, February, ..., December  | 2     |\n * |                                 | LLLLL   | J, F, ..., D                      |       |\n * | Local week of year              | w       | 1, 2, ..., 53                     |       |\n * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | ww      | 01, 02, ..., 53                   |       |\n * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |\n * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | II      | 01, 02, ..., 53                   | 7     |\n * | Day of month                    | d       | 1, 2, ..., 31                     |       |\n * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |\n * |                                 | dd      | 01, 02, ..., 31                   |       |\n * | Day of year                     | D       | 1, 2, ..., 365, 366               | 9     |\n * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |\n * |                                 | DD      | 01, 02, ..., 365, 366             | 9     |\n * |                                 | DDD     | 001, 002, ..., 365, 366           |       |\n * |                                 | DDDD    | ...                               | 3     |\n * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |\n * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Su, Sa        |       |\n * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |\n * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |\n * |                                 | ii      | 01, 02, ..., 07                   | 7     |\n * |                                 | iii     | Mon, Tue, Wed, ..., Sun           | 7     |\n * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |\n * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |\n * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Su, Sa        | 7     |\n * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |\n * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | ee      | 02, 03, ..., 01                   |       |\n * |                                 | eee     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | eeeee   | M, T, W, T, F, S, S               |       |\n * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Su, Sa        |       |\n * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |\n * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | cc      | 02, 03, ..., 01                   |       |\n * |                                 | ccc     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | ccccc   | M, T, W, T, F, S, S               |       |\n * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Su, Sa        |       |\n * | AM, PM                          | a..aaa  | AM, PM                            |       |\n * |                                 | aaaa    | a.m., p.m.                        | 2     |\n * |                                 | aaaaa   | a, p                              |       |\n * | AM, PM, noon, midnight          | b..bbb  | AM, PM, noon, midnight            |       |\n * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |\n * |                                 | bbbbb   | a, p, n, mi                       |       |\n * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |\n * |                                 | BBBB    | at night, in the morning, ...     | 2     |\n * |                                 | BBBBB   | at night, in the morning, ...     |       |\n * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |\n * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |\n * |                                 | hh      | 01, 02, ..., 11, 12               |       |\n * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |\n * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |\n * |                                 | HH      | 00, 01, 02, ..., 23               |       |\n * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |\n * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |\n * |                                 | KK      | 01, 02, ..., 11, 00               |       |\n * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |\n * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |\n * |                                 | kk      | 24, 01, 02, ..., 23               |       |\n * | Minute                          | m       | 0, 1, ..., 59                     |       |\n * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | mm      | 00, 01, ..., 59                   |       |\n * | Second                          | s       | 0, 1, ..., 59                     |       |\n * |                                 | so      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | ss      | 00, 01, ..., 59                   |       |\n * | Fraction of second              | S       | 0, 1, ..., 9                      |       |\n * |                                 | SS      | 00, 01, ..., 99                   |       |\n * |                                 | SSS     | 000, 0001, ..., 999               |       |\n * |                                 | SSSS    | ...                               | 3     |\n * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |\n * |                                 | XX      | -0800, +0530, Z                   |       |\n * |                                 | XXX     | -08:00, +05:30, Z                 |       |\n * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |\n * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |\n * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |\n * |                                 | xx      | -0800, +0530, +0000               |       |\n * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |\n * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |\n * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |\n * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |\n * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |\n * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |\n * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |\n * | Seconds timestamp               | t       | 512969520                         | 7     |\n * |                                 | tt      | ...                               | 3,7   |\n * | Milliseconds timestamp          | T       | 512969520900                      | 7     |\n * |                                 | TT      | ...                               | 3,7   |\n * | Long localized date             | P       | 05/29/1453                        | 7     |\n * |                                 | PP      | May 29, 1453                      | 7     |\n * |                                 | PPP     | May 29th, 1453                    | 7     |\n * |                                 | PPPP    | Sunday, May 29th, 1453            | 2,7   |\n * | Long localized time             | p       | 12:00 AM                          | 7     |\n * |                                 | pp      | 12:00:00 AM                       | 7     |\n * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |\n * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |\n * | Combination of date and time    | Pp      | 05/29/1453, 12:00 AM              | 7     |\n * |                                 | PPpp    | May 29, 1453, 12:00:00 AM         | 7     |\n * |                                 | PPPppp  | May 29th, 1453 at ...             | 7     |\n * |                                 | PPPPpppp| Sunday, May 29th, 1453 at ...     | 2,7   |\n * Notes:\n * 1. \"Formatting\" units (e.g. formatting quarter) in the default en-US locale\n *    are the same as \"stand-alone\" units, but are different in some languages.\n *    \"Formatting\" units are declined according to the rules of the language\n *    in the context of a date. \"Stand-alone\" units are always nominative singular:\n *\n *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`\n *\n *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`\n *\n * 2. Any sequence of the identical letters is a pattern, unless it is escaped by\n *    the single quote characters (see below).\n *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)\n *    the output will be the same as default pattern for this unit, usually\n *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units\n *    are marked with \"2\" in the last column of the table.\n *\n *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`\n *\n * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).\n *    The output will be padded with zeros to match the length of the pattern.\n *\n *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`\n *\n * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.\n *    These tokens represent the shortest form of the quarter.\n *\n * 5. The main difference between `y` and `u` patterns are B.C. years:\n *\n *    | Year | `y` | `u` |\n *    |------|-----|-----|\n *    | AC 1 |   1 |   1 |\n *    | BC 1 |   1 |   0 |\n *    | BC 2 |   2 |  -1 |\n *\n *    Also `yy` always returns the last two digits of a year,\n *    while `uu` pads single digit years to 2 characters and returns other years unchanged:\n *\n *    | Year | `yy` | `uu` |\n *    |------|------|------|\n *    | 1    |   01 |   01 |\n *    | 14   |   14 |   14 |\n *    | 376  |   76 |  376 |\n *    | 1453 |   53 | 1453 |\n *\n *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),\n *    except local week-numbering years are dependent on `options.weekStartsOn`\n *    and `options.firstWeekContainsDate` (compare [getISOWeekYear]{@link https://date-fns.org/docs/getISOWeekYear}\n *    and [getWeekYear]{@link https://date-fns.org/docs/getWeekYear}).\n *\n * 6. Specific non-location timezones are currently unavailable in `date-fns`,\n *    so right now these tokens fall back to GMT timezones.\n *\n * 7. These patterns are not in the Unicode Technical Standard #35:\n *    - `i`: ISO day of week\n *    - `I`: ISO week of year\n *    - `R`: ISO week-numbering year\n *    - `t`: seconds timestamp\n *    - `T`: milliseconds timestamp\n *    - `o`: ordinal number modifier\n *    - `P`: long localized date\n *    - `p`: long localized time\n *\n * 8. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.\n *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://git.io/fxCyr\n *\n * 9. `D` and `DD` tokens represent days of the year but they are ofthen confused with days of the month.\n *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://git.io/fxCyr\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * - The second argument is now required for the sake of explicitness.\n *\n *   ```javascript\n *   // Before v2.0.0\n *   format(new Date(2016, 0, 1))\n *\n *   // v2.0.0 onward\n *   format(new Date(2016, 0, 1), \"yyyy-MM-dd'T'HH:mm:ss.SSSxxx\")\n *   ```\n *\n * - New format string API for `format` function\n *   which is based on [Unicode Technical Standard #35](https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table).\n *   See [this post](https://blog.date-fns.org/post/unicode-tokens-in-date-fns-v2-sreatyki91jg) for more details.\n *\n * - Characters are now escaped using single quote symbols (`'`) instead of square brackets.\n *\n * @param {Date|Number} date - the original date\n * @param {String} format - the string of tokens\n * @param {Object} [options] - an object with options.\n * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}\n * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)\n * @param {Number} [options.firstWeekContainsDate=1] - the day of January, which is\n * @param {Boolean} [options.useAdditionalWeekYearTokens=false] - if true, allows usage of the week-numbering year tokens `YY` and `YYYY`;\n *   see: https://git.io/fxCyr\n * @param {Boolean} [options.useAdditionalDayOfYearTokens=false] - if true, allows usage of the day of year tokens `D` and `DD`;\n *   see: https://git.io/fxCyr\n * @returns {String} the formatted date string\n * @throws {TypeError} 2 arguments required\n * @throws {RangeError} `date` must not be Invalid Date\n * @throws {RangeError} `options.locale` must contain `localize` property\n * @throws {RangeError} `options.locale` must contain `formatLong` property\n * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6\n * @throws {RangeError} `options.firstWeekContainsDate` must be between 1 and 7\n * @throws {RangeError} use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://git.io/fxCyr\n * @throws {RangeError} use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://git.io/fxCyr\n * @throws {RangeError} use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://git.io/fxCyr\n * @throws {RangeError} use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://git.io/fxCyr\n * @throws {RangeError} format string contains an unescaped latin alphabet character\n *\n * @example\n * // Represent 11 February 2014 in middle-endian format:\n * var result = format(new Date(2014, 1, 11), 'MM/dd/yyyy')\n * //=> '02/11/2014'\n *\n * @example\n * // Represent 2 July 2014 in Esperanto:\n * import { eoLocale } from 'date-fns/locale/eo'\n * var result = format(new Date(2014, 6, 2), \"do 'de' MMMM yyyy\", {\n *   locale: eoLocale\n * })\n * //=> '2-a de julio 2014'\n *\n * @example\n * // Escape string by single quote characters:\n * var result = format(new Date(2014, 6, 2, 15), \"h 'o''clock'\")\n * //=> \"3 o'clock\"\n */\n\nexport default function format(dirtyDate, dirtyFormatStr, dirtyOptions) {\n  requiredArgs(2, arguments);\n  var formatStr = String(dirtyFormatStr);\n  var options = dirtyOptions || {};\n  var locale = options.locale || defaultLocale;\n  var localeFirstWeekContainsDate = locale.options && locale.options.firstWeekContainsDate;\n  var defaultFirstWeekContainsDate = localeFirstWeekContainsDate == null ? 1 : toInteger(localeFirstWeekContainsDate);\n  var firstWeekContainsDate = options.firstWeekContainsDate == null ? defaultFirstWeekContainsDate : toInteger(options.firstWeekContainsDate); // Test if weekStartsOn is between 1 and 7 _and_ is not NaN\n\n  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {\n    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');\n  }\n\n  var localeWeekStartsOn = locale.options && locale.options.weekStartsOn;\n  var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : toInteger(localeWeekStartsOn);\n  var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : toInteger(options.weekStartsOn); // Test if weekStartsOn is between 0 and 6 _and_ is not NaN\n\n  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');\n  }\n\n  if (!locale.localize) {\n    throw new RangeError('locale must contain localize property');\n  }\n\n  if (!locale.formatLong) {\n    throw new RangeError('locale must contain formatLong property');\n  }\n\n  var originalDate = toDate(dirtyDate);\n\n  if (!isValid(originalDate)) {\n    throw new RangeError('Invalid time value');\n  } // Convert the date in system timezone to the same date in UTC+00:00 timezone.\n  // This ensures that when UTC functions will be implemented, locales will be compatible with them.\n  // See an issue about UTC functions: https://github.com/date-fns/date-fns/issues/376\n\n\n  var timezoneOffset = getTimezoneOffsetInMilliseconds(originalDate);\n  var utcDate = subMilliseconds(originalDate, timezoneOffset);\n  var formatterOptions = {\n    firstWeekContainsDate: firstWeekContainsDate,\n    weekStartsOn: weekStartsOn,\n    locale: locale,\n    _originalDate: originalDate\n  };\n  var result = formatStr.match(longFormattingTokensRegExp).map(function (substring) {\n    var firstCharacter = substring[0];\n\n    if (firstCharacter === 'p' || firstCharacter === 'P') {\n      var longFormatter = longFormatters[firstCharacter];\n      return longFormatter(substring, locale.formatLong, formatterOptions);\n    }\n\n    return substring;\n  }).join('').match(formattingTokensRegExp).map(function (substring) {\n    // Replace two single quote characters with one single quote character\n    if (substring === \"''\") {\n      return \"'\";\n    }\n\n    var firstCharacter = substring[0];\n\n    if (firstCharacter === \"'\") {\n      return cleanEscapedString(substring);\n    }\n\n    var formatter = formatters[firstCharacter];\n\n    if (formatter) {\n      if (!options.useAdditionalWeekYearTokens && isProtectedWeekYearToken(substring)) {\n        throwProtectedError(substring, dirtyFormatStr, dirtyDate);\n      }\n\n      if (!options.useAdditionalDayOfYearTokens && isProtectedDayOfYearToken(substring)) {\n        throwProtectedError(substring, dirtyFormatStr, dirtyDate);\n      }\n\n      return formatter(utcDate, substring, locale.localize, formatterOptions);\n    }\n\n    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {\n      throw new RangeError('Format string contains an unescaped latin alphabet character `' + firstCharacter + '`');\n    }\n\n    return substring;\n  }).join('');\n  return result;\n}\n\nfunction cleanEscapedString(input) {\n  return input.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp, \"'\");\n}","import toDate from '../toDate/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name getISODay\n * @category Weekday Helpers\n * @summary Get the day of the ISO week of the given date.\n *\n * @description\n * Get the day of the ISO week of the given date,\n * which is 7 for Sunday, 1 for Monday etc.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the given date\n * @returns {Number} the day of ISO week\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Which day of the ISO week is 26 February 2012?\n * var result = getISODay(new Date(2012, 1, 26))\n * //=> 7\n */\n\nexport default function getISODay(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var day = date.getDay();\n\n  if (day === 0) {\n    day = 7;\n  }\n\n  return day;\n}","import toInteger from '../_lib/toInteger/index.js';\nimport toDate from '../toDate/index.js';\nimport addDays from '../addDays/index.js';\nimport getISODay from '../getISODay/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name setISODay\n * @category Weekday Helpers\n * @summary Set the day of the ISO week to the given date.\n *\n * @description\n * Set the day of the ISO week to the given date.\n * ISO week starts with Monday.\n * 7 is the index of Sunday, 1 is the index of Monday etc.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} day - the day of the ISO week of the new date\n * @returns {Date} the new date with the day of the ISO week set\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Set Sunday to 1 September 2014:\n * var result = setISODay(new Date(2014, 8, 1), 7)\n * //=> Sun Sep 07 2014 00:00:00\n */\n\nexport default function setISODay(dirtyDate, dirtyDay) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var day = toInteger(dirtyDay);\n  var currentDay = getISODay(date);\n  var diff = day - currentDay;\n  return addDays(date, diff);\n}","import { pure, __ } from 'riot';\n\n/**\n * Tokenize input string.\n */\nfunction lexer(str) {\n  var tokens = [];\n  var i = 0;\n\n  while (i < str.length) {\n    var char = str[i];\n\n    if (char === \"*\" || char === \"+\" || char === \"?\") {\n      tokens.push({\n        type: \"MODIFIER\",\n        index: i,\n        value: str[i++]\n      });\n      continue;\n    }\n\n    if (char === \"\\\\\") {\n      tokens.push({\n        type: \"ESCAPED_CHAR\",\n        index: i++,\n        value: str[i++]\n      });\n      continue;\n    }\n\n    if (char === \"{\") {\n      tokens.push({\n        type: \"OPEN\",\n        index: i,\n        value: str[i++]\n      });\n      continue;\n    }\n\n    if (char === \"}\") {\n      tokens.push({\n        type: \"CLOSE\",\n        index: i,\n        value: str[i++]\n      });\n      continue;\n    }\n\n    if (char === \":\") {\n      var name = \"\";\n      var j = i + 1;\n\n      while (j < str.length) {\n        var code = str.charCodeAt(j);\n\n        if ( // `0-9`\n        code >= 48 && code <= 57 || // `A-Z`\n        code >= 65 && code <= 90 || // `a-z`\n        code >= 97 && code <= 122 || // `_`\n        code === 95) {\n          name += str[j++];\n          continue;\n        }\n\n        break;\n      }\n\n      if (!name) throw new TypeError(\"Missing parameter name at \" + i);\n      tokens.push({\n        type: \"NAME\",\n        index: i,\n        value: name\n      });\n      i = j;\n      continue;\n    }\n\n    if (char === \"(\") {\n      var count = 1;\n      var pattern = \"\";\n      var j = i + 1;\n\n      if (str[j] === \"?\") {\n        throw new TypeError(\"Pattern cannot start with \\\"?\\\" at \" + j);\n      }\n\n      while (j < str.length) {\n        if (str[j] === \"\\\\\") {\n          pattern += str[j++] + str[j++];\n          continue;\n        }\n\n        if (str[j] === \")\") {\n          count--;\n\n          if (count === 0) {\n            j++;\n            break;\n          }\n        } else if (str[j] === \"(\") {\n          count++;\n\n          if (str[j + 1] !== \"?\") {\n            throw new TypeError(\"Capturing groups are not allowed at \" + j);\n          }\n        }\n\n        pattern += str[j++];\n      }\n\n      if (count) throw new TypeError(\"Unbalanced pattern at \" + i);\n      if (!pattern) throw new TypeError(\"Missing pattern at \" + i);\n      tokens.push({\n        type: \"PATTERN\",\n        index: i,\n        value: pattern\n      });\n      i = j;\n      continue;\n    }\n\n    tokens.push({\n      type: \"CHAR\",\n      index: i,\n      value: str[i++]\n    });\n  }\n\n  tokens.push({\n    type: \"END\",\n    index: i,\n    value: \"\"\n  });\n  return tokens;\n}\n/**\n * Parse a string for the raw tokens.\n */\n\n\nfunction parse(str, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var tokens = lexer(str);\n  var _a = options.prefixes,\n      prefixes = _a === void 0 ? \"./\" : _a;\n  var defaultPattern = \"[^\" + escapeString(options.delimiter || \"/#?\") + \"]+?\";\n  var result = [];\n  var key = 0;\n  var i = 0;\n  var path = \"\";\n\n  var tryConsume = function tryConsume(type) {\n    if (i < tokens.length && tokens[i].type === type) return tokens[i++].value;\n  };\n\n  var mustConsume = function mustConsume(type) {\n    var value = tryConsume(type);\n    if (value !== undefined) return value;\n    var _a = tokens[i],\n        nextType = _a.type,\n        index = _a.index;\n    throw new TypeError(\"Unexpected \" + nextType + \" at \" + index + \", expected \" + type);\n  };\n\n  var consumeText = function consumeText() {\n    var result = \"\";\n    var value; // tslint:disable-next-line\n\n    while (value = tryConsume(\"CHAR\") || tryConsume(\"ESCAPED_CHAR\")) {\n      result += value;\n    }\n\n    return result;\n  };\n\n  while (i < tokens.length) {\n    var char = tryConsume(\"CHAR\");\n    var name = tryConsume(\"NAME\");\n    var pattern = tryConsume(\"PATTERN\");\n\n    if (name || pattern) {\n      var prefix = char || \"\";\n\n      if (prefixes.indexOf(prefix) === -1) {\n        path += prefix;\n        prefix = \"\";\n      }\n\n      if (path) {\n        result.push(path);\n        path = \"\";\n      }\n\n      result.push({\n        name: name || key++,\n        prefix: prefix,\n        suffix: \"\",\n        pattern: pattern || defaultPattern,\n        modifier: tryConsume(\"MODIFIER\") || \"\"\n      });\n      continue;\n    }\n\n    var value = char || tryConsume(\"ESCAPED_CHAR\");\n\n    if (value) {\n      path += value;\n      continue;\n    }\n\n    if (path) {\n      result.push(path);\n      path = \"\";\n    }\n\n    var open = tryConsume(\"OPEN\");\n\n    if (open) {\n      var prefix = consumeText();\n      var name_1 = tryConsume(\"NAME\") || \"\";\n      var pattern_1 = tryConsume(\"PATTERN\") || \"\";\n      var suffix = consumeText();\n      mustConsume(\"CLOSE\");\n      result.push({\n        name: name_1 || (pattern_1 ? key++ : \"\"),\n        pattern: name_1 && !pattern_1 ? defaultPattern : pattern_1,\n        prefix: prefix,\n        suffix: suffix,\n        modifier: tryConsume(\"MODIFIER\") || \"\"\n      });\n      continue;\n    }\n\n    mustConsume(\"END\");\n  }\n\n  return result;\n}\n/**\n * Compile a string to a template function for the path.\n */\n\nfunction compile(str, options) {\n  return tokensToFunction(parse(str, options), options);\n}\n/**\n * Expose a method for transforming tokens into the path function.\n */\n\nfunction tokensToFunction(tokens, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var reFlags = flags(options);\n  var _a = options.encode,\n      encode = _a === void 0 ? function (x) {\n    return x;\n  } : _a,\n      _b = options.validate,\n      validate = _b === void 0 ? true : _b; // Compile all the tokens into regexps.\n\n  var matches = tokens.map(function (token) {\n    if (typeof token === \"object\") {\n      return new RegExp(\"^(?:\" + token.pattern + \")$\", reFlags);\n    }\n  });\n  return function (data) {\n    var path = \"\";\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n\n      if (typeof token === \"string\") {\n        path += token;\n        continue;\n      }\n\n      var value = data ? data[token.name] : undefined;\n      var optional = token.modifier === \"?\" || token.modifier === \"*\";\n      var repeat = token.modifier === \"*\" || token.modifier === \"+\";\n\n      if (Array.isArray(value)) {\n        if (!repeat) {\n          throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to not repeat, but got an array\");\n        }\n\n        if (value.length === 0) {\n          if (optional) continue;\n          throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to not be empty\");\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          var segment = encode(value[j], token);\n\n          if (validate && !matches[i].test(segment)) {\n            throw new TypeError(\"Expected all \\\"\" + token.name + \"\\\" to match \\\"\" + token.pattern + \"\\\", but got \\\"\" + segment + \"\\\"\");\n          }\n\n          path += token.prefix + segment + token.suffix;\n        }\n\n        continue;\n      }\n\n      if (typeof value === \"string\" || typeof value === \"number\") {\n        var segment = encode(String(value), token);\n\n        if (validate && !matches[i].test(segment)) {\n          throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to match \\\"\" + token.pattern + \"\\\", but got \\\"\" + segment + \"\\\"\");\n        }\n\n        path += token.prefix + segment + token.suffix;\n        continue;\n      }\n\n      if (optional) continue;\n      var typeOfMessage = repeat ? \"an array\" : \"a string\";\n      throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to be \" + typeOfMessage);\n    }\n\n    return path;\n  };\n}\n/**\n * Escape a regular expression string.\n */\n\nfunction escapeString(str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n}\n/**\n * Get the flags for a regexp from the options.\n */\n\n\nfunction flags(options) {\n  return options && options.sensitive ? \"\" : \"i\";\n}\n/**\n * Pull out keys from a regexp.\n */\n\n\nfunction regexpToRegexp(path, keys) {\n  if (!keys) return path; // Use a negative lookahead to match only capturing groups.\n\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: \"\",\n        suffix: \"\",\n        modifier: \"\",\n        pattern: \"\"\n      });\n    }\n  }\n\n  return path;\n}\n/**\n * Transform an array into a regexp.\n */\n\n\nfunction arrayToRegexp(paths, keys, options) {\n  var parts = paths.map(function (path) {\n    return pathToRegexp(path, keys, options).source;\n  });\n  return new RegExp(\"(?:\" + parts.join(\"|\") + \")\", flags(options));\n}\n/**\n * Create a path regexp from string input.\n */\n\n\nfunction stringToRegexp(path, keys, options) {\n  return tokensToRegexp(parse(path, options), keys, options);\n}\n/**\n * Expose a function for taking tokens and returning a RegExp.\n */\n\n\nfunction tokensToRegexp(tokens, keys, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _a = options.strict,\n      strict = _a === void 0 ? false : _a,\n      _b = options.start,\n      start = _b === void 0 ? true : _b,\n      _c = options.end,\n      end = _c === void 0 ? true : _c,\n      _d = options.encode,\n      encode = _d === void 0 ? function (x) {\n    return x;\n  } : _d;\n  var endsWith = \"[\" + escapeString(options.endsWith || \"\") + \"]|$\";\n  var delimiter = \"[\" + escapeString(options.delimiter || \"/#?\") + \"]\";\n  var route = start ? \"^\" : \"\"; // Iterate over the tokens and create our regexp string.\n\n  for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n    var token = tokens_1[_i];\n\n    if (typeof token === \"string\") {\n      route += escapeString(encode(token));\n    } else {\n      var prefix = escapeString(encode(token.prefix));\n      var suffix = escapeString(encode(token.suffix));\n\n      if (token.pattern) {\n        if (keys) keys.push(token);\n\n        if (prefix || suffix) {\n          if (token.modifier === \"+\" || token.modifier === \"*\") {\n            var mod = token.modifier === \"*\" ? \"?\" : \"\";\n            route += \"(?:\" + prefix + \"((?:\" + token.pattern + \")(?:\" + suffix + prefix + \"(?:\" + token.pattern + \"))*)\" + suffix + \")\" + mod;\n          } else {\n            route += \"(?:\" + prefix + \"(\" + token.pattern + \")\" + suffix + \")\" + token.modifier;\n          }\n        } else {\n          route += \"(\" + token.pattern + \")\" + token.modifier;\n        }\n      } else {\n        route += \"(?:\" + prefix + suffix + \")\" + token.modifier;\n      }\n    }\n  }\n\n  if (end) {\n    if (!strict) route += delimiter + \"?\";\n    route += !options.endsWith ? \"$\" : \"(?=\" + endsWith + \")\";\n  } else {\n    var endToken = tokens[tokens.length - 1];\n    var isEndDelimited = typeof endToken === \"string\" ? delimiter.indexOf(endToken[endToken.length - 1]) > -1 : // tslint:disable-next-line\n    endToken === undefined;\n\n    if (!strict) {\n      route += \"(?:\" + delimiter + \"(?=\" + endsWith + \"))?\";\n    }\n\n    if (!isEndDelimited) {\n      route += \"(?=\" + delimiter + \"|\" + endsWith + \")\";\n    }\n  }\n\n  return new RegExp(route, flags(options));\n}\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n */\n\nfunction pathToRegexp(path, keys, options) {\n  if (path instanceof RegExp) return regexpToRegexp(path, keys);\n  if (Array.isArray(path)) return arrayToRegexp(path, keys, options);\n  return stringToRegexp(path, keys, options);\n}\n\n/**\n * Cancel token\n * @private\n * @type { Symbol }\n */\nconst CANCEL = Symbol();\n/**\n * Helper that can be returned by ruit function to cancel the tasks chain\n * @returns { Symbol } internal private constant\n * @example\n *\n * ruit(\n *   100,\n *   num => Math.random() * num\n *   num => num > 50 ? ruit.cancel() : num\n *   num => num - 2\n * ).then(result => {\n *   console.log(result) // here we will get only number lower than 50\n * })\n *\n */\n\nruit.cancel = () => CANCEL;\n/**\n * The same as ruit() but with the arguments inverted from right to left\n * @param   { * } tasks - list of tasks to process sequentially\n * @returns { Promise } a promise containing the result of the whole chain\n * @example\n *\n * const curry = f => a => b => f(a, b)\n * const add = (a, b) => a + b\n *\n * const addOne = curry(add)(1)\n *\n * const squareAsync = (num) => {\n *   return new Promise(r => {\n *     setTimeout(r, 500, num * 2)\n *   })\n * }\n *\n * // a -> a + a -> a * 2\n * // basically from right to left: 1 => 1 + 1 => 2 * 2\n * ruit.compose(squareAsync, addOne, 1).then(result => console.log(result)) // 4\n */\n\n\nruit.compose = function () {\n  for (var _len = arguments.length, tasks = new Array(_len), _key = 0; _key < _len; _key++) {\n    tasks[_key] = arguments[_key];\n  }\n\n  return ruit(...tasks.reverse());\n};\n/**\n * Serialize a list of sync and async tasks from left to right\n * @param   { * } tasks - list of tasks to process sequentially\n * @returns { Promise } a promise containing the result of the whole chain\n * @example\n *\n * const curry = f => a => b => f(a, b)\n * const add = (a, b) => a + b\n *\n * const addOne = curry(add)(1)\n *\n * const squareAsync = (num) => {\n *   return new Promise(r => {\n *     setTimeout(r, 500, num * 2)\n *   })\n * }\n *\n * // a -> a + a -> a * 2\n * // basically from left to right: 1 => 1 + 1 => 2 * 2\n * ruit(1, addOne, squareAsync).then(result => console.log(result)) // 4\n */\n\n\nfunction ruit() {\n  for (var _len2 = arguments.length, tasks = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    tasks[_key2] = arguments[_key2];\n  }\n\n  return new Promise((resolve, reject) => {\n    return function run(queue, result) {\n      if (!queue.length) return resolve(result);\n      const [task, ...rest] = queue;\n      const value = typeof task === 'function' ? task(result) : task;\n\n      const done = v => run(rest, v); // check against nil values\n\n\n      if (value != null) {\n        if (value === CANCEL) return;\n        if (value.then) return value.then(done, reject);\n      }\n\n      return Promise.resolve(done(value));\n    }(tasks);\n  });\n}\n\nconst API_METHODS = new Set();\nconst UNSUBSCRIBE_SYMBOL = Symbol();\nconst UNSUBSCRIBE_METHOD = 'off';\nconst CANCEL_METHOD = 'cancel';\n/**\n * Factory function to create the stream generator\n * @private\n * @param {Set} modifiers - stream input modifiers\n * @returns {Generator} the stream generator\n */\n\nfunction createStream(modifiers) {\n  const stream = function* stream() {\n    while (true) {\n      // get the initial stream value\n      const input = yield; // run the input sequence\n\n      yield ruit(input, ...modifiers);\n    }\n  }(); // start the stream\n\n\n  stream.next();\n  return stream;\n}\n/**\n * Dispatch a value to several listeners\n * @private\n * @param   {Set} callbacks - callbacks collection\n * @param   {*} value - anything\n * @returns {Set} the callbacks received\n */\n\n\nfunction dispatch(callbacks, value) {\n  callbacks.forEach(f => {\n    // unsubscribe the callback if erre.unsubscribe() will be returned\n    if (f(value) === UNSUBSCRIBE_SYMBOL) callbacks.delete(f);\n  });\n  return callbacks;\n}\n/**\n * Throw a panic error\n * @param {string} message - error message\n * @returns {Error} an error object\n */\n\n\nfunction panic(message) {\n  throw new Error(message);\n}\n/**\n * Install an erre plugin adding it to the API\n * @param   {string} name - plugin name\n * @param   {Function} fn - new erre API method\n * @returns {Function} return the erre function\n */\n\n\nerre.install = function (name, fn) {\n  if (!name || typeof name !== 'string') panic('Please provide a name (as string) for your erre plugin');\n  if (!fn || typeof fn !== 'function') panic('Please provide a function for your erre plugin');\n\n  if (API_METHODS.has(name)) {\n    panic(`The ${name} is already part of the erre API, please provide a different name`);\n  } else {\n    erre[name] = fn;\n    API_METHODS.add(name);\n  }\n\n  return erre;\n}; // alias for ruit canel to stop a stream chain\n\n\nerre.install(CANCEL_METHOD, ruit.cancel); // unsubscribe helper\n\nerre.install(UNSUBSCRIBE_METHOD, () => UNSUBSCRIBE_SYMBOL);\n/**\n * Stream constuction function\n * @param   {...Function} fns - stream modifiers\n * @returns {Object} erre instance\n */\n\nfunction erre() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  const [success, error, end, modifiers] = [new Set(), new Set(), new Set(), new Set(fns)],\n        generator = createStream(modifiers),\n        stream = Object.create(generator),\n        addToCollection = collection => fn => collection.add(fn) && stream,\n        deleteFromCollection = collection => fn => collection.delete(fn) ? stream : panic('Couldn\\'t remove handler passed by reference');\n\n  return Object.assign(stream, {\n    on: Object.freeze({\n      value: addToCollection(success),\n      error: addToCollection(error),\n      end: addToCollection(end)\n    }),\n    off: Object.freeze({\n      value: deleteFromCollection(success),\n      error: deleteFromCollection(error),\n      end: deleteFromCollection(end)\n    }),\n    connect: addToCollection(modifiers),\n\n    push(input) {\n      const {\n        value,\n        done\n      } = stream.next(input); // dispatch the stream events\n\n      if (!done) {\n        value.then(res => dispatch(success, res), err => dispatch(error, err));\n      }\n\n      return stream;\n    },\n\n    end() {\n      // kill the stream\n      generator.return(); // dispatch the end event\n\n      dispatch(end) // clean up all the collections\n      ;\n      [success, error, end, modifiers].forEach(el => el.clear());\n      return stream;\n    },\n\n    fork() {\n      return erre(...modifiers);\n    },\n\n    next(input) {\n      // get the input and run eventually the promise\n      const result = generator.next(input); // pause to the next iteration\n\n      generator.next();\n      return result;\n    }\n\n  });\n}\n\nconst isNode = typeof process !== 'undefined';\n\nconst isString = str => typeof str === 'string'; // the url parsing function depends on the platform, on node we rely on the 'url' module\n\n/* istanbul ignore next */\n\n\nconst parseURL = function parseURL() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return isNode ? require('url').parse(...args) : new URL(...args);\n};\n/**\n * Replace the base path from a path\n * @param   {string} path - router path string\n * @returns {string} path cleaned up without the base\n */\n\n\nconst replaceBase = path => path.replace(defaults.base, '');\n/**\n * Try to match the current path or skip it\n * @param   {RegEx} pathRegExp - target path transformed by pathToRegexp\n * @returns {string|Symbol} if the path match we return it otherwise we cancel the stream\n */\n\n\nconst matchOrSkip = pathRegExp => path => match(path, pathRegExp) ? path : erre.cancel();\n/**\n * Combine 2 streams connecting the events of dispatcherStream to the receiverStream\n * @param   {Stream} dispatcherStream - main stream dispatching events\n * @param   {Stream} receiverStream - sub stream receiving events from the dispatcher\n * @returns {Stream} receiverStream\n */\n\n\nconst joinStreams = (dispatcherStream, receiverStream) => {\n  dispatcherStream.on.value(receiverStream.push);\n  receiverStream.on.end(() => {\n    dispatcherStream.off.value(receiverStream.push);\n  });\n  return receiverStream;\n};\n/**\n * Error handling function\n * @param   {Error} error - error to catch\n * @returns {void}\n */\n\n\nconst panic$1 = error => {\n  if (defaults.silentErrors) return;\n  throw new Error(error);\n}; // make sure that the router will always receive strings params\n\n\nconst filterStrings = str => isString(str) ? str : erre.cancel(); // create the streaming router\n\nconst router = erre(filterStrings).on.error(panic$1); // cast the values of this stream always to string\n\n/* @type {object} general configuration object */\n\nconst defaults = {\n  // custom option\n  base: '',\n  silentErrors: false,\n  // pathToRegexp options\n  sensitive: false,\n  strict: false,\n  end: true,\n  start: true,\n  delimiter: '/#?',\n  encode: undefined,\n  endsWith: undefined,\n  prefixes: './'\n};\n/**\n * Merge the user options with the defaults\n * @param   {Object} options - custom user options\n * @returns {Object} options object merged with defaults\n */\n\nconst mergeOptions = options => Object.assign({}, defaults, options);\n/* {@link https://github.com/pillarjs/path-to-regexp#usage} */\n\nconst toRegexp = (path, keys, options) => pathToRegexp(path, keys, mergeOptions(options));\n/**\n * Convert a router entry to a real path computing the url parameters\n * @param   {string} path - router path string\n * @param   {Object} params - named matched parameters\n * @param   {Object} options - pathToRegexp options object\n * @returns {string} computed url string\n */\n\nconst toPath = (path, params, options) => compile(path, mergeOptions(options))(params);\n/**\n * Parse a string path generating an object containing\n * @param   {string} path - target path\n * @param   {RegExp} pathRegExp - path transformed to regexp via pathToRegexp\n * @param   {Object} options - object containing the base path\n * @returns {URL} url object enhanced with the `match` attribute\n */\n\nconst toURL = function toURL(path, pathRegExp, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  const {\n    base\n  } = mergeOptions(options);\n  const [, ...params] = pathRegExp.exec(path);\n  const url = parseURL(path, base); // extend the url object adding the matched params\n\n  url.params = params.reduce((acc, param, index) => {\n    const key = options.keys && options.keys[index];\n    if (key) acc[key.name] = param;\n    return acc;\n  }, {});\n  return url;\n};\n/**\n * Return true if a path will be matched\n * @param   {string} path - target path\n * @param   {RegExp} pathRegExp - path transformed to regexp via pathToRegexp\n * @returns {boolean} true if the path matches the regexp\n */\n\nconst match = (path, pathRegExp) => pathRegExp.test(path);\n/**\n * Factory function to create an sequence of functions to pass to erre.js\n * This function will be used in the erre stream\n * @param   {RegExp} pathRegExp - path transformed to regexp via pathToRegexp\n * @param   {Object} options - pathToRegexp options object\n * @returns {Array} a functions array that will be used as stream pipe for erre.js\n */\n\nconst createURLStreamPipe = (pathRegExp, options) => [replaceBase, matchOrSkip(pathRegExp), path => toURL(path, pathRegExp, options)];\n/**\n * Create a fork of the main router stream\n * @param   {string} path - route to match\n * @param   {Object} options - pathToRegexp options object\n * @returns {Stream} new route stream\n */\n\nfunction createRoute(path, options) {\n  const keys = [];\n  const pathRegExp = pathToRegexp(path, keys, options);\n  const URLStream = erre(...createURLStreamPipe(pathRegExp, Object.assign({}, options, {\n    keys\n  })));\n  return joinStreams(router, URLStream).on.error(panic$1);\n}\n\nconst getCurrentRoute = (currentRoute => {\n  // listen the route changes events to store the current route\n  router.on.value(r => currentRoute = r);\n  return () => {\n    return currentRoute;\n  };\n})(null);\n\n/**\n * Similar to compose but performs from left-to-right function composition.<br/>\n * {@link https://30secondsofcode.org/function#composeright see also}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n/**\n * Performs right-to-left function composition.<br/>\n * Use Array.prototype.reduce() to perform right-to-left function composition.<br/>\n * The last (rightmost) function can accept one or more arguments; the remaining functions must be unary.<br/>\n * {@link https://30secondsofcode.org/function#compose original source code}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n\nfunction compose() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return fns.reduce((f, g) => function () {\n    return f(g(...arguments));\n  });\n}\n\nconst getInitialRouteValue = (pathToRegexp, path, options) => {\n  const route = compose(\n    ...createURLStreamPipe(pathToRegexp, options).reverse()\n  )(path);\n\n  return route.params ? route : null\n};\n\nvar routeHoc = {\n  'css': null,\n\n  'exports': {\n    onBeforeMount(props) {\n      const currentRoute = getCurrentRoute();\n      const pathToRegexp = toRegexp(props.path, [], props);\n\n      this.state = {\n        pathToRegexp,\n        route: currentRoute && match(currentRoute, pathToRegexp) ?\n          getInitialRouteValue(pathToRegexp, currentRoute, props) :\n          null\n      };\n\n      router.on.value(this.onBeforeRoute);\n      this.stream = createRoute(props.path, props).on.value(this.onRoute);\n    },\n\n    onBeforeRoute(path, pathToRegexp) {\n      if (this.state.route && !match(path, this.state.pathToRegexp)) {\n        this.callLifecycleProperty('onBeforeUnmount', createRoute);\n        this.update({\n          route: null\n        });\n        this.callLifecycleProperty('onUnmounted', createRoute);\n      }\n    },\n\n    onRoute(route) {\n      this.callLifecycleProperty('onBeforeMount', route);\n      this.update({route});\n      this.callLifecycleProperty('onMounted', route);\n    },\n\n    callLifecycleProperty(method, ...params) {\n      if (this.props[method]) this.props[method](...params);\n    },\n\n    onUnmounted() {\n      router.off.value(this.onBeforeRoute);\n      this.stream.end();\n    }\n  },\n\n  'template': function(template, expressionTypes, bindingTypes, getComponent) {\n    return template('<template expr0=\"expr0\"></template>', [{\n      'type': bindingTypes.IF,\n\n      'evaluate': function(scope) {\n        return scope.state.route;\n      },\n\n      'redundantAttribute': 'expr0',\n      'selector': '[expr0]',\n\n      'template': template('<slot expr1=\"expr1\"></slot>', [{\n        'type': bindingTypes.SLOT,\n\n        'attributes': [{\n          'type': expressionTypes.ATTRIBUTE,\n          'name': 'route',\n\n          'evaluate': function(scope) {\n            return scope.state.route;\n          }\n        }],\n\n        'name': 'default',\n        'redundantAttribute': 'expr1',\n        'selector': '[expr1]'\n      }])\n    }]);\n  },\n\n  'name': 'route-hoc'\n};\n\nconst WINDOW_EVENTS = 'popstate';\nconst CLICK_EVENT = 'click';\nconst DOWNLOAD_LINK_ATTRIBUTE = 'download';\nconst HREF_LINK_ATTRIBUTE = 'href';\nconst TARGET_SELF_LINK_ATTRIBUTE = '_self';\nconst LINK_TAG_NAME = 'A';\nconst HASH = '#';\nconst SLASH = '/';\nconst RE_ORIGIN = /^.+?\\/\\/+[^/]+/;\n\nconst getWindow = () => typeof window === 'undefined' ? null : window;\nconst getDocument = () => typeof document === 'undefined' ? null : document;\nconst getHistory = () => typeof history === 'undefined' ? null : history;\nconst getLocation = () => {\n  const win = getWindow();\n  return win ? win.location : {};\n};\n\nconst normalizeInitialSlash = str => str[0] === SLASH ? str : `${SLASH}${str}`;\nconst removeTrailingSlash = str => str[str.length - 1] === SLASH ? str.substr(0, str.length - 1) : str;\nconst normalizeBase = base => {\n  const win = getWindow();\n  const loc = win.location;\n  const root = loc ? `${loc.protocol}//${loc.host}` : '';\n  const {\n    pathname\n  } = loc ? loc : {};\n\n  switch (true) {\n    // pure root url + pathname\n    case Boolean(base) === false:\n      return removeTrailingSlash(`${root}${pathname || ''}`);\n    // full path base\n\n    case /(www|http(s)?:)/.test(base):\n      return base;\n    // hash navigation\n\n    case base[0] === HASH:\n      return `${root}${pathname && pathname !== SLASH ? pathname : ''}${base}`;\n    // root url with trailing slash\n\n    case base === SLASH:\n      return removeTrailingSlash(root);\n    // custom pathname\n\n    default:\n      return removeTrailingSlash(`${root}${normalizeInitialSlash(base)}`);\n  }\n};\nfunction setBase(base) {\n  defaults.base = normalizeBase(base);\n}\n\n/**\n * Convert a string from camel case to dash-case\n * @param   {string} string - probably a component tag name\n * @returns {string} component name normalized\n */\n/**\n * Convert a string containing dashes to camel case\n * @param   {string} string - input string\n * @returns {string} my-string -> myString\n */\n\nfunction dashToCamelCase(string) {\n  return string.replace(/-(\\w)/g, (_, c) => c.toUpperCase());\n}\n\n/**\n * Throw an error with a descriptive message\n * @param   { string } message - error message\n * @returns { undefined } hoppla.. at this point the program should stop working\n */\n\nfunction panic$2(message) {\n  throw new Error(message);\n}\n\n/**\n * Converts any DOM node/s to a loopable array\n * @param   { HTMLElement|NodeList } els - single html element or a node list\n * @returns { Array } always a loopable object\n */\nfunction domToArray(els) {\n  // can this object be already looped?\n  if (!Array.isArray(els)) {\n    // is it a node list?\n    if (/^\\[object (HTMLCollection|NodeList|Object)\\]$/.test(Object.prototype.toString.call(els)) && typeof els.length === 'number') return Array.from(els);else // if it's a single node\n      // it will be returned as \"array\" with one single entry\n      return [els];\n  } // this object could be looped out of the box\n\n\n  return els;\n}\n\n/**\n * Split a string into several items separed by spaces\n * @param   { string } l - events list\n * @returns { Array } all the events detected\n * @private\n */\n\nconst split = l => l.split(/\\s/);\n/**\n * Set a listener for all the events received separated by spaces\n * @param   { HTMLElement|NodeList|Array } els     - DOM node/s where the listeners will be bound\n * @param   { string }                     evList  - list of events we want to bind or unbind space separated\n * @param   { Function }                   cb      - listeners callback\n * @param   { string }                     method  - either 'addEventListener' or 'removeEventListener'\n * @param   { Object }                     options - event options (capture, once and passive)\n * @returns { undefined }\n * @private\n */\n\n\nfunction manageEvents(els, evList, cb, method, options) {\n  els = domToArray(els);\n  split(evList).forEach(e => {\n    els.forEach(el => el[method](e, cb, options || false));\n  });\n}\n/**\n * Set a listener for all the events received separated by spaces\n * @param   { HTMLElement|Array } els    - DOM node/s where the listeners will be bound\n * @param   { string }            evList - list of events we want to bind space separated\n * @param   { Function }          cb     - listeners callback\n * @param   { Object }            options - event options (capture, once and passive)\n * @returns { HTMLElement|NodeList|Array } DOM node/s and first argument of the function\n */\n\n\nfunction add(els, evList, cb, options) {\n  manageEvents(els, evList, cb, 'addEventListener', options);\n  return els;\n}\n/**\n * Remove all the listeners for the events received separated by spaces\n * @param   { HTMLElement|Array } els     - DOM node/s where the events will be unbind\n * @param   { string }            evList  - list of events we want unbind space separated\n * @param   { Function }          cb      - listeners callback\n * @param   { Object }             options - event options (capture, once and passive)\n * @returns { HTMLElement|NodeList|Array }  DOM node/s and first argument of the function\n */\n\nfunction remove(els, evList, cb, options) {\n  manageEvents(els, evList, cb, 'removeEventListener', options);\n  return els;\n}\n\n/**\n * Normalize the return values, in case of a single value we avoid to return an array\n * @param   { Array } values - list of values we want to return\n * @returns { Array|string|boolean } either the whole list of values or the single one found\n * @private\n */\n\nconst normalize = values => values.length === 1 ? values[0] : values;\n/**\n * Parse all the nodes received to get/remove/check their attributes\n * @param   { HTMLElement|NodeList|Array } els    - DOM node/s to parse\n * @param   { string|Array }               name   - name or list of attributes\n * @param   { string }                     method - method that will be used to parse the attributes\n * @returns { Array|string } result of the parsing in a list or a single value\n * @private\n */\n\n\nfunction parseNodes(els, name, method) {\n  const names = typeof name === 'string' ? [name] : name;\n  return normalize(domToArray(els).map(el => {\n    return normalize(names.map(n => el[method](n)));\n  }));\n}\n/**\n * Set any attribute on a single or a list of DOM nodes\n * @param   { HTMLElement|NodeList|Array } els   - DOM node/s to parse\n * @param   { string|Array }               name  - name or list of attributes to detect\n * @returns { boolean|Array } true or false or an array of boolean values\n * @example\n *\n * import { has } from 'bianco.attr'\n *\n * has(img, 'width') // false\n *\n * // or also\n * has(img, ['width', 'height']) // => [false, false]\n *\n * // or also\n * has([img1, img2], ['width', 'height']) // => [[false, false], [false, false]]\n */\n\nfunction has(els, name) {\n  return parseNodes(els, name, 'hasAttribute');\n}\n\nconst onWindowEvent = () => router.push(normalizePath(String(getLocation().href)));\n\nconst onRouterPush = path => {\n  const url = path.includes(defaults.base) ? path : defaults.base + path;\n  const loc = getLocation();\n  const hist = getHistory();\n  const doc = getDocument(); // update the browser history only if it's necessary\n\n  if (hist && url !== loc.href) {\n    hist.pushState(null, doc.title, url);\n  }\n};\n\nconst getLinkElement = node => node && !isLinkNode(node) ? getLinkElement(node.parentNode) : node;\n\nconst isLinkNode = node => node.nodeName === LINK_TAG_NAME;\n\nconst isCrossOriginLink = path => path.indexOf(getLocation().href.match(RE_ORIGIN)[0]) === -1;\n\nconst isTargetSelfLink = el => el.target && el.target !== TARGET_SELF_LINK_ATTRIBUTE;\n\nconst isEventForbidden = event => event.which && event.which !== 1 || // not left click\nevent.metaKey || event.ctrlKey || event.shiftKey // or meta keys\n|| event.defaultPrevented; // or default prevented\n\n\nconst isForbiddenLink = el => !el || !isLinkNode(el) // not A tag\n|| has(el, DOWNLOAD_LINK_ATTRIBUTE) // has download attr\n|| !has(el, HREF_LINK_ATTRIBUTE) // has no href attr\n|| isTargetSelfLink(el) || isCrossOriginLink(el.href);\n\nconst isHashLink = path => path.split(HASH).length > 1;\n\nconst normalizePath = path => path.replace(defaults.base, '');\n\nconst isInBase = path => !defaults.base || path.includes(defaults.base);\n/**\n * Callback called anytime something will be clicked on the page\n * @param   {HTMLEvent} event - click event\n * @returns {undefined} void method\n */\n\n\nconst onClick = event => {\n  if (isEventForbidden(event)) return;\n  const el = getLinkElement(event.target);\n  if (isForbiddenLink(el) || isHashLink(el.href) || !isInBase(el.href)) return;\n  const path = normalizePath(el.href);\n  router.push(path);\n  event.preventDefault();\n};\n/**\n * Link the rawth router to the DOM events\n * @param { HTMLElement } container - DOM node where the links are located\n * @returns {Function} teardown function\n */\n\n\nfunction initDomListeners(container) {\n  const win = getWindow();\n  const root = container || getDocument();\n\n  if (win) {\n    add(win, WINDOW_EVENTS, onWindowEvent);\n    add(root, CLICK_EVENT, onClick);\n  }\n\n  router.on.value(onRouterPush);\n  return () => {\n    if (win) {\n      remove(win, WINDOW_EVENTS, onWindowEvent);\n      remove(root, CLICK_EVENT, onClick);\n    }\n\n    router.off.value(onRouterPush);\n  };\n}\n\nconst BASE_ATTRIBUTE_NAME = 'base';\nconst INITIAL_ROUTE = 'initialRoute';\nconst ON_STARTED_ATTRIBUTE_NAME = 'onStarted';\nconst {template, bindingTypes} = __.DOMBindings;\nconst defer = window.requestAnimationFrame || window.setTimeout;\nconst cancelDefer = window.cancelAnimationFrame || window.clearTimeout;\n\n\nlet wasInitialized = false;\n\nvar routerHoc = {\n  'css': null,\n\n  'exports': pure(({slots, attributes, props}) => {\n    if (wasInitialized) panic$2('Multiple <router> components are not supported');\n\n    const getAttribute = name => attributes && attributes.find(a => dashToCamelCase(a.name) === name);\n\n    return {\n      slot: null,\n      el: null,\n      teardown: null,\n      mount(el, context) {\n        const initialRouteAttr = getAttribute(INITIAL_ROUTE);\n        const initialRoute = initialRouteAttr ? initialRouteAttr.evaluate(context) : null;\n        const currentRoute =  getCurrentRoute();\n        const onFirstRoute = () => {\n          this.createSlot(context);\n          router.off.value(onFirstRoute);\n        };\n        wasInitialized = true;\n\n        this.el = el;\n        this.teardown = initDomListeners(this.root);\n\n        this.setBase(context);\n\n        // mount the slots only if the current route was defined\n        if (currentRoute && !initialRoute) {\n          this.createSlot(context);\n        } else {\n          router.on.value(onFirstRoute);\n          router.push(initialRoute || window.location.href);\n        }\n      },\n      createSlot(context) {\n        if (!slots || !slots.length) return\n        const onStartedAttr = getAttribute(ON_STARTED_ATTRIBUTE_NAME);\n\n        this.slot = template(null, [{\n          type: bindingTypes.SLOT,\n          name: 'default'\n        }]);\n\n        this.slot.mount(this.el, {\n          slots\n        }, context);\n\n        if (onStartedAttr) {\n          onStartedAttr.evaluate(context)(getCurrentRoute());\n        }\n      },\n      update(context) {\n        this.setBase(context);\n\n        // defer the updates to avoid internal recoursive update calls\n        // see https://github.com/riot/route/issues/148\n        if (this.slot) {\n          cancelDefer(this.deferred);\n\n          this.deferred = defer(() => {\n            this.slot.update({}, context);\n          });\n        }\n      },\n      unmount(...args) {\n        this.teardown();\n        wasInitialized = false;\n\n        if (this.slot) {\n          this.slot.unmount(...args);\n        }\n      },\n      getBase(context) {\n        const baseAttr = getAttribute(BASE_ATTRIBUTE_NAME);\n\n        return baseAttr ? baseAttr.evaluate(context) : '/'\n      },\n      setBase(context) {\n        setBase(props ? props.base : this.getBase(context));\n      }\n    }\n  }),\n\n  'template': null,\n  'name': 'router-hoc'\n};\n\nexport { routeHoc as Route, routerHoc as Router, createURLStreamPipe, filterStrings, getCurrentRoute, initDomListeners, match, createRoute as route, router, setBase, toPath, toRegexp, toURL };\n","<app>\n  <router onStarted={ started }>\n    <nav>\n      <div class=\"back\"><img src=\"favicon.svg\"></div>\n      <div class=\"select\">\n        <select onchange={ select }>\n          <option each={ plan in Object.entries( props.plans ) } value={ plan[0] } selected={ state.plan == plan[0] }>{ plan[0] }</option>\n        </select>\n      </div>\n    </nav>\n\n    <route path=\"{ this.props.root }#\">\n      <ul>\n        <li each={ ( exercises, day ) in state.days } class={ day == state.day ? 'today' : '' }>\n          <span class=\"day\">{ props.weekdays[ day ] }</span>\n          <span if={ exercises.length == 0 } class={ day == state.day ? 'day' : '' }>: Off</span>\n          <span if={ day == state.day } class=\"day\">, </span>\n          <span if={ day == state.day } class=\"scream\"> TODAY!</span>\n          <ul>\n            <li each={ exercise in exercises }>\n              <a href=\"{ this.props.root }#/exercise/{ exercise.id }\">{ exercise.name }</a>\n              <span>&nbsp;</span>\n              <span>({ exercise.sets.length == 0 ? 'various' : exercise.sets.join( '-' ) + ' sets' })</span>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </route>\n\n    <route path=\"{ this.props.root }#/exercise/:id\">\n      <exercise id={ route.params.id } exercises={ this.props.exercises } root={ this.props.root }>\n      </exercise>\n    </route>\n  </router>\n\n  <script>\n    import { getISODay } from 'date-fns';\n    import { Router, Route } from '@riotjs/route';\n    import Exercise from './exercise.riot';\n\n    export default {\n      components: { Router, Route, Exercise },\n      onBeforeMount( props, state ) {\n        state.days = {};\n        state.day = getISODay( new Date() ) - 1;\n        state.plan = '';\n\n        let plan = window.localStorage.getItem( 'plan' ) || 'New Blood';\n\n        if ( plan && props.plans[ plan ] ) {\n          state.days = props.plans[ plan ].days;\n          state.plan = plan;\n        }\n\n        document.addEventListener( 'visibilitychange', () => {\n          this.update( { day: getISODay( new Date() ) - 1 } );\n        } );\n      },\n      started() {\n        if ( ! window.location.href.includes('#') ) {\n          window.location.href += '#/';\n        }\n      },\n      select( ev ) {\n        let plan = ev.target.value;\n\n        window.localStorage.setItem( 'plan', plan );\n\n        this.update( { days: this.props.plans[ plan ].days } );\n      }\n    }\n  </script>\n</app>\n","<exercise>\n  <div id=\"exercise\">\n    <nav>\n      <div class=\"back\"><a href=\"{ this.props.root }#/\"><img src=\"favicon.svg\"></a></div>\n      <div class=\"select\">\n        <select onchange={ exercise }>\n          <option each={ exercise in Object.values( props.exercises ) } value={ exercise.id } selected={ state.exercise.id == exercise.id }>{ exercise.name }</option>\n        </select>\n      </div>\n    </nav>\n\n    <div>\n      <table>\n        <tr>\n          <th>#</th>\n          <th>Type</th>\n          <th>Easy</th>\n          <th>Normal</th>\n          <th>Hard</th>\n        </tr>\n        <tr each={ ( step, index ) in state.exercise.steps } class={ state.step == index + 1 ? 'chosen' : '' }>\n          <td>{ index + 1 }</td>\n          <td>{ step.name }</td>\n          <td each={ ( goal, j ) in step.goals }>\n            <button onclick={ choose } value={ j + 1 } data-step={ index + 1 } class=\"level { state.step == index + 1 && state.level == j + 1 ? 'chosen' : '' }\">{ goal.join( '×' ) }</button>\n          </td>\n        </tr>\n      </table>\n    </div>\n  </div>\n\n  <style>\n.level {\n  cursor: pointer;\n}\n.chosen {\n  color: red;\n}\n  </style>\n\n  <script>\n    import { route, router } from '@riotjs/route';\n\n    export default {\n      state: {\n        exercise: {},\n        step: 1\n      },\n      render( id ) {\n        let step = window.localStorage.getItem( 'step:' + id ) || 1;\n        let level = window.localStorage.getItem( 'level:' + id ) || 1;\n\n        this.update( {\n          exercise: this.props.exercises[ id ] || {},\n          level: level,\n          step: step\n        } );\n      },\n      onMounted() {\n        this.render( this.props.id );\n      },\n      exercise( ev ) {\n        router.push( this.props.root + '#/exercise/' + ev.target.value )\n        this.render( ev.target.value );\n      },\n      choose( ev ) {\n        let exercise = this.state.exercise.id;\n        let step = ev.target.dataset.step;\n        let level = ev.target.value;\n\n        window.localStorage.setItem( 'step:' + exercise, step );\n        window.localStorage.setItem( 'level:' + exercise, level );\n\n        this.update( { step, level } );\n      }\n    }\n  </script>\n</exercise>\n","import plans from '../plans.json';\n\nlet ccplans = plans[ 'Convict Conditioning' ];\n\nfunction mkid( str ) {\n  return str.replace( ' ', '-' ).toLowerCase();\n}\n\nObject.entries( ccplans ).forEach( entry => {\n  let [ name, plan ] = entry;\n  let days = [];\n\n  Object.entries( plan.days ).forEach( day => {\n    let exercises = [];\n    day[1].forEach( exercise => {\n      exercise.id = mkid( exercise.name );\n      exercises.push( exercise );\n    } );\n    days.push( exercises );\n  } );\n\n  plan.name = name;\n  plan.id = mkid( name );\n  plan.days = days;\n} );\n\nexport default ccplans;\n","import { format, setISODay } from 'date-fns';\n\nlet weekdays = [];\nlet now = new Date();\n\nfor ( let n = 0; n < 7; n++ ) {\n  weekdays[ n ] = format( setISODay( now, n + 1 ), 'iiii' );\n}\n\nexport default weekdays;\n","import * as riot from 'riot';\nimport App from './app.riot';\nimport plans from './plans.js';\nimport weekdays from './weekdays.js';\nimport exercises from './exercises.js';\nimport { root } from '../package.json';\n\nimport '../style.css';\n\nif ( 'serviceWorker' in navigator ) {\n  window.addEventListener( 'load', function() {\n    navigator.serviceWorker.register( './sw.js', { scope: './' } ).then( reg => {\n      reg.onupdatefound = function() {\n        var worker = reg.installing;\n\n        worker.onstatechange = function() {\n          switch (worker.state) {\n          case 'installed':\n            console.log( '[sw] registered', reg.scope );\n\n            if ( navigator.serviceWorker.controller ) {\n              console.log( '[sw] content installed or updated' );\n            }\n            else {\n              console.log( '[sw] content available offline' );\n            }\n\n            break;\n          case 'redundant':\n            console.log( '[sw] installing became redundant', reg.scope );\n\n            break;\n          }\n        };\n      };\n    } ).catch( err => console.log( '[sw] failed to register', err ) );\n  } );\n}\n\nconst mountApp = riot.component( App );\n\nmountApp( document.getElementById( 'root' ), {\n  root: root,\n  plans: plans,\n  weekdays: weekdays,\n  exercises: exercises,\n} );\n\n"],"names":["dashToCamelCase","string","replace","_","c","toUpperCase","moveChildren","source","target","firstChild","appendChild","clearChildren","children","Array","from","forEach","removeNode","node","parentNode","remove","removeChild","bindingTypes","EACH","IF","SIMPLE","TAG","SLOT","expressionTypes","ATTRIBUTE","EVENT","TEXT","VALUE","indexOf","slice","append","get","parent","start","end","before","isSelect","noSelection","child","insertBefore","selected","selectedIndex","call","querySelectorAll","eqeq","a","b","identity","O","indexOf$1","moreNodes","moreStart","moreEnd","lessNodes","lessStart","lessEnd","compare","length","m","l","next","list","i","nextSibling","drop","findK","ktr","j","lo","hi","mid","smartDiff","futureNodes","futureStart","futureEnd","futureChanges","currentNodes","currentStart","currentEnd","currentChanges","currentLength","diff","live","currentIndex","push","applyDiff","rows","cols","v","d","k","r","pv","cv","pd","outer","diffIdx","OND","minLen","link","tresh","nodes","index","idxInOld","newi","oldi","prev","ptr","HS","dropChild","this","checkType","element","type","isSvg","el","owner","ownerSVGElement","isTemplate","isNil","content","isFunction","value","isObject","UNMOUNT_SCOPE","Symbol","EachBinding","Object","seal","[object Object]","scope","parentScope","update","placeholder","childrenMap","collection","evaluate","items","newChildrenMap","batches","binding","condition","template","itemName","getKey","indexName","root","isTemplateTag","Map","item","context","_ref","extendScope","create","key","oldItem","Boolean","mustFilterItem","componentTemplate","clone","cloneNode","mustMount","meta","fragment","dom","avoidDOMInjection","childNodes","createTemplateMeta","mount","delete","set","createPatch","options","currentSame","futureSame","isReversed","domdiff","patch","values","fn","redundant","info","pop","unmount","IfBinding","mustUnmount","pristine","panic","message","Error","evaluateAttributeExpressions","attributes","reduce","acc","attribute","name","assign","ElementProto","Element","prototype","isNativeHtmlProperty","cache","cached","val","has","memoize","hasOwnProperty","attributeExpression","_ref2","oldValue","newAttributes","oldAttributes","newKeys","keys","filter","includes","removeAttribute","removeAllAttributes","entries","setAllAttributes","isBoolean","getMethod","normalizeValue","RE_EVENTS_PREFIX","EventListener","event","ListenersWeakMap","WeakMap","normalizeStringValue","getTextNode","childNodeIndex","nodeType","Node","COMMENT_NODE","textNode","document","createTextNode","replaceChild","expressions","0","1","normalizedEventName","eventListener","listener","createListener","callback","isArray","getCallbackAndOptions","handler","mustAddEvent","removeEventListener","addEventListener","2","data","3","expression","Expression","apply","create$2","COMPONENTS_IMPLEMENTATION_MAP","DOM_COMPONENT_INSTANCE_PROPERTY","PLUGINS_SET","Set","MOUNT_METHOD_KEY","UPDATE_METHOD_KEY","UNMOUNT_METHOD_KEY","IS_PURE_SYMBOL","for","PARENT_KEY_SYMBOL","ATTRIBUTES_KEY_SYMBOL","TEMPLATE_KEY_SYMBOL","globals","freeze","__proto__","IS_DIRECTIVE","VALUE_ATTRIBUTE","SHOULD_UPDATE_KEY","ON_BEFORE_MOUNT_KEY","ON_MOUNTED_KEY","ON_BEFORE_UPDATE_KEY","ON_UPDATED_KEY","ON_BEFORE_UNMOUNT_KEY","ON_UNMOUNTED_KEY","PROPS_KEY","STATE_KEY","SLOTS_KEY","ROOT_KEY","getRealParent","SlotBinding","map","attr","extendParentScope","templateData","slots","find","id","realParent","create$6","html","bindings","createDOM","getTemplateScope","moveSlotInnerContent","mustRemoveRoot","slot","slotBindings","concat","TagBinding","tag","component","slotsToMarkup","getTag","getComponent","keepRootTag","method","4","fixTextExpressionsOffset","textExpressionsOffset","e","create$5","templateTagOffset","selector","redundantAttribute","querySelector","bindingExpressions","createDOMTree","container","ownerDocument","importNode","window","DOMParser","parseFromString","documentElement","createSVGTree","createElement","innerHTML","createHTMLTree","injectDOM","TemplateChunk","createTemplateDOM","Math","max","bindingsData","DOMBindings","createBinding","createExpression","noop","callOrAssign","constructor","defineProperty","enumerable","writable","configurable","defineProperties","properties","defineDefaults","defaults","domToArray","els","test","toString","$","ctx","normalize","attrs","props","prop","setAttribute","names","n","parseNodes","CSS_BY_NAME","getStyleNode","style","head","cssManager","css","inject","join","curry","_len","arguments","_key","_len2","args","_key2","COMPONENT_CORE_HELPERS","PURE_COMPONENT_API","COMPONENT_LIFECYCLE_METHODS","shouldUpdate","onBeforeMount","onMounted","onBeforeUpdate","onUpdated","onBeforeUnmount","onUnmounted","MOCKED_TEMPLATE_INTERFACE","evaluateInitialProps","initialProps","DOMattributesToObject","bindDOMNodeToComponentObject","createCoreAPIMethods","mapFunction","createComponent","exports","templateFn","components","componentTemplateFactory","_ref5","toLowerCase","createSubcomponents","_ref3","pureFactoryFunction","createPureComponent","componentAPI","defineComponent","state","preserveRoot","_ref4","add","enhanceComponentAPI","computeState","oldState","newState","addCssHook","tagName","getName","_ref6","runPlugins","createAttributeBindings","newProps","bind","__","toInteger","dirtyNumber","NaN","number","Number","isNaN","ceil","floor","requiredArgs","required","TypeError","toDate","argument","argStr","Date","getTime","console","warn","stack","addDays","dirtyDate","dirtyAmount","date","amount","setDate","getDate","addMilliseconds","timestamp","getDateMillisecondsPart","getTimezoneOffsetInMilliseconds","baseTimezoneOffset","getTimezoneOffset","setSeconds","isValid","formatDistanceLocale","lessThanXSeconds","one","other","xSeconds","halfAMinute","lessThanXMinutes","xMinutes","aboutXHours","xHours","xDays","aboutXWeeks","xWeeks","aboutXMonths","xMonths","aboutXYears","xYears","overXYears","almostXYears","buildFormatLongFn","dirtyOptions","width","String","defaultWidth","formats","formatLong","full","long","medium","short","time","dateTime","formatRelativeLocale","lastWeek","yesterday","today","tomorrow","nextWeek","buildLocalizeFn","dirtyIndex","valuesArray","formattingValues","defaultFormattingWidth","_defaultWidth","_width","argumentCallback","buildMatchFn","dirtyString","matchPattern","matchPatterns","defaultMatchWidth","matchResult","match","matchedString","parsePatterns","defaultParseWidth","array","predicate","findIndex","pattern","object","findKey","valueCallback","rest","locale","code","formatDistance","token","count","result","addSuffix","comparison","formatRelative","_date","_baseDate","_options","localize","ordinalNumber","_dirtyOptions","rem100","era","narrow","abbreviated","wide","quarter","month","day","dayPeriod","am","pm","midnight","noon","morning","afternoon","evening","night","parsePattern","parseInt","parseResult","any","weekStartsOn","firstWeekContainsDate","subMilliseconds","addLeadingZeros","targetLength","sign","output","abs","formatters","signedYear","getUTCFullYear","year","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","numberOfDigits","milliseconds","getUTCMilliseconds","pow","startOfUTCISOWeek","getUTCDay","setUTCDate","setUTCHours","getUTCISOWeekYear","fourthOfJanuaryOfNextYear","setUTCFullYear","startOfNextYear","fourthOfJanuaryOfThisYear","startOfThisYear","startOfUTCISOWeekYear","fourthOfJanuary","startOfUTCWeek","localeWeekStartsOn","defaultWeekStartsOn","RangeError","getUTCWeekYear","localeFirstWeekContainsDate","defaultFirstWeekContainsDate","firstWeekOfNextYear","firstWeekOfThisYear","startOfUTCWeekYear","firstWeek","dayPeriodEnum","G","y","unit","lightFormatters","Y","signedWeekYear","weekYear","R","u","Q","q","M","L","w","week","round","getUTCWeek","I","isoWeek","getUTCISOWeek","D","dayOfYear","setUTCMonth","startOfYearTimestamp","difference","getUTCDayOfYear","E","dayOfWeek","localDayOfWeek","isoDayOfWeek","dayPeriodEnumValue","hours","B","h","H","K","s","S","X","_localize","timezoneOffset","_originalDate","formatTimezoneWithOptionalMinutes","formatTimezone","x","formatTimezoneShort","z","t","originalDate","T","offset","dirtyDelimiter","absOffset","minutes","delimiter","dateLongFormatter","timeLongFormatter","longFormatters","p","P","dateTimeFormat","datePattern","timePattern","protectedDayOfYearTokens","protectedWeekYearTokens","isProtectedDayOfYearToken","isProtectedWeekYearToken","throwProtectedError","format","input","formattingTokensRegExp","longFormattingTokensRegExp","escapedStringRegExp","doubleQuoteRegExp","unescapedLatinCharacterRegExp","dirtyFormatStr","formatStr","defaultLocale","utcDate","formatterOptions","substring","firstCharacter","longFormatter","cleanEscapedString","formatter","useAdditionalWeekYearTokens","useAdditionalDayOfYearTokens","getISODay","getDay","setISODay","dirtyDay","currentDay","parse","str","tokens","char","charCodeAt","lexer","_a","prefixes","defaultPattern","escapeString","path","tryConsume","mustConsume","undefined","nextType","consumeText","prefix","suffix","modifier","name_1","pattern_1","flags","sensitive","stringToRegexp","strict","_b","_c","_d","encode","endsWith","route","_i","tokens_1","mod","endToken","isEndDelimited","RegExp","tokensToRegexp","pathToRegexp","groups","regexpToRegexp","paths","parts","arrayToRegexp","CANCEL","ruit","tasks","Promise","resolve","reject","run","queue","task","done","then","cancel","compose","reverse","API_METHODS","UNSUBSCRIBE_SYMBOL","createStream","modifiers","stream","dispatch","callbacks","f","erre","fns","success","error","generator","addToCollection","deleteFromCollection","on","off","connect","res","err","return","clear","fork","install","isNode","process","replaceBase","base","matchOrSkip","pathRegExp","panic$1","silentErrors","router","isString","mergeOptions","toRegexp","toURL","params","exec","url","require","URL","parseURL","param","createURLStreamPipe","createRoute","URLStream","dispatcherStream","receiverStream","getCurrentRoute","currentRoute","getInitialRouteValue","g","routeHoc","onBeforeRoute","onRoute","callLifecycleProperty","RE_ORIGIN","getWindow","getDocument","getLocation","win","location","removeTrailingSlash","substr","setBase","loc","protocol","host","pathname","normalizeBase","manageEvents","evList","cb","split","onWindowEvent","normalizePath","href","onRouterPush","hist","history","doc","pushState","title","getLinkElement","isLinkNode","nodeName","isForbiddenLink","isTargetSelfLink","onClick","which","metaKey","ctrlKey","shiftKey","defaultPrevented","isEventForbidden","isHashLink","isInBase","preventDefault","defer","requestAnimationFrame","setTimeout","cancelDefer","cancelAnimationFrame","clearTimeout","wasInitialized","func","panic$2","getAttribute","teardown","initialRouteAttr","initialRoute","onFirstRoute","createSlot","initDomListeners","onStartedAttr","deferred","baseAttr","getBase","Route","Exercise","exercise","step","localStorage","getItem","level","exercises","render","ev","dataset","setItem","goal","choose","days","plan","plans","select","weekdays","sets","started","ccplans","mkid","entry","now","navigator","serviceWorker","register","reg","onupdatefound","worker","installing","onstatechange","log","controller","catch","implementation","App","_temp","getElementById"],"mappings":"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"}